#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_3f)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_3f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 3F 0000
        gbc.setState(0x14cc, 0x9733, 0x97f0, 0x54c0, 0x9131, 0x1b52, 0x0, 0x0);
        gbc.writeMem(0x14cc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9733);
        EXPECT(gbc.pc(), 0x14cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0001
        gbc.setState(0xca70, 0xe0a3, 0x9ef0, 0x4468, 0x2d91, 0xca2d, 0x1, 0x1);
        gbc.writeMem(0xca70, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe0a3);
        EXPECT(gbc.pc(), 0xca71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca70), 0x3f);
        // 3F 0002
        gbc.setState(0x92c9, 0x5e14, 0xf710, 0x359e, 0x2624, 0x9287, 0x0, 0x0);
        gbc.writeMem(0x92c9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5e14);
        EXPECT(gbc.pc(), 0x92ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c9), 0x3f);
        // 3F 0003
        gbc.setState(0x881, 0x57e3, 0xf760, 0x9c52, 0x3bd9, 0x77ed, 0x0, 0x0);
        gbc.writeMem(0x881, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x57e3);
        EXPECT(gbc.pc(), 0x882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0004
        gbc.setState(0xbdf8, 0xd658, 0x9000, 0x8b4a, 0x8d56, 0xafee, 0x0, 0x0);
        gbc.writeMem(0xbdf8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd658);
        EXPECT(gbc.pc(), 0xbdf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf8), 0x3f);
        // 3F 0005
        gbc.setState(0x9a83, 0x52f7, 0x4520, 0x58c1, 0x772e, 0x2fa, 0x0, 0x1);
        gbc.writeMem(0x9a83, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x52f7);
        EXPECT(gbc.pc(), 0x9a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a83), 0x3f);
        // 3F 0006
        gbc.setState(0xb299, 0x77d8, 0xe00, 0x16e1, 0x38f9, 0xc9ef, 0x0, 0x1);
        gbc.writeMem(0xb299, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x77d8);
        EXPECT(gbc.pc(), 0xb29a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb299), 0x3f);
        // 3F 0007
        gbc.setState(0xc5e4, 0xae1a, 0xc5b0, 0x5460, 0x38a9, 0xb603, 0x0, 0x1);
        gbc.writeMem(0xc5e4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xae1a);
        EXPECT(gbc.pc(), 0xc5e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e4), 0x3f);
        // 3F 0008
        gbc.setState(0x707e, 0x373e, 0x44e0, 0x338, 0x1b09, 0x2012, 0x1, 0x1);
        gbc.writeMem(0x707e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x373e);
        EXPECT(gbc.pc(), 0x707f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0009
        gbc.setState(0x5558, 0xd2f9, 0x7530, 0xf55c, 0x5b4f, 0x499e, 0x0, 0x0);
        gbc.writeMem(0x5558, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd2f9);
        EXPECT(gbc.pc(), 0x5559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 000A
        gbc.setState(0x4c2b, 0x8183, 0xb0b0, 0xc36a, 0x88f4, 0xa595, 0x0, 0x0);
        gbc.writeMem(0x4c2b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8183);
        EXPECT(gbc.pc(), 0x4c2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 000B
        gbc.setState(0x4bd8, 0xab95, 0xc730, 0x5b8d, 0x593f, 0xe684, 0x0, 0x1);
        gbc.writeMem(0x4bd8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xab95);
        EXPECT(gbc.pc(), 0x4bd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 000C
        gbc.setState(0x36be, 0x9256, 0x6220, 0x2ba8, 0xff3b, 0x254d, 0x1, 0x1);
        gbc.writeMem(0x36be, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9256);
        EXPECT(gbc.pc(), 0x36bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 000D
        gbc.setState(0x2816, 0x94b8, 0x9e0, 0xdf56, 0xec65, 0xf6d4, 0x1, 0x1);
        gbc.writeMem(0x2816, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x94b8);
        EXPECT(gbc.pc(), 0x2817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 000E
        gbc.setState(0x90b, 0x86bd, 0x3d90, 0xdaff, 0x605f, 0xd77b, 0x1, 0x1);
        gbc.writeMem(0x90b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x86bd);
        EXPECT(gbc.pc(), 0x90c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 000F
        gbc.setState(0xbb9c, 0x5514, 0xac40, 0xa248, 0xfff0, 0xa35d, 0x0, 0x0);
        gbc.writeMem(0xbb9c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5514);
        EXPECT(gbc.pc(), 0xbb9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb9c), 0x3f);
        // 3F 0010
        gbc.setState(0x1e3a, 0xde40, 0x3e40, 0xc2b5, 0xa79e, 0x72c0, 0x0, 0x0);
        gbc.writeMem(0x1e3a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xde40);
        EXPECT(gbc.pc(), 0x1e3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0012
        gbc.setState(0xedc3, 0x8c1a, 0xfcf0, 0xbd40, 0x6faa, 0x60a4, 0x1, 0x0);
        gbc.writeMem(0xedc3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8c1a);
        EXPECT(gbc.pc(), 0xedc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc3), 0x3f);
        // 3F 0013
        gbc.setState(0xb048, 0x3149, 0x23b0, 0x5e14, 0xde1f, 0xe010, 0x0, 0x1);
        gbc.writeMem(0xb048, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3149);
        EXPECT(gbc.pc(), 0xb049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb048), 0x3f);
        // 3F 0014
        gbc.setState(0xcc9d, 0x5cda, 0x8200, 0xcb8, 0x7978, 0x4059, 0x1, 0x1);
        gbc.writeMem(0xcc9d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5cda);
        EXPECT(gbc.pc(), 0xcc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc9d), 0x3f);
        // 3F 0015
        gbc.setState(0xfdd, 0x1f74, 0xd150, 0x9eae, 0x2b8c, 0x9bbd, 0x1, 0x0);
        gbc.writeMem(0xfdd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x1f74);
        EXPECT(gbc.pc(), 0xfde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0016
        gbc.setState(0xa16f, 0x5a77, 0x1590, 0xa26d, 0xc612, 0x44ca, 0x0, 0x0);
        gbc.writeMem(0xa16f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5a77);
        EXPECT(gbc.pc(), 0xa170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa16f), 0x3f);
        // 3F 0017
        gbc.setState(0x29bd, 0xb38f, 0x3d0, 0x8367, 0xe69c, 0x6e15, 0x1, 0x0);
        gbc.writeMem(0x29bd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb38f);
        EXPECT(gbc.pc(), 0x29be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0018
        gbc.setState(0x8c6f, 0xf020, 0xc1e0, 0xec72, 0xd83c, 0x36b9, 0x1, 0x0);
        gbc.writeMem(0x8c6f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf020);
        EXPECT(gbc.pc(), 0x8c70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c6f), 0x3f);
        // 3F 0019
        gbc.setState(0xcb40, 0x2a17, 0xf5e0, 0x634c, 0x5e32, 0xff9a, 0x1, 0x1);
        gbc.writeMem(0xcb40, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2a17);
        EXPECT(gbc.pc(), 0xcb41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb40), 0x3f);
        // 3F 001B
        gbc.setState(0x3b11, 0x4a7f, 0xd060, 0xa83f, 0x536b, 0xc819, 0x1, 0x0);
        gbc.writeMem(0x3b11, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4a7f);
        EXPECT(gbc.pc(), 0x3b12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 001C
        gbc.setState(0x4730, 0x811b, 0x7870, 0xa99c, 0xea8e, 0x43c8, 0x1, 0x0);
        gbc.writeMem(0x4730, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x811b);
        EXPECT(gbc.pc(), 0x4731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 001D
        gbc.setState(0x82cb, 0x7d47, 0x4160, 0x4241, 0xb680, 0xa79f, 0x0, 0x1);
        gbc.writeMem(0x82cb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7d47);
        EXPECT(gbc.pc(), 0x82cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82cb), 0x3f);
        // 3F 001E
        gbc.setState(0xea47, 0xa59d, 0xe300, 0x444d, 0x1bc7, 0x99bc, 0x0, 0x1);
        gbc.writeMem(0xea47, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa59d);
        EXPECT(gbc.pc(), 0xea48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea47), 0x3f);
        // 3F 001F
        gbc.setState(0x6c4d, 0x19d9, 0xa20, 0x7106, 0x8c88, 0x9fc4, 0x0, 0x1);
        gbc.writeMem(0x6c4d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x19d9);
        EXPECT(gbc.pc(), 0x6c4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0020
        gbc.setState(0xa752, 0xb169, 0x14e0, 0x4062, 0x1220, 0x69a0, 0x0, 0x0);
        gbc.writeMem(0xa752, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb169);
        EXPECT(gbc.pc(), 0xa753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa752), 0x3f);
        // 3F 0021
        gbc.setState(0x4950, 0x3837, 0x3ab0, 0xc794, 0xb328, 0xd820, 0x0, 0x1);
        gbc.writeMem(0x4950, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3837);
        EXPECT(gbc.pc(), 0x4951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0022
        gbc.setState(0x36dc, 0x74ae, 0xb190, 0xad34, 0x6a22, 0xc5d3, 0x0, 0x0);
        gbc.writeMem(0x36dc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x74ae);
        EXPECT(gbc.pc(), 0x36dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0023
        gbc.setState(0x130c, 0xe89, 0xf490, 0xec43, 0xf486, 0xf0e2, 0x1, 0x0);
        gbc.writeMem(0x130c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe89);
        EXPECT(gbc.pc(), 0x130d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0024
        gbc.setState(0x2afe, 0x2a9f, 0x3a50, 0xe01e, 0xb38c, 0x7300, 0x0, 0x1);
        gbc.writeMem(0x2afe, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2a9f);
        EXPECT(gbc.pc(), 0x2aff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0025
        gbc.setState(0xe1ac, 0x2ad, 0xee20, 0x3c04, 0x9baf, 0x132f, 0x1, 0x0);
        gbc.writeMem(0xe1ac, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2ad);
        EXPECT(gbc.pc(), 0xe1ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1ac), 0x3f);
        // 3F 0026
        gbc.setState(0x4465, 0xa7cd, 0x4520, 0xceaa, 0xef64, 0xde8, 0x1, 0x0);
        gbc.writeMem(0x4465, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa7cd);
        EXPECT(gbc.pc(), 0x4466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0029
        gbc.setState(0x1099, 0xf7e5, 0xd0d0, 0xa588, 0x35a3, 0xfaf4, 0x1, 0x0);
        gbc.writeMem(0x1099, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf7e5);
        EXPECT(gbc.pc(), 0x109a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 002A
        gbc.setState(0x832, 0xcac8, 0x2bd0, 0xcdc1, 0x406f, 0xf4d, 0x0, 0x0);
        gbc.writeMem(0x832, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xcac8);
        EXPECT(gbc.pc(), 0x833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 002C
        gbc.setState(0x57f, 0xc7ba, 0x19a0, 0x34a6, 0xd2d3, 0x19b0, 0x1, 0x0);
        gbc.writeMem(0x57f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc7ba);
        EXPECT(gbc.pc(), 0x580);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 002D
        gbc.setState(0x1b84, 0x78cc, 0x38c0, 0x113b, 0x46f5, 0x59c, 0x1, 0x0);
        gbc.writeMem(0x1b84, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x78cc);
        EXPECT(gbc.pc(), 0x1b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 002E
        gbc.setState(0x4144, 0xb349, 0x2d00, 0x9823, 0xc11a, 0xf2a6, 0x0, 0x1);
        gbc.writeMem(0x4144, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb349);
        EXPECT(gbc.pc(), 0x4145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 002F
        gbc.setState(0x249e, 0x729a, 0xd30, 0x58c0, 0x9217, 0xaa74, 0x1, 0x0);
        gbc.writeMem(0x249e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x729a);
        EXPECT(gbc.pc(), 0x249f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0030
        gbc.setState(0x2935, 0x85a6, 0xf420, 0x8748, 0xf31e, 0x43d9, 0x0, 0x1);
        gbc.writeMem(0x2935, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x85a6);
        EXPECT(gbc.pc(), 0x2936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0031
        gbc.setState(0xca89, 0x2a22, 0x8310, 0x4829, 0x26f0, 0xc0d3, 0x0, 0x1);
        gbc.writeMem(0xca89, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2a22);
        EXPECT(gbc.pc(), 0xca8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca89), 0x3f);
        // 3F 0032
        gbc.setState(0x2612, 0xf67, 0x82a0, 0xbe67, 0xe67, 0x763c, 0x0, 0x0);
        gbc.writeMem(0x2612, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xf67);
        EXPECT(gbc.pc(), 0x2613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0033
        gbc.setState(0xe756, 0x9b2, 0x76a0, 0x58bb, 0x736c, 0x242f, 0x0, 0x1);
        gbc.writeMem(0xe756, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9b2);
        EXPECT(gbc.pc(), 0xe757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe756), 0x3f);
        // 3F 0034
        gbc.setState(0x2c1a, 0x7bc1, 0x230, 0xb4ed, 0x993a, 0xd478, 0x1, 0x1);
        gbc.writeMem(0x2c1a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7bc1);
        EXPECT(gbc.pc(), 0x2c1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0035
        gbc.setState(0x7f98, 0x4d1, 0xdc50, 0xc0ef, 0xea7b, 0x96b7, 0x1, 0x1);
        gbc.writeMem(0x7f98, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4d1);
        EXPECT(gbc.pc(), 0x7f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0036
        gbc.setState(0x83f, 0x5814, 0x1480, 0x4f30, 0x2d4b, 0x54ea, 0x1, 0x0);
        gbc.writeMem(0x83f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5814);
        EXPECT(gbc.pc(), 0x840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0037
        gbc.setState(0x1f9c, 0xe267, 0xdfd0, 0x5f72, 0x81e9, 0xd478, 0x1, 0x1);
        gbc.writeMem(0x1f9c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe267);
        EXPECT(gbc.pc(), 0x1f9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0038
        gbc.setState(0x1bee, 0xcb79, 0xbcb0, 0x2b14, 0xaaee, 0x86e8, 0x0, 0x1);
        gbc.writeMem(0x1bee, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xcb79);
        EXPECT(gbc.pc(), 0x1bef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0039
        gbc.setState(0xa7ef, 0x726b, 0xca30, 0xd27d, 0x97b3, 0xba78, 0x0, 0x1);
        gbc.writeMem(0xa7ef, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x726b);
        EXPECT(gbc.pc(), 0xa7f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ef), 0x3f);
        // 3F 003A
        gbc.setState(0xa221, 0xb48c, 0xe7b0, 0x3b35, 0xa791, 0xaaed, 0x1, 0x1);
        gbc.writeMem(0xa221, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb48c);
        EXPECT(gbc.pc(), 0xa222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa221), 0x3f);
        // 3F 003B
        gbc.setState(0xcd0a, 0xcb99, 0x85e0, 0x95a3, 0xba6d, 0x6a4a, 0x1, 0x1);
        gbc.writeMem(0xcd0a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xcb99);
        EXPECT(gbc.pc(), 0xcd0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd0a), 0x3f);
        // 3F 003C
        gbc.setState(0xa12b, 0x6222, 0xf590, 0xd00b, 0x415b, 0x5558, 0x1, 0x1);
        gbc.writeMem(0xa12b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6222);
        EXPECT(gbc.pc(), 0xa12c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa12b), 0x3f);
        // 3F 003D
        gbc.setState(0xc8a, 0xb4e4, 0x13f0, 0x8baa, 0xbc50, 0x7b5e, 0x0, 0x0);
        gbc.writeMem(0xc8a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb4e4);
        EXPECT(gbc.pc(), 0xc8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 003F
        gbc.setState(0x4bc0, 0x1dbb, 0x69f0, 0x5efc, 0xd987, 0x7783, 0x1, 0x1);
        gbc.writeMem(0x4bc0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1dbb);
        EXPECT(gbc.pc(), 0x4bc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0040
        gbc.setState(0x7abd, 0xc3bf, 0x2d00, 0x909b, 0xb61b, 0x34d, 0x0, 0x1);
        gbc.writeMem(0x7abd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc3bf);
        EXPECT(gbc.pc(), 0x7abe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0041
        gbc.setState(0x7d25, 0xc9d3, 0x6e30, 0x8ddb, 0x6696, 0x7b51, 0x0, 0x1);
        gbc.writeMem(0x7d25, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc9d3);
        EXPECT(gbc.pc(), 0x7d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0042
        gbc.setState(0x42f7, 0x554e, 0x650, 0xf93b, 0x5664, 0xb203, 0x0, 0x0);
        gbc.writeMem(0x42f7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x554e);
        EXPECT(gbc.pc(), 0x42f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0043
        gbc.setState(0x5a3f, 0x5842, 0x2390, 0xd3af, 0x3664, 0xfe20, 0x0, 0x0);
        gbc.writeMem(0x5a3f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5842);
        EXPECT(gbc.pc(), 0x5a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0044
        gbc.setState(0x76fa, 0x78bf, 0xff50, 0x8c3a, 0xcd72, 0x4682, 0x1, 0x1);
        gbc.writeMem(0x76fa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x78bf);
        EXPECT(gbc.pc(), 0x76fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0045
        gbc.setState(0x698c, 0x368, 0x9840, 0xb3ec, 0x1833, 0x55b5, 0x1, 0x1);
        gbc.writeMem(0x698c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x368);
        EXPECT(gbc.pc(), 0x698d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0046
        gbc.setState(0xb380, 0x3a2e, 0x4590, 0xc225, 0x990b, 0x76a6, 0x0, 0x0);
        gbc.writeMem(0xb380, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3a2e);
        EXPECT(gbc.pc(), 0xb381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb380), 0x3f);
        // 3F 0047
        gbc.setState(0x8ad5, 0x7a7b, 0x67c0, 0x6fae, 0x6d9d, 0xadcc, 0x1, 0x1);
        gbc.writeMem(0x8ad5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7a7b);
        EXPECT(gbc.pc(), 0x8ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad5), 0x3f);
        // 3F 0048
        gbc.setState(0x993f, 0xbca6, 0xb300, 0x872d, 0x7625, 0xe37, 0x1, 0x1);
        gbc.writeMem(0x993f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xbca6);
        EXPECT(gbc.pc(), 0x9940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993f), 0x3f);
        // 3F 0049
        gbc.setState(0x3580, 0x178, 0xaf60, 0x4e2f, 0x83d4, 0xe0b5, 0x0, 0x0);
        gbc.writeMem(0x3580, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x178);
        EXPECT(gbc.pc(), 0x3581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 004A
        gbc.setState(0x5a02, 0xa904, 0xb070, 0xe0c0, 0x2d0a, 0xe5b8, 0x0, 0x1);
        gbc.writeMem(0x5a02, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa904);
        EXPECT(gbc.pc(), 0x5a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 004B
        gbc.setState(0x2265, 0x5e9c, 0x4810, 0xb82c, 0xaf3, 0xff8b, 0x1, 0x0);
        gbc.writeMem(0x2265, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5e9c);
        EXPECT(gbc.pc(), 0x2266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 004C
        gbc.setState(0x56f4, 0xddf1, 0x4670, 0x7dc9, 0x22dd, 0xdb21, 0x0, 0x1);
        gbc.writeMem(0x56f4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xddf1);
        EXPECT(gbc.pc(), 0x56f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 004E
        gbc.setState(0x4354, 0x42f1, 0xf990, 0x1e11, 0xd71c, 0xfdb7, 0x0, 0x1);
        gbc.writeMem(0x4354, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x42f1);
        EXPECT(gbc.pc(), 0x4355);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 004F
        gbc.setState(0x3389, 0xddd6, 0xe3c0, 0xfb81, 0x70d9, 0xadcc, 0x0, 0x1);
        gbc.writeMem(0x3389, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xddd6);
        EXPECT(gbc.pc(), 0x338a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0050
        gbc.setState(0x2dbd, 0x41e4, 0x4980, 0x7453, 0xbee1, 0x4a64, 0x0, 0x0);
        gbc.writeMem(0x2dbd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x41e4);
        EXPECT(gbc.pc(), 0x2dbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0052
        gbc.setState(0xb38, 0xeb73, 0x8eb0, 0x8e7b, 0x9983, 0x74b9, 0x0, 0x0);
        gbc.writeMem(0xb38, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xeb73);
        EXPECT(gbc.pc(), 0xb39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0053
        gbc.setState(0x1d1e, 0x52c6, 0x83d0, 0xb07f, 0x9202, 0x6908, 0x0, 0x1);
        gbc.writeMem(0x1d1e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x52c6);
        EXPECT(gbc.pc(), 0x1d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0054
        gbc.setState(0x7845, 0xa754, 0x3a40, 0x8f68, 0x1dc7, 0xbb75, 0x0, 0x1);
        gbc.writeMem(0x7845, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa754);
        EXPECT(gbc.pc(), 0x7846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0055
        gbc.setState(0x957d, 0x4b72, 0xddb0, 0xec25, 0xe241, 0xa3f2, 0x0, 0x0);
        gbc.writeMem(0x957d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4b72);
        EXPECT(gbc.pc(), 0x957e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957d), 0x3f);
        // 3F 0056
        gbc.setState(0x3730, 0xd5cc, 0xd540, 0xe90e, 0xe02a, 0xac93, 0x1, 0x0);
        gbc.writeMem(0x3730, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd5cc);
        EXPECT(gbc.pc(), 0x3731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0057
        gbc.setState(0x342e, 0x9751, 0x8b50, 0xbb8, 0xd2b5, 0x3894, 0x0, 0x1);
        gbc.writeMem(0x342e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9751);
        EXPECT(gbc.pc(), 0x342f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0058
        gbc.setState(0xb00a, 0x20db, 0x3c0, 0x6167, 0x3fcb, 0xa0e2, 0x0, 0x1);
        gbc.writeMem(0xb00a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x20db);
        EXPECT(gbc.pc(), 0xb00b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb00a), 0x3f);
        // 3F 005A
        gbc.setState(0x9ae3, 0x293a, 0xfa0, 0x73af, 0x2056, 0x9836, 0x1, 0x0);
        gbc.writeMem(0x9ae3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x293a);
        EXPECT(gbc.pc(), 0x9ae4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae3), 0x3f);
        // 3F 005B
        gbc.setState(0x23a3, 0xb254, 0x1690, 0x640f, 0x3132, 0x6e10, 0x0, 0x0);
        gbc.writeMem(0x23a3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb254);
        EXPECT(gbc.pc(), 0x23a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 005C
        gbc.setState(0xc0ba, 0xedc5, 0x87a0, 0x4474, 0xff6, 0x976e, 0x0, 0x1);
        gbc.writeMem(0xc0ba, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xedc5);
        EXPECT(gbc.pc(), 0xc0bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ba), 0x3f);
        // 3F 005D
        gbc.setState(0xbff7, 0xe0fe, 0x4140, 0xcc16, 0x9983, 0x25b2, 0x0, 0x1);
        gbc.writeMem(0xbff7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe0fe);
        EXPECT(gbc.pc(), 0xbff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbff7), 0x3f);
        // 3F 005E
        gbc.setState(0xebf0, 0xf3e6, 0xa3e0, 0xaef1, 0x431c, 0xddf3, 0x1, 0x0);
        gbc.writeMem(0xebf0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf3e6);
        EXPECT(gbc.pc(), 0xebf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebf0), 0x3f);
        // 3F 005F
        gbc.setState(0x3fc5, 0xe748, 0x72d0, 0x1e66, 0xb9a9, 0x4099, 0x1, 0x1);
        gbc.writeMem(0x3fc5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe748);
        EXPECT(gbc.pc(), 0x3fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0060
        gbc.setState(0x5c4e, 0x39cb, 0x4050, 0xe0b, 0xfc75, 0xb7a7, 0x0, 0x0);
        gbc.writeMem(0x5c4e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x39cb);
        EXPECT(gbc.pc(), 0x5c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0061
        gbc.setState(0x46cf, 0xdc23, 0x54f0, 0xde04, 0x9c02, 0xff21, 0x0, 0x1);
        gbc.writeMem(0x46cf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xdc23);
        EXPECT(gbc.pc(), 0x46d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0062
        gbc.setState(0x88a1, 0xc2f6, 0x7450, 0x210f, 0xac9c, 0xd3a0, 0x1, 0x1);
        gbc.writeMem(0x88a1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc2f6);
        EXPECT(gbc.pc(), 0x88a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88a1), 0x3f);
        // 3F 0063
        gbc.setState(0x535d, 0x53f3, 0x17d0, 0x6498, 0x856e, 0x59f9, 0x1, 0x1);
        gbc.writeMem(0x535d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x53f3);
        EXPECT(gbc.pc(), 0x535e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0065
        gbc.setState(0x8d9, 0x465f, 0xc880, 0x821, 0xd117, 0x6ebe, 0x0, 0x1);
        gbc.writeMem(0x8d9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x465f);
        EXPECT(gbc.pc(), 0x8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0066
        gbc.setState(0x58e8, 0x603d, 0x5fc0, 0x42ac, 0x7525, 0xc90b, 0x0, 0x1);
        gbc.writeMem(0x58e8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x603d);
        EXPECT(gbc.pc(), 0x58e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0067
        gbc.setState(0x245a, 0xd82, 0xf910, 0x7416, 0x2985, 0x3e1e, 0x0, 0x1);
        gbc.writeMem(0x245a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd82);
        EXPECT(gbc.pc(), 0x245b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0068
        gbc.setState(0xb15a, 0xdcf5, 0x55e0, 0xb309, 0x37c4, 0x8435, 0x1, 0x0);
        gbc.writeMem(0xb15a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xdcf5);
        EXPECT(gbc.pc(), 0xb15b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb15a), 0x3f);
        // 3F 0069
        gbc.setState(0x8dca, 0x57ec, 0x51a0, 0xd8f1, 0xad7a, 0x337, 0x1, 0x0);
        gbc.writeMem(0x8dca, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x57ec);
        EXPECT(gbc.pc(), 0x8dcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dca), 0x3f);
        // 3F 006B
        gbc.setState(0xee95, 0x7b9e, 0xbcf0, 0x8916, 0x17e9, 0xc489, 0x0, 0x1);
        gbc.writeMem(0xee95, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7b9e);
        EXPECT(gbc.pc(), 0xee96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee95), 0x3f);
        // 3F 006C
        gbc.setState(0xe3c6, 0x4720, 0x9300, 0x9537, 0xa4cc, 0x1600, 0x1, 0x1);
        gbc.writeMem(0xe3c6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4720);
        EXPECT(gbc.pc(), 0xe3c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3c6), 0x3f);
        // 3F 006D
        gbc.setState(0xe49b, 0xdd64, 0xd3f0, 0xb5ff, 0x497f, 0xb679, 0x1, 0x1);
        gbc.writeMem(0xe49b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xdd64);
        EXPECT(gbc.pc(), 0xe49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe49b), 0x3f);
        // 3F 006E
        gbc.setState(0xc0fc, 0xb6c, 0x2660, 0xae2f, 0x2620, 0xec7a, 0x0, 0x0);
        gbc.writeMem(0xc0fc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb6c);
        EXPECT(gbc.pc(), 0xc0fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0fc), 0x3f);
        // 3F 006F
        gbc.setState(0xb2b9, 0x662e, 0x99d0, 0x704f, 0x60a7, 0xcca4, 0x1, 0x1);
        gbc.writeMem(0xb2b9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x662e);
        EXPECT(gbc.pc(), 0xb2ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2b9), 0x3f);
        // 3F 0070
        gbc.setState(0x19d0, 0x9cc9, 0x8290, 0xa326, 0x7168, 0x1704, 0x1, 0x1);
        gbc.writeMem(0x19d0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9cc9);
        EXPECT(gbc.pc(), 0x19d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0071
        gbc.setState(0xe83c, 0x749e, 0x9b90, 0x2947, 0x2c91, 0x3634, 0x0, 0x1);
        gbc.writeMem(0xe83c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x749e);
        EXPECT(gbc.pc(), 0xe83d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe83c), 0x3f);
        // 3F 0072
        gbc.setState(0xa37c, 0x6a49, 0x40d0, 0x4a76, 0x571, 0x5b10, 0x0, 0x0);
        gbc.writeMem(0xa37c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6a49);
        EXPECT(gbc.pc(), 0xa37d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa37c), 0x3f);
        // 3F 0073
        gbc.setState(0xe615, 0x3ea4, 0x3eb0, 0x108e, 0xa28c, 0x8e19, 0x1, 0x0);
        gbc.writeMem(0xe615, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3ea4);
        EXPECT(gbc.pc(), 0xe616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe615), 0x3f);
        // 3F 0074
        gbc.setState(0x455c, 0x3b77, 0xf090, 0x7cd4, 0x20d1, 0x1471, 0x0, 0x1);
        gbc.writeMem(0x455c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3b77);
        EXPECT(gbc.pc(), 0x455d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0075
        gbc.setState(0x2c1c, 0xc454, 0x4d80, 0x5719, 0xecff, 0x2ad9, 0x1, 0x1);
        gbc.writeMem(0x2c1c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc454);
        EXPECT(gbc.pc(), 0x2c1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0076
        gbc.setState(0x70b4, 0x7855, 0xb610, 0xab5, 0xc56e, 0xa96c, 0x0, 0x0);
        gbc.writeMem(0x70b4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7855);
        EXPECT(gbc.pc(), 0x70b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0077
        gbc.setState(0x55a3, 0x6519, 0xbb80, 0x8383, 0xace7, 0xcb94, 0x1, 0x1);
        gbc.writeMem(0x55a3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6519);
        EXPECT(gbc.pc(), 0x55a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0078
        gbc.setState(0x7d94, 0xfd7c, 0x7ce0, 0xc633, 0xed52, 0x2cb7, 0x1, 0x1);
        gbc.writeMem(0x7d94, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xfd7c);
        EXPECT(gbc.pc(), 0x7d95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0079
        gbc.setState(0x66b7, 0x3d94, 0x8f80, 0xb3d0, 0xadbb, 0xd81e, 0x1, 0x1);
        gbc.writeMem(0x66b7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3d94);
        EXPECT(gbc.pc(), 0x66b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 007A
        gbc.setState(0xdc37, 0xed50, 0x7fa0, 0x96b6, 0xc530, 0x1f46, 0x0, 0x1);
        gbc.writeMem(0xdc37, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xed50);
        EXPECT(gbc.pc(), 0xdc38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc37), 0x3f);
        // 3F 007B
        gbc.setState(0x856f, 0x939, 0x4860, 0xea61, 0x4450, 0xf41a, 0x1, 0x0);
        gbc.writeMem(0x856f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x939);
        EXPECT(gbc.pc(), 0x8570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x856f), 0x3f);
        // 3F 007C
        gbc.setState(0x22f2, 0x5a33, 0x7040, 0x5705, 0x57b2, 0x7a1c, 0x0, 0x0);
        gbc.writeMem(0x22f2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5a33);
        EXPECT(gbc.pc(), 0x22f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 007D
        gbc.setState(0x571d, 0xc428, 0xce30, 0xd426, 0xc68c, 0x1e71, 0x1, 0x1);
        gbc.writeMem(0x571d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc428);
        EXPECT(gbc.pc(), 0x571e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 007E
        gbc.setState(0x8f1f, 0x9ef7, 0x3d20, 0xf864, 0x7eeb, 0x25f3, 0x1, 0x0);
        gbc.writeMem(0x8f1f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9ef7);
        EXPECT(gbc.pc(), 0x8f20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f1f), 0x3f);
        // 3F 007F
        gbc.setState(0x81cc, 0xe2fe, 0x88a0, 0xfde8, 0x5885, 0x88d6, 0x1, 0x0);
        gbc.writeMem(0x81cc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe2fe);
        EXPECT(gbc.pc(), 0x81cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81cc), 0x3f);
        // 3F 0080
        gbc.setState(0x9801, 0x361a, 0x9210, 0xb5e6, 0xcfe8, 0x786, 0x1, 0x1);
        gbc.writeMem(0x9801, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x361a);
        EXPECT(gbc.pc(), 0x9802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9801), 0x3f);
        // 3F 0081
        gbc.setState(0x8e99, 0xe71b, 0x6f70, 0x53a0, 0xa1a7, 0x32a4, 0x1, 0x0);
        gbc.writeMem(0x8e99, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe71b);
        EXPECT(gbc.pc(), 0x8e9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e99), 0x3f);
        // 3F 0082
        gbc.setState(0x3e06, 0x3d1f, 0x8130, 0x1884, 0x4223, 0xa8f0, 0x1, 0x0);
        gbc.writeMem(0x3e06, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3d1f);
        EXPECT(gbc.pc(), 0x3e07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0083
        gbc.setState(0xc484, 0xb9d7, 0xf470, 0x8bac, 0x986c, 0x8d46, 0x0, 0x0);
        gbc.writeMem(0xc484, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb9d7);
        EXPECT(gbc.pc(), 0xc485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc484), 0x3f);
        // 3F 0084
        gbc.setState(0x3a4d, 0x496, 0x5da0, 0x81bf, 0xe518, 0x3ce7, 0x1, 0x0);
        gbc.writeMem(0x3a4d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x496);
        EXPECT(gbc.pc(), 0x3a4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0085
        gbc.setState(0x1584, 0xecfd, 0x5e0, 0x6f76, 0xd4fc, 0xa02c, 0x1, 0x1);
        gbc.writeMem(0x1584, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xecfd);
        EXPECT(gbc.pc(), 0x1585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0086
        gbc.setState(0xcf96, 0x3f82, 0xf850, 0x99f9, 0xe472, 0x2e09, 0x0, 0x0);
        gbc.writeMem(0xcf96, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3f82);
        EXPECT(gbc.pc(), 0xcf97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf96), 0x3f);
        // 3F 0087
        gbc.setState(0xbd34, 0x87be, 0x7700, 0x49ee, 0x19e7, 0xfc60, 0x1, 0x0);
        gbc.writeMem(0xbd34, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x87be);
        EXPECT(gbc.pc(), 0xbd35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd34), 0x3f);
        // 3F 0088
        gbc.setState(0xe8cb, 0x765, 0xb290, 0x3b3a, 0xe70f, 0xe357, 0x0, 0x0);
        gbc.writeMem(0xe8cb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x765);
        EXPECT(gbc.pc(), 0xe8cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8cb), 0x3f);
        // 3F 0089
        gbc.setState(0x10b1, 0xbe47, 0xc720, 0x8552, 0x9bf1, 0xcfbb, 0x1, 0x0);
        gbc.writeMem(0x10b1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbe47);
        EXPECT(gbc.pc(), 0x10b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 008A
        gbc.setState(0x13c4, 0xc462, 0x6b30, 0xf262, 0x71c6, 0x644a, 0x1, 0x0);
        gbc.writeMem(0x13c4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc462);
        EXPECT(gbc.pc(), 0x13c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 008B
        gbc.setState(0x8b2f, 0x7490, 0x4000, 0xc6b, 0x2f47, 0x8032, 0x1, 0x1);
        gbc.writeMem(0x8b2f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7490);
        EXPECT(gbc.pc(), 0x8b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b2f), 0x3f);
        // 3F 008C
        gbc.setState(0x79ff, 0xfaf3, 0xfcb0, 0x9ece, 0xea4e, 0xd34d, 0x1, 0x0);
        gbc.writeMem(0x79ff, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfaf3);
        EXPECT(gbc.pc(), 0x7a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 008D
        gbc.setState(0x4d84, 0x5ee2, 0x72c0, 0xfd0d, 0x9699, 0x1336, 0x1, 0x1);
        gbc.writeMem(0x4d84, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5ee2);
        EXPECT(gbc.pc(), 0x4d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 008E
        gbc.setState(0x3ed5, 0x29cc, 0x8260, 0x454f, 0xe8b8, 0x57e8, 0x0, 0x0);
        gbc.writeMem(0x3ed5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x29cc);
        EXPECT(gbc.pc(), 0x3ed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 008F
        gbc.setState(0xc93a, 0x4bd2, 0x4250, 0x79d5, 0xe1f2, 0x1b06, 0x1, 0x1);
        gbc.writeMem(0xc93a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4bd2);
        EXPECT(gbc.pc(), 0xc93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc93a), 0x3f);
        // 3F 0090
        gbc.setState(0x5f6, 0xcb1, 0xcf90, 0x5059, 0x6cd1, 0x775f, 0x1, 0x0);
        gbc.writeMem(0x5f6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xcb1);
        EXPECT(gbc.pc(), 0x5f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0091
        gbc.setState(0xdd94, 0x7772, 0xf9b0, 0xb579, 0xcb8e, 0xeae1, 0x1, 0x0);
        gbc.writeMem(0xdd94, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7772);
        EXPECT(gbc.pc(), 0xdd95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd94), 0x3f);
        // 3F 0092
        gbc.setState(0x8359, 0x490e, 0xd70, 0x5bbb, 0x9e3b, 0xa470, 0x0, 0x0);
        gbc.writeMem(0x8359, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x490e);
        EXPECT(gbc.pc(), 0x835a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8359), 0x3f);
        // 3F 0093
        gbc.setState(0xea9a, 0x1a15, 0x53c0, 0xa9fd, 0xb458, 0xc0a0, 0x0, 0x0);
        gbc.writeMem(0xea9a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1a15);
        EXPECT(gbc.pc(), 0xea9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea9a), 0x3f);
        // 3F 0094
        gbc.setState(0x9ea4, 0x9107, 0x62c0, 0x1d6, 0xc01d, 0x1f18, 0x0, 0x0);
        gbc.writeMem(0x9ea4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9107);
        EXPECT(gbc.pc(), 0x9ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ea4), 0x3f);
        // 3F 0095
        gbc.setState(0x1c60, 0xaa96, 0xf870, 0x7583, 0x5190, 0x8a52, 0x0, 0x0);
        gbc.writeMem(0x1c60, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xaa96);
        EXPECT(gbc.pc(), 0x1c61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0096
        gbc.setState(0x1178, 0x6cf6, 0x69e0, 0x8c9e, 0x78c3, 0xb3ed, 0x1, 0x0);
        gbc.writeMem(0x1178, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6cf6);
        EXPECT(gbc.pc(), 0x1179);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0097
        gbc.setState(0x8a54, 0x59b2, 0xb540, 0xb372, 0x33ab, 0xcc52, 0x0, 0x1);
        gbc.writeMem(0x8a54, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x59b2);
        EXPECT(gbc.pc(), 0x8a55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a54), 0x3f);
        // 3F 0098
        gbc.setState(0x2dea, 0x7ed8, 0x4590, 0xec1a, 0x7a12, 0x8fe6, 0x0, 0x1);
        gbc.writeMem(0x2dea, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7ed8);
        EXPECT(gbc.pc(), 0x2deb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0099
        gbc.setState(0x43c9, 0x22c, 0xb000, 0xbcc7, 0xff37, 0xd7fb, 0x0, 0x0);
        gbc.writeMem(0x43c9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x22c);
        EXPECT(gbc.pc(), 0x43ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 009A
        gbc.setState(0x137e, 0x14e4, 0x16f0, 0x9f43, 0x5b35, 0x3aeb, 0x1, 0x1);
        gbc.writeMem(0x137e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x14e4);
        EXPECT(gbc.pc(), 0x137f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 009B
        gbc.setState(0x489b, 0x5107, 0xb4f0, 0x33d, 0xe9c3, 0xdc17, 0x1, 0x1);
        gbc.writeMem(0x489b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5107);
        EXPECT(gbc.pc(), 0x489c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 009C
        gbc.setState(0xbe8, 0x8892, 0xba10, 0x24e7, 0xfa88, 0xbc32, 0x0, 0x1);
        gbc.writeMem(0xbe8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8892);
        EXPECT(gbc.pc(), 0xbe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 009D
        gbc.setState(0x7a31, 0xc1be, 0x8fc0, 0xbda7, 0x6d65, 0x495b, 0x1, 0x0);
        gbc.writeMem(0x7a31, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc1be);
        EXPECT(gbc.pc(), 0x7a32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 009E
        gbc.setState(0x42e7, 0x8e3d, 0xf2d0, 0x418c, 0xb4, 0x2057, 0x1, 0x1);
        gbc.writeMem(0x42e7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8e3d);
        EXPECT(gbc.pc(), 0x42e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 009F
        gbc.setState(0xe155, 0x9e85, 0xa490, 0x7785, 0xbfde, 0x8a9a, 0x0, 0x0);
        gbc.writeMem(0xe155, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9e85);
        EXPECT(gbc.pc(), 0xe156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe155), 0x3f);
        // 3F 00A0
        gbc.setState(0xbc8d, 0xbceb, 0x7360, 0x7dc4, 0xf521, 0xbb99, 0x1, 0x1);
        gbc.writeMem(0xbc8d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbceb);
        EXPECT(gbc.pc(), 0xbc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc8d), 0x3f);
        // 3F 00A1
        gbc.setState(0xdf2, 0x70fc, 0xd7b0, 0x6c9f, 0xbbcb, 0x51a0, 0x0, 0x1);
        gbc.writeMem(0xdf2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x70fc);
        EXPECT(gbc.pc(), 0xdf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00A3
        gbc.setState(0x1d29, 0xd6ba, 0x3ae0, 0xa28a, 0x3b22, 0xe3c8, 0x1, 0x1);
        gbc.writeMem(0x1d29, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd6ba);
        EXPECT(gbc.pc(), 0x1d2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00A4
        gbc.setState(0x4d90, 0xf96c, 0xd340, 0x2987, 0xa896, 0x8b95, 0x0, 0x1);
        gbc.writeMem(0x4d90, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf96c);
        EXPECT(gbc.pc(), 0x4d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00A5
        gbc.setState(0xeff4, 0x1cc0, 0x99f0, 0xb0ad, 0xef2e, 0x22cb, 0x0, 0x0);
        gbc.writeMem(0xeff4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1cc0);
        EXPECT(gbc.pc(), 0xeff5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff4), 0x3f);
        // 3F 00A6
        gbc.setState(0x7e54, 0xc3c1, 0xd730, 0xc63f, 0x4b53, 0x8b16, 0x1, 0x0);
        gbc.writeMem(0x7e54, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc3c1);
        EXPECT(gbc.pc(), 0x7e55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00A7
        gbc.setState(0xaff5, 0x21e3, 0x6200, 0xfd65, 0x7000, 0x766b, 0x0, 0x1);
        gbc.writeMem(0xaff5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x21e3);
        EXPECT(gbc.pc(), 0xaff6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaff5), 0x3f);
        // 3F 00A8
        gbc.setState(0xa681, 0xedd1, 0x27c0, 0x9767, 0x3e8, 0x1fcd, 0x1, 0x0);
        gbc.writeMem(0xa681, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xedd1);
        EXPECT(gbc.pc(), 0xa682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa681), 0x3f);
        // 3F 00A9
        gbc.setState(0x1b5, 0x7ed, 0x5550, 0x6fc0, 0xd9ef, 0xa464, 0x0, 0x0);
        gbc.writeMem(0x1b5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7ed);
        EXPECT(gbc.pc(), 0x1b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00AA
        gbc.setState(0x77bd, 0x5ead, 0xfe10, 0x40c, 0x11d7, 0x6be0, 0x0, 0x0);
        gbc.writeMem(0x77bd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5ead);
        EXPECT(gbc.pc(), 0x77be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00AB
        gbc.setState(0x88c3, 0x330b, 0x7590, 0x1ab, 0x7093, 0x70bf, 0x1, 0x1);
        gbc.writeMem(0x88c3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x330b);
        EXPECT(gbc.pc(), 0x88c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88c3), 0x3f);
        // 3F 00AC
        gbc.setState(0x51e7, 0xa15e, 0x5670, 0x5835, 0x72ea, 0xef00, 0x1, 0x0);
        gbc.writeMem(0x51e7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa15e);
        EXPECT(gbc.pc(), 0x51e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00AD
        gbc.setState(0x742b, 0x308b, 0xa40, 0x4f9d, 0x2226, 0xcda6, 0x0, 0x1);
        gbc.writeMem(0x742b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x308b);
        EXPECT(gbc.pc(), 0x742c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00AE
        gbc.setState(0x8b9, 0x9b00, 0xc60, 0x7533, 0xaed3, 0x17fe, 0x1, 0x0);
        gbc.writeMem(0x8b9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9b00);
        EXPECT(gbc.pc(), 0x8ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00AF
        gbc.setState(0x2216, 0xa99c, 0x1ed0, 0xa828, 0x2805, 0x600, 0x1, 0x1);
        gbc.writeMem(0x2216, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa99c);
        EXPECT(gbc.pc(), 0x2217);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00B0
        gbc.setState(0x7a3, 0xabbd, 0x9920, 0xc416, 0xa315, 0xf49e, 0x0, 0x0);
        gbc.writeMem(0x7a3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xabbd);
        EXPECT(gbc.pc(), 0x7a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00B1
        gbc.setState(0x517e, 0xe4af, 0xb0b0, 0x68c7, 0x8522, 0xf721, 0x0, 0x0);
        gbc.writeMem(0x517e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe4af);
        EXPECT(gbc.pc(), 0x517f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00B2
        gbc.setState(0x510c, 0x7c8f, 0x6350, 0x378e, 0xca53, 0x8ab8, 0x1, 0x1);
        gbc.writeMem(0x510c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7c8f);
        EXPECT(gbc.pc(), 0x510d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00B3
        gbc.setState(0x77fa, 0x3ea0, 0x1d60, 0xdb25, 0xa778, 0x13fc, 0x1, 0x0);
        gbc.writeMem(0x77fa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3ea0);
        EXPECT(gbc.pc(), 0x77fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00B4
        gbc.setState(0x74c2, 0xadfe, 0x7cc0, 0xc4c7, 0x2d7e, 0xf3f0, 0x0, 0x1);
        gbc.writeMem(0x74c2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xadfe);
        EXPECT(gbc.pc(), 0x74c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00B5
        gbc.setState(0x5df8, 0x8d16, 0x3a60, 0x144b, 0x2d5, 0x6d3, 0x0, 0x0);
        gbc.writeMem(0x5df8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8d16);
        EXPECT(gbc.pc(), 0x5df9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00B6
        gbc.setState(0xd8c0, 0xc77, 0xc60, 0x883c, 0xe619, 0xdac6, 0x1, 0x1);
        gbc.writeMem(0xd8c0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc77);
        EXPECT(gbc.pc(), 0xd8c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8c0), 0x3f);
        // 3F 00B7
        gbc.setState(0x8c38, 0x351f, 0xc430, 0x4cfa, 0xa236, 0x4c92, 0x0, 0x1);
        gbc.writeMem(0x8c38, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x351f);
        EXPECT(gbc.pc(), 0x8c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c38), 0x3f);
        // 3F 00B8
        gbc.setState(0x2869, 0x2c72, 0x1eb0, 0x90f9, 0x8732, 0x9542, 0x1, 0x1);
        gbc.writeMem(0x2869, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2c72);
        EXPECT(gbc.pc(), 0x286a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00B9
        gbc.setState(0x86b5, 0xfd0c, 0x59e0, 0xb7be, 0x60fa, 0x7258, 0x0, 0x0);
        gbc.writeMem(0x86b5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xfd0c);
        EXPECT(gbc.pc(), 0x86b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86b5), 0x3f);
        // 3F 00BA
        gbc.setState(0x7134, 0xf40e, 0x2000, 0x7c6d, 0xb512, 0x7151, 0x1, 0x1);
        gbc.writeMem(0x7134, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf40e);
        EXPECT(gbc.pc(), 0x7135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00BB
        gbc.setState(0xac71, 0x6102, 0xc2d0, 0x7312, 0x25b7, 0x836a, 0x1, 0x1);
        gbc.writeMem(0xac71, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6102);
        EXPECT(gbc.pc(), 0xac72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac71), 0x3f);
        // 3F 00BC
        gbc.setState(0x778a, 0x623b, 0x3290, 0x4205, 0x93ef, 0x790e, 0x1, 0x1);
        gbc.writeMem(0x778a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x623b);
        EXPECT(gbc.pc(), 0x778b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00BD
        gbc.setState(0x7b7d, 0xdd4e, 0x2ac0, 0xa181, 0x50ed, 0xa8a1, 0x0, 0x0);
        gbc.writeMem(0x7b7d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xdd4e);
        EXPECT(gbc.pc(), 0x7b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00BE
        gbc.setState(0x3746, 0x8a93, 0x750, 0xfed7, 0x1e86, 0x71b8, 0x1, 0x0);
        gbc.writeMem(0x3746, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8a93);
        EXPECT(gbc.pc(), 0x3747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00BF
        gbc.setState(0x75ac, 0xfb90, 0x46f0, 0x3f36, 0xfea8, 0x34d2, 0x0, 0x0);
        gbc.writeMem(0x75ac, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xfb90);
        EXPECT(gbc.pc(), 0x75ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00C0
        gbc.setState(0x1359, 0x81c, 0x7ed0, 0x3636, 0x757, 0xa5e8, 0x1, 0x0);
        gbc.writeMem(0x1359, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x81c);
        EXPECT(gbc.pc(), 0x135a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00C1
        gbc.setState(0x30ac, 0x9d26, 0x76a0, 0xebc0, 0x72b7, 0x364f, 0x0, 0x1);
        gbc.writeMem(0x30ac, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9d26);
        EXPECT(gbc.pc(), 0x30ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00C2
        gbc.setState(0xc84d, 0x7fd3, 0xd6d0, 0xddac, 0x33ca, 0x6a22, 0x0, 0x0);
        gbc.writeMem(0xc84d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7fd3);
        EXPECT(gbc.pc(), 0xc84e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc84d), 0x3f);
        // 3F 00C3
        gbc.setState(0xc8e4, 0x38a3, 0x4850, 0x55fb, 0xc198, 0xc740, 0x1, 0x1);
        gbc.writeMem(0xc8e4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x38a3);
        EXPECT(gbc.pc(), 0xc8e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e4), 0x3f);
        // 3F 00C4
        gbc.setState(0x5e89, 0xfa94, 0x6e20, 0xa9de, 0xb7d0, 0x9b9d, 0x0, 0x1);
        gbc.writeMem(0x5e89, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xfa94);
        EXPECT(gbc.pc(), 0x5e8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00C5
        gbc.setState(0xb793, 0x10dc, 0x5bf0, 0xb7c9, 0x1401, 0x6455, 0x1, 0x1);
        gbc.writeMem(0xb793, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x10dc);
        EXPECT(gbc.pc(), 0xb794);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb793), 0x3f);
        // 3F 00C6
        gbc.setState(0x4ab9, 0x594d, 0xd290, 0x63e1, 0xef69, 0x892, 0x1, 0x0);
        gbc.writeMem(0x4ab9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x594d);
        EXPECT(gbc.pc(), 0x4aba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00C8
        gbc.setState(0x78b8, 0x49bc, 0x7df0, 0xa545, 0x49a, 0xcc3f, 0x1, 0x0);
        gbc.writeMem(0x78b8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x49bc);
        EXPECT(gbc.pc(), 0x78b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00C9
        gbc.setState(0x9bf9, 0x8981, 0xa9c0, 0x337e, 0x3591, 0xbbf0, 0x1, 0x0);
        gbc.writeMem(0x9bf9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8981);
        EXPECT(gbc.pc(), 0x9bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bf9), 0x3f);
        // 3F 00CA
        gbc.setState(0xac72, 0xff78, 0x6500, 0xf3e3, 0x5d0f, 0xa23, 0x1, 0x1);
        gbc.writeMem(0xac72, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xff78);
        EXPECT(gbc.pc(), 0xac73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac72), 0x3f);
        // 3F 00CB
        gbc.setState(0xdd32, 0xd81f, 0xd4a0, 0x7295, 0x5655, 0x7166, 0x0, 0x0);
        gbc.writeMem(0xdd32, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd81f);
        EXPECT(gbc.pc(), 0xdd33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd32), 0x3f);
        // 3F 00CC
        gbc.setState(0xa654, 0x700e, 0x31a0, 0x5308, 0x8a96, 0xf856, 0x0, 0x0);
        gbc.writeMem(0xa654, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x700e);
        EXPECT(gbc.pc(), 0xa655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa654), 0x3f);
        // 3F 00CD
        gbc.setState(0xc15, 0xed94, 0x5f10, 0xd157, 0x2462, 0xa81, 0x0, 0x1);
        gbc.writeMem(0xc15, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xed94);
        EXPECT(gbc.pc(), 0xc16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00CE
        gbc.setState(0xd0b1, 0x5c2b, 0x1e20, 0xec58, 0xd73c, 0xc8c8, 0x0, 0x0);
        gbc.writeMem(0xd0b1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5c2b);
        EXPECT(gbc.pc(), 0xd0b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0b1), 0x3f);
        // 3F 00CF
        gbc.setState(0x362d, 0xcc38, 0xfcd0, 0x4840, 0x945c, 0xf640, 0x0, 0x0);
        gbc.writeMem(0x362d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xcc38);
        EXPECT(gbc.pc(), 0x362e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00D0
        gbc.setState(0xe28a, 0x8d7, 0x3b90, 0x262a, 0xa117, 0x14aa, 0x0, 0x1);
        gbc.writeMem(0xe28a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8d7);
        EXPECT(gbc.pc(), 0xe28b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe28a), 0x3f);
        // 3F 00D1
        gbc.setState(0x8396, 0x2806, 0x7b70, 0xa5e8, 0x5bf6, 0x84af, 0x1, 0x1);
        gbc.writeMem(0x8396, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2806);
        EXPECT(gbc.pc(), 0x8397);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8396), 0x3f);
        // 3F 00D2
        gbc.setState(0xcb86, 0x7f26, 0x4990, 0x201a, 0xaa7c, 0xe0c, 0x0, 0x0);
        gbc.writeMem(0xcb86, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7f26);
        EXPECT(gbc.pc(), 0xcb87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb86), 0x3f);
        // 3F 00D3
        gbc.setState(0x2db7, 0xf1a8, 0xed00, 0x2066, 0x5772, 0x9ffb, 0x1, 0x1);
        gbc.writeMem(0x2db7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf1a8);
        EXPECT(gbc.pc(), 0x2db8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00D4
        gbc.setState(0x9302, 0xfa35, 0x1e40, 0xee9c, 0x60e6, 0x5dff, 0x1, 0x0);
        gbc.writeMem(0x9302, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfa35);
        EXPECT(gbc.pc(), 0x9303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9302), 0x3f);
        // 3F 00D6
        gbc.setState(0x8d22, 0x454a, 0xb340, 0x80d8, 0x28cc, 0xfd73, 0x1, 0x1);
        gbc.writeMem(0x8d22, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x454a);
        EXPECT(gbc.pc(), 0x8d23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d22), 0x3f);
        // 3F 00D7
        gbc.setState(0x7d1d, 0xe753, 0x2d40, 0x46d4, 0x50b8, 0xdad8, 0x1, 0x1);
        gbc.writeMem(0x7d1d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe753);
        EXPECT(gbc.pc(), 0x7d1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00D8
        gbc.setState(0x29db, 0x4242, 0x8be0, 0xc907, 0xaca4, 0x9057, 0x0, 0x1);
        gbc.writeMem(0x29db, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4242);
        EXPECT(gbc.pc(), 0x29dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00D9
        gbc.setState(0x8e65, 0x94f4, 0xd790, 0xffa7, 0xf918, 0x9ff, 0x0, 0x0);
        gbc.writeMem(0x8e65, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x94f4);
        EXPECT(gbc.pc(), 0x8e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e65), 0x3f);
        // 3F 00DA
        gbc.setState(0x8155, 0x4541, 0x98c0, 0x2a45, 0x148, 0x9b10, 0x0, 0x1);
        gbc.writeMem(0x8155, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4541);
        EXPECT(gbc.pc(), 0x8156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8155), 0x3f);
        // 3F 00DB
        gbc.setState(0x9eb1, 0xd4, 0xfc30, 0xbc39, 0x78, 0x5d65, 0x0, 0x1);
        gbc.writeMem(0x9eb1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd4);
        EXPECT(gbc.pc(), 0x9eb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb1), 0x3f);
        // 3F 00DC
        gbc.setState(0xb3c8, 0xb9a6, 0x42a0, 0xdd58, 0xbc9c, 0x2d12, 0x1, 0x1);
        gbc.writeMem(0xb3c8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb9a6);
        EXPECT(gbc.pc(), 0xb3c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c8), 0x3f);
        // 3F 00DD
        gbc.setState(0x1ae8, 0x970b, 0x3c20, 0x62cf, 0xd1bc, 0x6163, 0x1, 0x1);
        gbc.writeMem(0x1ae8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x970b);
        EXPECT(gbc.pc(), 0x1ae9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00DE
        gbc.setState(0x6ce8, 0xc994, 0x1cb0, 0x3289, 0xa07a, 0xe3c, 0x1, 0x0);
        gbc.writeMem(0x6ce8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc994);
        EXPECT(gbc.pc(), 0x6ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00DF
        gbc.setState(0x1bc0, 0x4a44, 0xc020, 0xa875, 0x7365, 0x3519, 0x0, 0x0);
        gbc.writeMem(0x1bc0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4a44);
        EXPECT(gbc.pc(), 0x1bc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00E0
        gbc.setState(0x8383, 0xfdfe, 0xcfd0, 0x3412, 0x5763, 0xad88, 0x0, 0x1);
        gbc.writeMem(0x8383, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xfdfe);
        EXPECT(gbc.pc(), 0x8384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8383), 0x3f);
        // 3F 00E1
        gbc.setState(0x9554, 0x7191, 0x6370, 0xb43f, 0xcf54, 0xa909, 0x1, 0x0);
        gbc.writeMem(0x9554, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7191);
        EXPECT(gbc.pc(), 0x9555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9554), 0x3f);
        // 3F 00E2
        gbc.setState(0xae1c, 0x3036, 0x8da0, 0x362b, 0xdc63, 0x66e1, 0x0, 0x1);
        gbc.writeMem(0xae1c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3036);
        EXPECT(gbc.pc(), 0xae1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae1c), 0x3f);
        // 3F 00E3
        gbc.setState(0x62d, 0x20aa, 0x3550, 0xb3, 0xb953, 0x6a97, 0x1, 0x0);
        gbc.writeMem(0x62d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x20aa);
        EXPECT(gbc.pc(), 0x62e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00E4
        gbc.setState(0xeb1c, 0x50b7, 0x17e0, 0xddd2, 0xfaf7, 0x9344, 0x0, 0x0);
        gbc.writeMem(0xeb1c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x50b7);
        EXPECT(gbc.pc(), 0xeb1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb1c), 0x3f);
        // 3F 00E5
        gbc.setState(0x4867, 0xb772, 0xdf30, 0x8cfb, 0x2627, 0xa7d0, 0x0, 0x0);
        gbc.writeMem(0x4867, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb772);
        EXPECT(gbc.pc(), 0x4868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00E6
        gbc.setState(0xd6ca, 0x66d2, 0x5960, 0xbef4, 0x18fd, 0xa870, 0x0, 0x1);
        gbc.writeMem(0xd6ca, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x66d2);
        EXPECT(gbc.pc(), 0xd6cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ca), 0x3f);
        // 3F 00E7
        gbc.setState(0x1cb0, 0x4cfd, 0xbcf0, 0x54e7, 0x14df, 0xbf41, 0x1, 0x1);
        gbc.writeMem(0x1cb0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4cfd);
        EXPECT(gbc.pc(), 0x1cb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00E8
        gbc.setState(0xaf8f, 0xcfd7, 0xeb10, 0x90fb, 0xfc27, 0x7b3, 0x1, 0x1);
        gbc.writeMem(0xaf8f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xcfd7);
        EXPECT(gbc.pc(), 0xaf90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf8f), 0x3f);
        // 3F 00EA
        gbc.setState(0xc4b7, 0x9da0, 0x9fb0, 0x7f46, 0xdd23, 0x197f, 0x0, 0x0);
        gbc.writeMem(0xc4b7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9da0);
        EXPECT(gbc.pc(), 0xc4b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b7), 0x3f);
        // 3F 00EB
        gbc.setState(0xdb08, 0x423, 0x2a0, 0x1188, 0x8b76, 0xfdc6, 0x0, 0x1);
        gbc.writeMem(0xdb08, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x423);
        EXPECT(gbc.pc(), 0xdb09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb08), 0x3f);
        // 3F 00ED
        gbc.setState(0x72e, 0x1b90, 0x71a0, 0x10ec, 0x8a8c, 0xc21f, 0x1, 0x1);
        gbc.writeMem(0x72e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x1b90);
        EXPECT(gbc.pc(), 0x72f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00EE
        gbc.setState(0x9839, 0x9dd6, 0x31e0, 0x1881, 0xd267, 0x4eb, 0x1, 0x1);
        gbc.writeMem(0x9839, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9dd6);
        EXPECT(gbc.pc(), 0x983a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9839), 0x3f);
        // 3F 00EF
        gbc.setState(0xc2eb, 0xb5b5, 0x2250, 0xfd7d, 0x3568, 0xc36b, 0x1, 0x1);
        gbc.writeMem(0xc2eb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb5b5);
        EXPECT(gbc.pc(), 0xc2ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2eb), 0x3f);
        // 3F 00F0
        gbc.setState(0xeaed, 0x2c31, 0x28d0, 0x7d1c, 0xacd6, 0xe5b1, 0x1, 0x0);
        gbc.writeMem(0xeaed, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2c31);
        EXPECT(gbc.pc(), 0xeaee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaed), 0x3f);
        // 3F 00F1
        gbc.setState(0x2fa3, 0x2ecd, 0x8d00, 0xbdec, 0xac87, 0x72b0, 0x0, 0x0);
        gbc.writeMem(0x2fa3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2ecd);
        EXPECT(gbc.pc(), 0x2fa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00F2
        gbc.setState(0x94d4, 0x6fe5, 0x3110, 0x27f2, 0x3351, 0x2c71, 0x1, 0x0);
        gbc.writeMem(0x94d4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6fe5);
        EXPECT(gbc.pc(), 0x94d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d4), 0x3f);
        // 3F 00F3
        gbc.setState(0xe826, 0xf475, 0x7f10, 0xbd0e, 0x3609, 0x8c07, 0x1, 0x0);
        gbc.writeMem(0xe826, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf475);
        EXPECT(gbc.pc(), 0xe827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe826), 0x3f);
        // 3F 00F4
        gbc.setState(0x8924, 0xa4f3, 0x63c0, 0xc620, 0x27cf, 0x1d34, 0x1, 0x1);
        gbc.writeMem(0x8924, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa4f3);
        EXPECT(gbc.pc(), 0x8925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8924), 0x3f);
        // 3F 00F5
        gbc.setState(0x1470, 0xd4b9, 0x67f0, 0x7327, 0x953b, 0x80ae, 0x0, 0x0);
        gbc.writeMem(0x1470, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd4b9);
        EXPECT(gbc.pc(), 0x1471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00F6
        gbc.setState(0x465d, 0xf25b, 0xcb20, 0xb269, 0x9cc0, 0x3dd1, 0x1, 0x1);
        gbc.writeMem(0x465d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf25b);
        EXPECT(gbc.pc(), 0x465e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00F7
        gbc.setState(0xb9e6, 0xe9dc, 0x1d90, 0x13dd, 0xac55, 0x3dd4, 0x0, 0x1);
        gbc.writeMem(0xb9e6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe9dc);
        EXPECT(gbc.pc(), 0xb9e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9e6), 0x3f);
        // 3F 00F8
        gbc.setState(0xcac8, 0xd4b, 0xd2a0, 0x346b, 0x7d8d, 0xc7ad, 0x0, 0x0);
        gbc.writeMem(0xcac8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd4b);
        EXPECT(gbc.pc(), 0xcac9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcac8), 0x3f);
        // 3F 00F9
        gbc.setState(0x57cc, 0x11ea, 0xb580, 0xcce7, 0x100d, 0x9a0, 0x0, 0x0);
        gbc.writeMem(0x57cc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x11ea);
        EXPECT(gbc.pc(), 0x57cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00FA
        gbc.setState(0x729b, 0x2c0c, 0x2c80, 0x3c48, 0x7a2, 0x1669, 0x0, 0x0);
        gbc.writeMem(0x729b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2c0c);
        EXPECT(gbc.pc(), 0x729c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00FB
        gbc.setState(0x69ab, 0xd255, 0x1f10, 0x73a5, 0x1a8e, 0x7416, 0x1, 0x0);
        gbc.writeMem(0x69ab, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd255);
        EXPECT(gbc.pc(), 0x69ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00FC
        gbc.setState(0x6821, 0xdaf8, 0x290, 0x7e23, 0x84f0, 0xaf48, 0x1, 0x1);
        gbc.writeMem(0x6821, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdaf8);
        EXPECT(gbc.pc(), 0x6822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 00FD
        gbc.setState(0x573d, 0xfd05, 0xd3a0, 0x55b9, 0x5b91, 0xcc7f, 0x0, 0x0);
        gbc.writeMem(0x573d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xfd05);
        EXPECT(gbc.pc(), 0x573e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00FE
        gbc.setState(0x180c, 0xa628, 0x7080, 0xcc6a, 0x506e, 0xbb5f, 0x0, 0x1);
        gbc.writeMem(0x180c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa628);
        EXPECT(gbc.pc(), 0x180d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 00FF
        gbc.setState(0x5486, 0x97ec, 0xe730, 0x878e, 0x2778, 0xfb1, 0x1, 0x0);
        gbc.writeMem(0x5486, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x97ec);
        EXPECT(gbc.pc(), 0x5487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0100
        gbc.setState(0x997, 0xeaa1, 0xf9e0, 0x7fed, 0x7a3d, 0xe472, 0x1, 0x0);
        gbc.writeMem(0x997, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xeaa1);
        EXPECT(gbc.pc(), 0x998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0101
        gbc.setState(0x3bbb, 0x9c76, 0x9ad0, 0x8db7, 0x4758, 0x2ac2, 0x0, 0x1);
        gbc.writeMem(0x3bbb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9c76);
        EXPECT(gbc.pc(), 0x3bbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0103
        gbc.setState(0xee62, 0xc138, 0x60f0, 0xf19e, 0xea98, 0xc04b, 0x1, 0x0);
        gbc.writeMem(0xee62, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc138);
        EXPECT(gbc.pc(), 0xee63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee62), 0x3f);
        // 3F 0104
        gbc.setState(0xb0ad, 0x6e5a, 0xb100, 0xdbf6, 0x690, 0x4a6a, 0x1, 0x0);
        gbc.writeMem(0xb0ad, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6e5a);
        EXPECT(gbc.pc(), 0xb0ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ad), 0x3f);
        // 3F 0105
        gbc.setState(0x164, 0x9c62, 0x4000, 0x6ec7, 0x5e15, 0x2735, 0x1, 0x0);
        gbc.writeMem(0x164, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9c62);
        EXPECT(gbc.pc(), 0x165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0106
        gbc.setState(0x2460, 0xd835, 0xc870, 0xc674, 0x9c55, 0xd103, 0x1, 0x0);
        gbc.writeMem(0x2460, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd835);
        EXPECT(gbc.pc(), 0x2461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0107
        gbc.setState(0x785, 0x7ec0, 0x35f0, 0x1d8, 0xe415, 0x7a2a, 0x0, 0x1);
        gbc.writeMem(0x785, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7ec0);
        EXPECT(gbc.pc(), 0x786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0109
        gbc.setState(0xc608, 0x8ae2, 0x1620, 0x90a8, 0x5bf2, 0xde4f, 0x0, 0x1);
        gbc.writeMem(0xc608, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8ae2);
        EXPECT(gbc.pc(), 0xc609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc608), 0x3f);
        // 3F 010B
        gbc.setState(0x65e8, 0x783e, 0x3490, 0xdf7a, 0x382a, 0x70fb, 0x1, 0x0);
        gbc.writeMem(0x65e8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x783e);
        EXPECT(gbc.pc(), 0x65e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 010C
        gbc.setState(0xe10, 0xea8b, 0x1f80, 0x4c9b, 0x7f0b, 0x5286, 0x0, 0x1);
        gbc.writeMem(0xe10, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xea8b);
        EXPECT(gbc.pc(), 0xe11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 010D
        gbc.setState(0x21be, 0xe287, 0x4d40, 0xe4e6, 0xf7be, 0xf706, 0x1, 0x0);
        gbc.writeMem(0x21be, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe287);
        EXPECT(gbc.pc(), 0x21bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 010E
        gbc.setState(0x5a18, 0xe24c, 0xe010, 0xf5e5, 0xa6b7, 0x213b, 0x0, 0x1);
        gbc.writeMem(0x5a18, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe24c);
        EXPECT(gbc.pc(), 0x5a19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 010F
        gbc.setState(0x29fb, 0xcefd, 0xa960, 0xafb6, 0x18cc, 0xcca8, 0x0, 0x1);
        gbc.writeMem(0x29fb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xcefd);
        EXPECT(gbc.pc(), 0x29fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0110
        gbc.setState(0xa32a, 0x9a8b, 0xece0, 0xb4c0, 0x4160, 0xc601, 0x0, 0x1);
        gbc.writeMem(0xa32a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9a8b);
        EXPECT(gbc.pc(), 0xa32b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa32a), 0x3f);
        // 3F 0112
        gbc.setState(0x62f7, 0x633c, 0xf3b0, 0xebce, 0x9c10, 0x1f70, 0x0, 0x1);
        gbc.writeMem(0x62f7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x633c);
        EXPECT(gbc.pc(), 0x62f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0113
        gbc.setState(0x2ea1, 0x657b, 0xa780, 0xe315, 0x2145, 0xb0d3, 0x0, 0x0);
        gbc.writeMem(0x2ea1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x657b);
        EXPECT(gbc.pc(), 0x2ea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0114
        gbc.setState(0x2aa6, 0x1111, 0xaa60, 0xe5be, 0x49db, 0xcca7, 0x0, 0x1);
        gbc.writeMem(0x2aa6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1111);
        EXPECT(gbc.pc(), 0x2aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0115
        gbc.setState(0xa191, 0x59c3, 0x870, 0x83d1, 0x88b2, 0xb39a, 0x1, 0x1);
        gbc.writeMem(0xa191, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x59c3);
        EXPECT(gbc.pc(), 0xa192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa191), 0x3f);
        // 3F 0117
        gbc.setState(0xba6c, 0x93a0, 0xdb30, 0xebb0, 0xdef1, 0x47ab, 0x0, 0x0);
        gbc.writeMem(0xba6c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x93a0);
        EXPECT(gbc.pc(), 0xba6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba6c), 0x3f);
        // 3F 0118
        gbc.setState(0x9e8a, 0xf6a3, 0xc620, 0x90f, 0x6af3, 0x4458, 0x1, 0x1);
        gbc.writeMem(0x9e8a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf6a3);
        EXPECT(gbc.pc(), 0x9e8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e8a), 0x3f);
        // 3F 0119
        gbc.setState(0x6eff, 0x397, 0xa2b0, 0x3cce, 0x9939, 0xb702, 0x1, 0x0);
        gbc.writeMem(0x6eff, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x397);
        EXPECT(gbc.pc(), 0x6f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 011A
        gbc.setState(0x1e56, 0xf0bb, 0xcd70, 0x3239, 0xbdb1, 0xf2f, 0x0, 0x0);
        gbc.writeMem(0x1e56, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf0bb);
        EXPECT(gbc.pc(), 0x1e57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 011B
        gbc.setState(0xb8a2, 0x9e09, 0xcf40, 0x6630, 0xb365, 0x95c2, 0x0, 0x0);
        gbc.writeMem(0xb8a2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9e09);
        EXPECT(gbc.pc(), 0xb8a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a2), 0x3f);
        // 3F 011C
        gbc.setState(0x5ece, 0x3667, 0x7e0, 0xc412, 0x7144, 0xe22b, 0x1, 0x1);
        gbc.writeMem(0x5ece, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3667);
        EXPECT(gbc.pc(), 0x5ecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 011D
        gbc.setState(0xae05, 0x3ffc, 0x710, 0x7e37, 0xcdd6, 0x5070, 0x0, 0x0);
        gbc.writeMem(0xae05, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3ffc);
        EXPECT(gbc.pc(), 0xae06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae05), 0x3f);
        // 3F 011F
        gbc.setState(0x19d1, 0xbe0, 0x4d00, 0x5776, 0x1e7d, 0xc7b2, 0x1, 0x1);
        gbc.writeMem(0x19d1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbe0);
        EXPECT(gbc.pc(), 0x19d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0120
        gbc.setState(0x2721, 0xb5bc, 0xe3e0, 0xbcd1, 0x1471, 0xd806, 0x0, 0x1);
        gbc.writeMem(0x2721, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb5bc);
        EXPECT(gbc.pc(), 0x2722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0121
        gbc.setState(0x69a1, 0xf596, 0x2eb0, 0x6e79, 0xfc35, 0x157c, 0x0, 0x1);
        gbc.writeMem(0x69a1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf596);
        EXPECT(gbc.pc(), 0x69a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0122
        gbc.setState(0x1bbc, 0xa2c3, 0x2310, 0xb20, 0xbc04, 0x8668, 0x1, 0x0);
        gbc.writeMem(0x1bbc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa2c3);
        EXPECT(gbc.pc(), 0x1bbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0123
        gbc.setState(0x1449, 0x9729, 0x4bc0, 0x93ea, 0xa1a2, 0xc80d, 0x1, 0x0);
        gbc.writeMem(0x1449, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9729);
        EXPECT(gbc.pc(), 0x144a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0124
        gbc.setState(0x89ca, 0x5fcf, 0x4150, 0x9e8b, 0xfb7c, 0xfe6b, 0x1, 0x0);
        gbc.writeMem(0x89ca, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5fcf);
        EXPECT(gbc.pc(), 0x89cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ca), 0x3f);
        // 3F 0125
        gbc.setState(0x6389, 0xb368, 0xa420, 0xf5bb, 0x5925, 0xa622, 0x0, 0x1);
        gbc.writeMem(0x6389, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb368);
        EXPECT(gbc.pc(), 0x638a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0126
        gbc.setState(0xac19, 0xdaba, 0xddd0, 0x524a, 0x2482, 0x5d4, 0x0, 0x1);
        gbc.writeMem(0xac19, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdaba);
        EXPECT(gbc.pc(), 0xac1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac19), 0x3f);
        // 3F 0127
        gbc.setState(0x2360, 0x4dab, 0xc7c0, 0x4dd1, 0x7d2e, 0x6cf2, 0x1, 0x0);
        gbc.writeMem(0x2360, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4dab);
        EXPECT(gbc.pc(), 0x2361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0128
        gbc.setState(0xc0e, 0x1a1e, 0x2fa0, 0x9e9d, 0xdc6c, 0x34de, 0x0, 0x1);
        gbc.writeMem(0xc0e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1a1e);
        EXPECT(gbc.pc(), 0xc0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0129
        gbc.setState(0xc0a2, 0x25cb, 0x2240, 0x4b65, 0x61f5, 0xa2d1, 0x0, 0x1);
        gbc.writeMem(0xc0a2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x25cb);
        EXPECT(gbc.pc(), 0xc0a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0a2), 0x3f);
        // 3F 012A
        gbc.setState(0x755b, 0x8295, 0x2700, 0xc4b1, 0x771b, 0x359f, 0x0, 0x1);
        gbc.writeMem(0x755b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8295);
        EXPECT(gbc.pc(), 0x755c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 012B
        gbc.setState(0x1bf5, 0xc192, 0x2ba0, 0xac52, 0x77b6, 0xeeaf, 0x1, 0x1);
        gbc.writeMem(0x1bf5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xc192);
        EXPECT(gbc.pc(), 0x1bf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 012C
        gbc.setState(0x6f5f, 0x6561, 0x99e0, 0x9503, 0x9aa, 0x83c0, 0x0, 0x1);
        gbc.writeMem(0x6f5f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6561);
        EXPECT(gbc.pc(), 0x6f60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 012D
        gbc.setState(0xaaa0, 0xe1d7, 0xb180, 0x67f7, 0xd123, 0x13bb, 0x0, 0x0);
        gbc.writeMem(0xaaa0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe1d7);
        EXPECT(gbc.pc(), 0xaaa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaa0), 0x3f);
        // 3F 012E
        gbc.setState(0xe4c7, 0x3124, 0x5570, 0x1034, 0x232c, 0xb108, 0x0, 0x0);
        gbc.writeMem(0xe4c7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x3124);
        EXPECT(gbc.pc(), 0xe4c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c7), 0x3f);
        // 3F 012F
        gbc.setState(0x3b74, 0x72cc, 0x3fb0, 0xa139, 0xaf6d, 0xc574, 0x0, 0x1);
        gbc.writeMem(0x3b74, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x72cc);
        EXPECT(gbc.pc(), 0x3b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0131
        gbc.setState(0xd14e, 0xd9db, 0xa220, 0x8023, 0xd26c, 0x2d21, 0x0, 0x1);
        gbc.writeMem(0xd14e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd9db);
        EXPECT(gbc.pc(), 0xd14f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd14e), 0x3f);
        // 3F 0132
        gbc.setState(0xce97, 0x18a0, 0x3600, 0x3e4e, 0x3aec, 0xa35d, 0x0, 0x0);
        gbc.writeMem(0xce97, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x18a0);
        EXPECT(gbc.pc(), 0xce98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce97), 0x3f);
        // 3F 0133
        gbc.setState(0x5c0e, 0xde9b, 0xfe40, 0xf3f5, 0xe631, 0x8b06, 0x0, 0x1);
        gbc.writeMem(0x5c0e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xde9b);
        EXPECT(gbc.pc(), 0x5c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0134
        gbc.setState(0x2bf, 0xdefe, 0x8160, 0xf2fe, 0xf9b1, 0x5bbf, 0x1, 0x1);
        gbc.writeMem(0x2bf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xdefe);
        EXPECT(gbc.pc(), 0x2c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0135
        gbc.setState(0x104d, 0x1b2d, 0x72d0, 0x254f, 0xc083, 0x7a6, 0x1, 0x1);
        gbc.writeMem(0x104d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1b2d);
        EXPECT(gbc.pc(), 0x104e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0136
        gbc.setState(0x818b, 0x9bfd, 0xe130, 0x64e1, 0x26da, 0xeae2, 0x1, 0x0);
        gbc.writeMem(0x818b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9bfd);
        EXPECT(gbc.pc(), 0x818c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818b), 0x3f);
        // 3F 0137
        gbc.setState(0xa64a, 0xd364, 0x9e10, 0x1cc1, 0x95f2, 0x403f, 0x0, 0x0);
        gbc.writeMem(0xa64a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd364);
        EXPECT(gbc.pc(), 0xa64b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa64a), 0x3f);
        // 3F 0138
        gbc.setState(0x6d37, 0x9ab0, 0x3a90, 0x9d2b, 0xae98, 0xd9cd, 0x1, 0x0);
        gbc.writeMem(0x6d37, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9ab0);
        EXPECT(gbc.pc(), 0x6d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 013A
        gbc.setState(0x1026, 0x142f, 0xdad0, 0xe9fd, 0xf57c, 0x46ac, 0x0, 0x1);
        gbc.writeMem(0x1026, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x142f);
        EXPECT(gbc.pc(), 0x1027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 013B
        gbc.setState(0x44be, 0x8d76, 0x50e0, 0xbc82, 0xa39a, 0x2eff, 0x0, 0x0);
        gbc.writeMem(0x44be, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8d76);
        EXPECT(gbc.pc(), 0x44bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 013C
        gbc.setState(0x8b23, 0xf36, 0x56e0, 0xac47, 0x63e2, 0x8f23, 0x0, 0x0);
        gbc.writeMem(0x8b23, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf36);
        EXPECT(gbc.pc(), 0x8b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b23), 0x3f);
        // 3F 013D
        gbc.setState(0x7437, 0x94ff, 0x3bb0, 0x3985, 0x4c2d, 0x7dc2, 0x0, 0x0);
        gbc.writeMem(0x7437, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x94ff);
        EXPECT(gbc.pc(), 0x7438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 013E
        gbc.setState(0x12a3, 0x3a4f, 0xf6c0, 0x2e59, 0x5327, 0x8b51, 0x1, 0x1);
        gbc.writeMem(0x12a3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3a4f);
        EXPECT(gbc.pc(), 0x12a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 013F
        gbc.setState(0xde1d, 0xce21, 0x1240, 0xc1d0, 0xc4ea, 0x34c4, 0x0, 0x1);
        gbc.writeMem(0xde1d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xce21);
        EXPECT(gbc.pc(), 0xde1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde1d), 0x3f);
        // 3F 0140
        gbc.setState(0xc788, 0x779f, 0xcd0, 0xeaa6, 0x162, 0x1e4e, 0x0, 0x1);
        gbc.writeMem(0xc788, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x779f);
        EXPECT(gbc.pc(), 0xc789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc788), 0x3f);
        // 3F 0141
        gbc.setState(0xca5, 0x6559, 0x2580, 0xb4dc, 0x3143, 0x966f, 0x0, 0x0);
        gbc.writeMem(0xca5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6559);
        EXPECT(gbc.pc(), 0xca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0142
        gbc.setState(0x4b3c, 0x1932, 0xd660, 0xe73c, 0x646f, 0x6634, 0x1, 0x0);
        gbc.writeMem(0x4b3c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1932);
        EXPECT(gbc.pc(), 0x4b3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0143
        gbc.setState(0xef33, 0x55cb, 0x7c00, 0xe827, 0x44c0, 0xf332, 0x0, 0x0);
        gbc.writeMem(0xef33, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x55cb);
        EXPECT(gbc.pc(), 0xef34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef33), 0x3f);
        // 3F 0144
        gbc.setState(0x5ef9, 0x56f4, 0xce10, 0xba42, 0x1874, 0x29c7, 0x1, 0x1);
        gbc.writeMem(0x5ef9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x56f4);
        EXPECT(gbc.pc(), 0x5efa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0145
        gbc.setState(0x5d51, 0xc942, 0xe230, 0xf7f5, 0x69ec, 0x5f68, 0x1, 0x1);
        gbc.writeMem(0x5d51, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc942);
        EXPECT(gbc.pc(), 0x5d52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0146
        gbc.setState(0x1ead, 0xcb35, 0x0, 0x8583, 0xf626, 0x30fb, 0x0, 0x0);
        gbc.writeMem(0x1ead, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xcb35);
        EXPECT(gbc.pc(), 0x1eae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0147
        gbc.setState(0xb1eb, 0x3fba, 0x98f0, 0xa821, 0xe91b, 0x6ba0, 0x0, 0x0);
        gbc.writeMem(0xb1eb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3fba);
        EXPECT(gbc.pc(), 0xb1ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1eb), 0x3f);
        // 3F 0149
        gbc.setState(0x4805, 0x5de6, 0xc560, 0xe544, 0xd802, 0xfc8b, 0x1, 0x0);
        gbc.writeMem(0x4805, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5de6);
        EXPECT(gbc.pc(), 0x4806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 014A
        gbc.setState(0xc47, 0xd9ca, 0x50e0, 0xc86c, 0x5e28, 0x40e9, 0x0, 0x0);
        gbc.writeMem(0xc47, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd9ca);
        EXPECT(gbc.pc(), 0xc48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 014B
        gbc.setState(0xda79, 0x8c9d, 0x3700, 0x4968, 0xab6d, 0xd010, 0x0, 0x1);
        gbc.writeMem(0xda79, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8c9d);
        EXPECT(gbc.pc(), 0xda7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda79), 0x3f);
        // 3F 014C
        gbc.setState(0x75c9, 0x5961, 0x97a0, 0xe111, 0xaa4b, 0x59f3, 0x1, 0x1);
        gbc.writeMem(0x75c9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5961);
        EXPECT(gbc.pc(), 0x75ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 014D
        gbc.setState(0x80c5, 0x3026, 0x7bd0, 0x415c, 0x8af6, 0xf4d, 0x1, 0x0);
        gbc.writeMem(0x80c5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3026);
        EXPECT(gbc.pc(), 0x80c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c5), 0x3f);
        // 3F 014E
        gbc.setState(0x5fb1, 0x113d, 0x2a0, 0x768e, 0x97e1, 0x2172, 0x1, 0x1);
        gbc.writeMem(0x5fb1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x113d);
        EXPECT(gbc.pc(), 0x5fb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 014F
        gbc.setState(0xa87d, 0x9bcf, 0xccb0, 0x8f6e, 0xbd2f, 0xc67, 0x1, 0x1);
        gbc.writeMem(0xa87d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9bcf);
        EXPECT(gbc.pc(), 0xa87e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa87d), 0x3f);
        // 3F 0150
        gbc.setState(0xc17e, 0x7403, 0x1e70, 0x79b2, 0x2c52, 0x4839, 0x0, 0x1);
        gbc.writeMem(0xc17e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7403);
        EXPECT(gbc.pc(), 0xc17f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc17e), 0x3f);
        // 3F 0151
        gbc.setState(0xeacf, 0xa66, 0xfb90, 0x4c15, 0x1f70, 0x202b, 0x0, 0x0);
        gbc.writeMem(0xeacf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa66);
        EXPECT(gbc.pc(), 0xead0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeacf), 0x3f);
        // 3F 0152
        gbc.setState(0xc474, 0xd65d, 0x7900, 0x9730, 0x187e, 0x5504, 0x0, 0x0);
        gbc.writeMem(0xc474, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd65d);
        EXPECT(gbc.pc(), 0xc475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc474), 0x3f);
        // 3F 0153
        gbc.setState(0x5265, 0x9081, 0x66a0, 0xecdc, 0x8e5b, 0x3ff7, 0x1, 0x0);
        gbc.writeMem(0x5265, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9081);
        EXPECT(gbc.pc(), 0x5266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0154
        gbc.setState(0xa13, 0x48b0, 0xb300, 0x686e, 0xa7b8, 0xea7a, 0x1, 0x0);
        gbc.writeMem(0xa13, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x48b0);
        EXPECT(gbc.pc(), 0xa14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0155
        gbc.setState(0xae8c, 0x4777, 0x3a20, 0x53eb, 0x4eb, 0x6fde, 0x1, 0x1);
        gbc.writeMem(0xae8c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4777);
        EXPECT(gbc.pc(), 0xae8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae8c), 0x3f);
        // 3F 0156
        gbc.setState(0x80bd, 0x5643, 0xa7c0, 0x1ab9, 0x85fe, 0x9da3, 0x1, 0x0);
        gbc.writeMem(0x80bd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5643);
        EXPECT(gbc.pc(), 0x80be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80bd), 0x3f);
        // 3F 0157
        gbc.setState(0x9b75, 0x9474, 0xf3a0, 0xff75, 0x7661, 0x89da, 0x0, 0x0);
        gbc.writeMem(0x9b75, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9474);
        EXPECT(gbc.pc(), 0x9b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b75), 0x3f);
        // 3F 0158
        gbc.setState(0x97b6, 0x6315, 0x8340, 0x68e1, 0x2763, 0x2eee, 0x1, 0x0);
        gbc.writeMem(0x97b6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6315);
        EXPECT(gbc.pc(), 0x97b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b6), 0x3f);
        // 3F 0159
        gbc.setState(0xc0b9, 0xdc0b, 0xacd0, 0x4a4e, 0x585d, 0xad8c, 0x1, 0x1);
        gbc.writeMem(0xc0b9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xdc0b);
        EXPECT(gbc.pc(), 0xc0ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b9), 0x3f);
        // 3F 015A
        gbc.setState(0x7459, 0x784a, 0x64e0, 0xf71a, 0xde7b, 0xc8fd, 0x0, 0x1);
        gbc.writeMem(0x7459, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x784a);
        EXPECT(gbc.pc(), 0x745a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 015B
        gbc.setState(0x221e, 0x9964, 0xc0f0, 0xb23e, 0x795a, 0x2bff, 0x0, 0x1);
        gbc.writeMem(0x221e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x9964);
        EXPECT(gbc.pc(), 0x221f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 015D
        gbc.setState(0x9330, 0xb3c6, 0x97f0, 0x5277, 0x2e72, 0x208, 0x1, 0x1);
        gbc.writeMem(0x9330, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb3c6);
        EXPECT(gbc.pc(), 0x9331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9330), 0x3f);
        // 3F 015E
        gbc.setState(0xc71, 0x5acb, 0xbeb0, 0xcca5, 0x5e9f, 0xd07b, 0x0, 0x0);
        gbc.writeMem(0xc71, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5acb);
        EXPECT(gbc.pc(), 0xc72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 015F
        gbc.setState(0xa956, 0xcf58, 0xa100, 0x5d3f, 0x993, 0x72df, 0x0, 0x0);
        gbc.writeMem(0xa956, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcf58);
        EXPECT(gbc.pc(), 0xa957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa956), 0x3f);
        // 3F 0160
        gbc.setState(0x6b82, 0xbfad, 0x7c20, 0x961f, 0xa849, 0x7400, 0x1, 0x0);
        gbc.writeMem(0x6b82, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbfad);
        EXPECT(gbc.pc(), 0x6b83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0161
        gbc.setState(0xb4d8, 0x8b9e, 0xb9a0, 0x717e, 0x919a, 0x782, 0x1, 0x1);
        gbc.writeMem(0xb4d8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8b9e);
        EXPECT(gbc.pc(), 0xb4d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4d8), 0x3f);
        // 3F 0162
        gbc.setState(0x7f8, 0x9239, 0x5770, 0xb3d8, 0x5ee7, 0xd382, 0x0, 0x1);
        gbc.writeMem(0x7f8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9239);
        EXPECT(gbc.pc(), 0x7f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0163
        gbc.setState(0xc2e3, 0xc981, 0x3e80, 0xd4f8, 0x883b, 0xdcea, 0x0, 0x1);
        gbc.writeMem(0xc2e3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc981);
        EXPECT(gbc.pc(), 0xc2e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2e3), 0x3f);
        // 3F 0164
        gbc.setState(0xe930, 0x8f2b, 0x8df0, 0xc3d1, 0x53a4, 0xb074, 0x1, 0x0);
        gbc.writeMem(0xe930, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8f2b);
        EXPECT(gbc.pc(), 0xe931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe930), 0x3f);
        // 3F 0165
        gbc.setState(0x7607, 0xa68c, 0x6a10, 0xa3ca, 0x43bb, 0x2b9, 0x1, 0x1);
        gbc.writeMem(0x7607, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa68c);
        EXPECT(gbc.pc(), 0x7608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0166
        gbc.setState(0x6997, 0x856d, 0xd20, 0xa6f0, 0x9e35, 0x8763, 0x1, 0x1);
        gbc.writeMem(0x6997, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x856d);
        EXPECT(gbc.pc(), 0x6998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0167
        gbc.setState(0xebf7, 0xc877, 0x7640, 0x7596, 0xfd7f, 0x1d6, 0x0, 0x1);
        gbc.writeMem(0xebf7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc877);
        EXPECT(gbc.pc(), 0xebf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebf7), 0x3f);
        // 3F 0168
        gbc.setState(0x5a39, 0xe484, 0x4650, 0x4ceb, 0xd274, 0x9ce, 0x0, 0x1);
        gbc.writeMem(0x5a39, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe484);
        EXPECT(gbc.pc(), 0x5a3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0169
        gbc.setState(0xa090, 0x59b5, 0xa9e0, 0x8d56, 0x4ea0, 0x8ac9, 0x1, 0x1);
        gbc.writeMem(0xa090, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x59b5);
        EXPECT(gbc.pc(), 0xa091);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa090), 0x3f);
        // 3F 016A
        gbc.setState(0xd265, 0x79a5, 0x5c30, 0x49b8, 0x18a, 0xa502, 0x1, 0x0);
        gbc.writeMem(0xd265, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x79a5);
        EXPECT(gbc.pc(), 0xd266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd265), 0x3f);
        // 3F 016B
        gbc.setState(0x37ed, 0x7842, 0x1a90, 0xac58, 0xb689, 0x9fc1, 0x1, 0x0);
        gbc.writeMem(0x37ed, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7842);
        EXPECT(gbc.pc(), 0x37ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 016C
        gbc.setState(0x2570, 0x736c, 0x2780, 0x3d52, 0x7735, 0x669e, 0x1, 0x1);
        gbc.writeMem(0x2570, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x736c);
        EXPECT(gbc.pc(), 0x2571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 016D
        gbc.setState(0xd087, 0x8721, 0x5470, 0x3012, 0xf7bf, 0xbb01, 0x1, 0x1);
        gbc.writeMem(0xd087, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8721);
        EXPECT(gbc.pc(), 0xd088);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd087), 0x3f);
        // 3F 016E
        gbc.setState(0x674d, 0xcca6, 0xe4b0, 0xc3cc, 0xb10f, 0xd76e, 0x0, 0x1);
        gbc.writeMem(0x674d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcca6);
        EXPECT(gbc.pc(), 0x674e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 016F
        gbc.setState(0x37ce, 0xa367, 0x6ec0, 0xf03c, 0x68e2, 0x7faa, 0x0, 0x1);
        gbc.writeMem(0x37ce, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa367);
        EXPECT(gbc.pc(), 0x37cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0170
        gbc.setState(0x3d77, 0xe703, 0x8b30, 0xf524, 0x8f5, 0xfc00, 0x1, 0x0);
        gbc.writeMem(0x3d77, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe703);
        EXPECT(gbc.pc(), 0x3d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0171
        gbc.setState(0x6db7, 0x8fa4, 0x9f00, 0x42e3, 0xef82, 0x56d5, 0x1, 0x1);
        gbc.writeMem(0x6db7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8fa4);
        EXPECT(gbc.pc(), 0x6db8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0172
        gbc.setState(0x9efe, 0xebed, 0xe3a0, 0x6611, 0x4546, 0x3ecf, 0x1, 0x1);
        gbc.writeMem(0x9efe, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xebed);
        EXPECT(gbc.pc(), 0x9eff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9efe), 0x3f);
        // 3F 0173
        gbc.setState(0x28cc, 0x98bb, 0x28f0, 0x91f5, 0x6f6d, 0xee59, 0x0, 0x1);
        gbc.writeMem(0x28cc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x98bb);
        EXPECT(gbc.pc(), 0x28cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0174
        gbc.setState(0x1f99, 0xbdf7, 0x8430, 0x2fa3, 0x6e91, 0x30cf, 0x1, 0x0);
        gbc.writeMem(0x1f99, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xbdf7);
        EXPECT(gbc.pc(), 0x1f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0175
        gbc.setState(0x9db7, 0x8ac6, 0xe040, 0xcb1f, 0x3e35, 0xc4ff, 0x1, 0x1);
        gbc.writeMem(0x9db7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8ac6);
        EXPECT(gbc.pc(), 0x9db8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9db7), 0x3f);
        // 3F 0176
        gbc.setState(0xaf01, 0x3267, 0x6fc0, 0x9435, 0xa451, 0x7fde, 0x0, 0x0);
        gbc.writeMem(0xaf01, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3267);
        EXPECT(gbc.pc(), 0xaf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf01), 0x3f);
        // 3F 0177
        gbc.setState(0xb8d7, 0x204c, 0x10d0, 0x8a14, 0x1cbe, 0xa3f2, 0x0, 0x1);
        gbc.writeMem(0xb8d7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x204c);
        EXPECT(gbc.pc(), 0xb8d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8d7), 0x3f);
        // 3F 0178
        gbc.setState(0x7f9a, 0xe6ad, 0x500, 0x3782, 0x205c, 0xd2d5, 0x1, 0x1);
        gbc.writeMem(0x7f9a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe6ad);
        EXPECT(gbc.pc(), 0x7f9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0179
        gbc.setState(0xd370, 0xfd03, 0xa8d0, 0xbfe3, 0x1628, 0xfde4, 0x0, 0x0);
        gbc.writeMem(0xd370, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfd03);
        EXPECT(gbc.pc(), 0xd371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd370), 0x3f);
        // 3F 017A
        gbc.setState(0x83f1, 0x76ed, 0x39f0, 0x86b1, 0x5c7b, 0x5c22, 0x1, 0x1);
        gbc.writeMem(0x83f1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x76ed);
        EXPECT(gbc.pc(), 0x83f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f1), 0x3f);
        // 3F 017B
        gbc.setState(0xa5a0, 0x1840, 0xdc20, 0x7441, 0x2335, 0x4e31, 0x0, 0x1);
        gbc.writeMem(0xa5a0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1840);
        EXPECT(gbc.pc(), 0xa5a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5a0), 0x3f);
        // 3F 017C
        gbc.setState(0x74c6, 0xe00d, 0xcf30, 0x6ee7, 0xe479, 0x3cec, 0x1, 0x0);
        gbc.writeMem(0x74c6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe00d);
        EXPECT(gbc.pc(), 0x74c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 017D
        gbc.setState(0x7db7, 0x2042, 0xcda0, 0x91d9, 0x6e98, 0x6ff2, 0x0, 0x1);
        gbc.writeMem(0x7db7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2042);
        EXPECT(gbc.pc(), 0x7db8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 017E
        gbc.setState(0x7613, 0x15c7, 0xd450, 0x5b7d, 0x3a1a, 0xddd4, 0x1, 0x0);
        gbc.writeMem(0x7613, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x15c7);
        EXPECT(gbc.pc(), 0x7614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 017F
        gbc.setState(0x553e, 0x3bb0, 0xc560, 0xf77d, 0x5115, 0xbb85, 0x0, 0x0);
        gbc.writeMem(0x553e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3bb0);
        EXPECT(gbc.pc(), 0x553f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0180
        gbc.setState(0xb96b, 0x29ef, 0x92c0, 0xd46f, 0x7dee, 0x22a0, 0x1, 0x0);
        gbc.writeMem(0xb96b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x29ef);
        EXPECT(gbc.pc(), 0xb96c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb96b), 0x3f);
        // 3F 0181
        gbc.setState(0x4366, 0xd353, 0x2f60, 0x4593, 0x8100, 0xe394, 0x1, 0x0);
        gbc.writeMem(0x4366, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd353);
        EXPECT(gbc.pc(), 0x4367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0182
        gbc.setState(0xbbd, 0x5482, 0xbf20, 0xf1ae, 0xbd62, 0x2058, 0x0, 0x1);
        gbc.writeMem(0xbbd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5482);
        EXPECT(gbc.pc(), 0xbbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0183
        gbc.setState(0xd0, 0xf588, 0xbd30, 0x4363, 0xf78, 0x7cc, 0x1, 0x0);
        gbc.writeMem(0xd0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf588);
        EXPECT(gbc.pc(), 0xd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0184
        gbc.setState(0x1555, 0x729d, 0xe860, 0x84c9, 0xa7d, 0xca89, 0x1, 0x1);
        gbc.writeMem(0x1555, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x729d);
        EXPECT(gbc.pc(), 0x1556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0185
        gbc.setState(0x297b, 0xead6, 0x9d10, 0xd1d8, 0x1812, 0xb9dc, 0x1, 0x0);
        gbc.writeMem(0x297b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xead6);
        EXPECT(gbc.pc(), 0x297c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0186
        gbc.setState(0x8ddd, 0xa03a, 0x100, 0x23de, 0x30e9, 0x7759, 0x1, 0x1);
        gbc.writeMem(0x8ddd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa03a);
        EXPECT(gbc.pc(), 0x8dde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ddd), 0x3f);
        // 3F 0187
        gbc.setState(0x2f94, 0x7e91, 0x1270, 0xa2b6, 0x2c33, 0x18aa, 0x0, 0x1);
        gbc.writeMem(0x2f94, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7e91);
        EXPECT(gbc.pc(), 0x2f95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0188
        gbc.setState(0xdf05, 0xcc55, 0xc230, 0xab69, 0x135, 0xc3b0, 0x1, 0x0);
        gbc.writeMem(0xdf05, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xcc55);
        EXPECT(gbc.pc(), 0xdf06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf05), 0x3f);
        // 3F 0189
        gbc.setState(0x2d3a, 0xc373, 0xf10, 0x54, 0x263a, 0x273b, 0x0, 0x1);
        gbc.writeMem(0x2d3a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc373);
        EXPECT(gbc.pc(), 0x2d3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 018A
        gbc.setState(0x4a4f, 0x2876, 0xa210, 0x6234, 0x24a5, 0xe543, 0x0, 0x0);
        gbc.writeMem(0x4a4f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2876);
        EXPECT(gbc.pc(), 0x4a50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 018B
        gbc.setState(0x6263, 0x212e, 0x97d0, 0xfb52, 0xe03, 0x9724, 0x1, 0x0);
        gbc.writeMem(0x6263, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x212e);
        EXPECT(gbc.pc(), 0x6264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 018C
        gbc.setState(0xb516, 0xe920, 0x6e20, 0x4dae, 0xa5, 0x36c1, 0x0, 0x1);
        gbc.writeMem(0xb516, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe920);
        EXPECT(gbc.pc(), 0xb517);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb516), 0x3f);
        // 3F 018D
        gbc.setState(0x90cb, 0x9777, 0xa550, 0xe254, 0x8314, 0x48e7, 0x0, 0x1);
        gbc.writeMem(0x90cb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9777);
        EXPECT(gbc.pc(), 0x90cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90cb), 0x3f);
        // 3F 018E
        gbc.setState(0x324f, 0x37ff, 0x7a70, 0xda2e, 0xcbd9, 0xdc8e, 0x1, 0x0);
        gbc.writeMem(0x324f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x37ff);
        EXPECT(gbc.pc(), 0x3250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0190
        gbc.setState(0x6f1, 0x9f2b, 0xa630, 0xb4a, 0x5d25, 0xd7c8, 0x1, 0x0);
        gbc.writeMem(0x6f1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9f2b);
        EXPECT(gbc.pc(), 0x6f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0192
        gbc.setState(0xca6f, 0xb902, 0x8790, 0x232b, 0xae7d, 0x6b4c, 0x1, 0x0);
        gbc.writeMem(0xca6f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb902);
        EXPECT(gbc.pc(), 0xca70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca6f), 0x3f);
        // 3F 0193
        gbc.setState(0x5466, 0x4fac, 0x7e60, 0xd04c, 0x9b0f, 0x8aee, 0x0, 0x0);
        gbc.writeMem(0x5466, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4fac);
        EXPECT(gbc.pc(), 0x5467);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0194
        gbc.setState(0x62e, 0x670f, 0x6050, 0x57d8, 0x938a, 0x8f29, 0x1, 0x1);
        gbc.writeMem(0x62e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x670f);
        EXPECT(gbc.pc(), 0x62f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0195
        gbc.setState(0xc839, 0x7884, 0x9070, 0x2470, 0xebe3, 0x205b, 0x1, 0x1);
        gbc.writeMem(0xc839, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7884);
        EXPECT(gbc.pc(), 0xc83a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc839), 0x3f);
        // 3F 0196
        gbc.setState(0x9814, 0x7f2d, 0x7480, 0x7311, 0xcf0d, 0x40d6, 0x1, 0x0);
        gbc.writeMem(0x9814, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7f2d);
        EXPECT(gbc.pc(), 0x9815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9814), 0x3f);
        // 3F 0197
        gbc.setState(0xd3a4, 0x76e, 0x4590, 0xce8a, 0xf52a, 0xf5fe, 0x1, 0x0);
        gbc.writeMem(0xd3a4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x76e);
        EXPECT(gbc.pc(), 0xd3a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a4), 0x3f);
        // 3F 0198
        gbc.setState(0x32b8, 0xd949, 0x5de0, 0xbd55, 0xc37a, 0xd376, 0x0, 0x0);
        gbc.writeMem(0x32b8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd949);
        EXPECT(gbc.pc(), 0x32b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0199
        gbc.setState(0x99cc, 0x93db, 0x5cd0, 0x9f31, 0x7f13, 0x2c55, 0x1, 0x1);
        gbc.writeMem(0x99cc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x93db);
        EXPECT(gbc.pc(), 0x99cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99cc), 0x3f);
        // 3F 019A
        gbc.setState(0x7c1e, 0x60ea, 0xf6b0, 0x85c2, 0xf330, 0x67f5, 0x1, 0x0);
        gbc.writeMem(0x7c1e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x60ea);
        EXPECT(gbc.pc(), 0x7c1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 019B
        gbc.setState(0x2537, 0x2d9f, 0x9280, 0x9bf4, 0xbdfe, 0x3bcf, 0x1, 0x0);
        gbc.writeMem(0x2537, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2d9f);
        EXPECT(gbc.pc(), 0x2538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 019C
        gbc.setState(0x4af4, 0xc8f5, 0x5ed0, 0x345d, 0x796c, 0xabf9, 0x0, 0x1);
        gbc.writeMem(0x4af4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc8f5);
        EXPECT(gbc.pc(), 0x4af5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 019D
        gbc.setState(0xc02e, 0x4d39, 0x1750, 0x5637, 0xa12a, 0xa952, 0x0, 0x1);
        gbc.writeMem(0xc02e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4d39);
        EXPECT(gbc.pc(), 0xc02f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc02e), 0x3f);
        // 3F 019E
        gbc.setState(0x9353, 0x80bc, 0x54c0, 0xcdc0, 0x5bd3, 0x5ad7, 0x1, 0x1);
        gbc.writeMem(0x9353, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x80bc);
        EXPECT(gbc.pc(), 0x9354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9353), 0x3f);
        // 3F 019F
        gbc.setState(0x595a, 0x954c, 0x78f0, 0x183b, 0xe0f0, 0x441d, 0x1, 0x1);
        gbc.writeMem(0x595a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x954c);
        EXPECT(gbc.pc(), 0x595b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01A0
        gbc.setState(0x4884, 0x237f, 0x76d0, 0x9ed4, 0x3327, 0x367, 0x0, 0x0);
        gbc.writeMem(0x4884, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x237f);
        EXPECT(gbc.pc(), 0x4885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01A1
        gbc.setState(0xd3b2, 0x7d9a, 0xd630, 0x9cae, 0x2f9c, 0x71d3, 0x0, 0x1);
        gbc.writeMem(0xd3b2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7d9a);
        EXPECT(gbc.pc(), 0xd3b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b2), 0x3f);
        // 3F 01A2
        gbc.setState(0x7f65, 0x975f, 0x77f0, 0x8ef9, 0x65b4, 0x485f, 0x0, 0x1);
        gbc.writeMem(0x7f65, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x975f);
        EXPECT(gbc.pc(), 0x7f66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01A3
        gbc.setState(0x10ca, 0xdec7, 0xaae0, 0x27d, 0x16a, 0xa7d1, 0x0, 0x1);
        gbc.writeMem(0x10ca, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xdec7);
        EXPECT(gbc.pc(), 0x10cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01A4
        gbc.setState(0x81aa, 0x41ec, 0x8220, 0x5b99, 0x1293, 0x8967, 0x0, 0x0);
        gbc.writeMem(0x81aa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x41ec);
        EXPECT(gbc.pc(), 0x81ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81aa), 0x3f);
        // 3F 01A5
        gbc.setState(0x1099, 0x3d4c, 0x84c0, 0xc7ed, 0xa2ea, 0xab28, 0x1, 0x1);
        gbc.writeMem(0x1099, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3d4c);
        EXPECT(gbc.pc(), 0x109a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01A6
        gbc.setState(0x3a54, 0xdb9e, 0x620, 0x95a5, 0x5b5d, 0x45, 0x0, 0x0);
        gbc.writeMem(0x3a54, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xdb9e);
        EXPECT(gbc.pc(), 0x3a55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01A7
        gbc.setState(0xdaf, 0x8d61, 0x7b80, 0x2fbc, 0x9460, 0x57e3, 0x0, 0x0);
        gbc.writeMem(0xdaf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8d61);
        EXPECT(gbc.pc(), 0xdb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01A9
        gbc.setState(0x4e20, 0x3e89, 0xf970, 0xdc03, 0x516f, 0x9112, 0x0, 0x1);
        gbc.writeMem(0x4e20, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3e89);
        EXPECT(gbc.pc(), 0x4e21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01AA
        gbc.setState(0xba91, 0x2c34, 0xef20, 0x3951, 0x1b28, 0xf483, 0x1, 0x1);
        gbc.writeMem(0xba91, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2c34);
        EXPECT(gbc.pc(), 0xba92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba91), 0x3f);
        // 3F 01AB
        gbc.setState(0x1dce, 0x653a, 0xbe50, 0x38e9, 0x598, 0x9b9b, 0x1, 0x0);
        gbc.writeMem(0x1dce, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x653a);
        EXPECT(gbc.pc(), 0x1dcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01AC
        gbc.setState(0x8f2a, 0x6a61, 0x64c0, 0x459b, 0xf168, 0xe44f, 0x0, 0x0);
        gbc.writeMem(0x8f2a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6a61);
        EXPECT(gbc.pc(), 0x8f2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f2a), 0x3f);
        // 3F 01AD
        gbc.setState(0x3fdb, 0x1720, 0x8290, 0x9dcb, 0xb0cb, 0x987c, 0x0, 0x0);
        gbc.writeMem(0x3fdb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1720);
        EXPECT(gbc.pc(), 0x3fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01AE
        gbc.setState(0x8a8, 0x1345, 0xb180, 0x4001, 0xd36e, 0x773c, 0x1, 0x0);
        gbc.writeMem(0x8a8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1345);
        EXPECT(gbc.pc(), 0x8a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01AF
        gbc.setState(0x278c, 0x108f, 0xd070, 0xa13b, 0xcd4b, 0xffd5, 0x0, 0x1);
        gbc.writeMem(0x278c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x108f);
        EXPECT(gbc.pc(), 0x278d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01B0
        gbc.setState(0x2b31, 0xbaef, 0xe920, 0x5eb3, 0xd6c2, 0xb178, 0x0, 0x0);
        gbc.writeMem(0x2b31, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xbaef);
        EXPECT(gbc.pc(), 0x2b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01B1
        gbc.setState(0xe57b, 0xa34b, 0xe120, 0xa03, 0xf350, 0x207d, 0x0, 0x0);
        gbc.writeMem(0xe57b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa34b);
        EXPECT(gbc.pc(), 0xe57c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe57b), 0x3f);
        // 3F 01B2
        gbc.setState(0xcfe5, 0xf9d5, 0x8a00, 0x2f6b, 0xb3c6, 0xffb9, 0x0, 0x0);
        gbc.writeMem(0xcfe5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf9d5);
        EXPECT(gbc.pc(), 0xcfe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe5), 0x3f);
        // 3F 01B3
        gbc.setState(0x22d2, 0x10c1, 0x1040, 0xe822, 0x5f16, 0x7e3b, 0x1, 0x1);
        gbc.writeMem(0x22d2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x10c1);
        EXPECT(gbc.pc(), 0x22d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01B4
        gbc.setState(0x1411, 0xab3e, 0x2ca0, 0xd0e5, 0xbb5a, 0x4535, 0x0, 0x0);
        gbc.writeMem(0x1411, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xab3e);
        EXPECT(gbc.pc(), 0x1412);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01B5
        gbc.setState(0x41f5, 0xaaed, 0x50a0, 0x2a5, 0x148e, 0xe5da, 0x0, 0x0);
        gbc.writeMem(0x41f5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xaaed);
        EXPECT(gbc.pc(), 0x41f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01B6
        gbc.setState(0x599, 0x5510, 0x710, 0xe4a0, 0xb1f6, 0x5c9f, 0x1, 0x0);
        gbc.writeMem(0x599, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x5510);
        EXPECT(gbc.pc(), 0x59a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01B7
        gbc.setState(0xccd3, 0xcc22, 0x3780, 0xce74, 0x12b6, 0x4429, 0x0, 0x0);
        gbc.writeMem(0xccd3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcc22);
        EXPECT(gbc.pc(), 0xccd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd3), 0x3f);
        // 3F 01B8
        gbc.setState(0x4561, 0xfd7a, 0x42f0, 0x8f8e, 0x8690, 0xd2f3, 0x0, 0x1);
        gbc.writeMem(0x4561, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfd7a);
        EXPECT(gbc.pc(), 0x4562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01B9
        gbc.setState(0xa44e, 0xaf6b, 0xfd50, 0xc909, 0x211c, 0x4c53, 0x1, 0x1);
        gbc.writeMem(0xa44e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xaf6b);
        EXPECT(gbc.pc(), 0xa44f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa44e), 0x3f);
        // 3F 01BA
        gbc.setState(0xa683, 0x9ef0, 0x7ba0, 0x7baa, 0x24a7, 0x82ca, 0x1, 0x0);
        gbc.writeMem(0xa683, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x9ef0);
        EXPECT(gbc.pc(), 0xa684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa683), 0x3f);
        // 3F 01BB
        gbc.setState(0x907a, 0xb839, 0x9f90, 0xea12, 0x95a1, 0x9ca6, 0x1, 0x0);
        gbc.writeMem(0x907a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb839);
        EXPECT(gbc.pc(), 0x907b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x907a), 0x3f);
        // 3F 01BC
        gbc.setState(0x213d, 0x4a3f, 0x410, 0x3f0b, 0xe125, 0x95e, 0x0, 0x0);
        gbc.writeMem(0x213d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4a3f);
        EXPECT(gbc.pc(), 0x213e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01BD
        gbc.setState(0xa076, 0x95b1, 0xd9d0, 0xc415, 0xdb21, 0x27a7, 0x0, 0x0);
        gbc.writeMem(0xa076, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x95b1);
        EXPECT(gbc.pc(), 0xa077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa076), 0x3f);
        // 3F 01BE
        gbc.setState(0x4ffb, 0x448d, 0xac20, 0x7e82, 0xc4b, 0xfdb4, 0x1, 0x0);
        gbc.writeMem(0x4ffb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x448d);
        EXPECT(gbc.pc(), 0x4ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01C0
        gbc.setState(0xd99a, 0x527b, 0x3180, 0x7b89, 0xe721, 0x87cd, 0x1, 0x1);
        gbc.writeMem(0xd99a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x527b);
        EXPECT(gbc.pc(), 0xd99b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd99a), 0x3f);
        // 3F 01C1
        gbc.setState(0x1d0a, 0xeaa7, 0xd7b0, 0xc4f8, 0x8263, 0x9133, 0x1, 0x0);
        gbc.writeMem(0x1d0a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xeaa7);
        EXPECT(gbc.pc(), 0x1d0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01C2
        gbc.setState(0x6541, 0x67a5, 0x6590, 0x20ba, 0x4b32, 0x98d4, 0x1, 0x0);
        gbc.writeMem(0x6541, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x67a5);
        EXPECT(gbc.pc(), 0x6542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01C3
        gbc.setState(0xc975, 0x3ca1, 0x4f60, 0x2e2, 0x4eff, 0xd466, 0x1, 0x1);
        gbc.writeMem(0xc975, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3ca1);
        EXPECT(gbc.pc(), 0xc976);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc975), 0x3f);
        // 3F 01C4
        gbc.setState(0x6fbd, 0xdede, 0x5af0, 0x28ff, 0x47e2, 0xc088, 0x0, 0x0);
        gbc.writeMem(0x6fbd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xdede);
        EXPECT(gbc.pc(), 0x6fbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01C5
        gbc.setState(0xb492, 0xa15c, 0x70f0, 0x5a27, 0xc2d5, 0xae5f, 0x1, 0x0);
        gbc.writeMem(0xb492, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa15c);
        EXPECT(gbc.pc(), 0xb493);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb492), 0x3f);
        // 3F 01C6
        gbc.setState(0xcc60, 0x42da, 0x8440, 0xa26d, 0x6b1, 0x6d38, 0x1, 0x0);
        gbc.writeMem(0xcc60, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x42da);
        EXPECT(gbc.pc(), 0xcc61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc60), 0x3f);
        // 3F 01C7
        gbc.setState(0x126b, 0x49d5, 0xce60, 0xfb6c, 0xcdea, 0x1faa, 0x1, 0x0);
        gbc.writeMem(0x126b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x49d5);
        EXPECT(gbc.pc(), 0x126c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01C8
        gbc.setState(0x619c, 0x5997, 0x97d0, 0xa8fd, 0x4d09, 0x1d1c, 0x1, 0x1);
        gbc.writeMem(0x619c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5997);
        EXPECT(gbc.pc(), 0x619d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01C9
        gbc.setState(0xe94f, 0x238a, 0xa400, 0x7cb7, 0x40f0, 0x3c1e, 0x0, 0x1);
        gbc.writeMem(0xe94f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x238a);
        EXPECT(gbc.pc(), 0xe950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe94f), 0x3f);
        // 3F 01CA
        gbc.setState(0xc063, 0xd0ed, 0x3520, 0x7fd0, 0xb0b2, 0xa09c, 0x1, 0x1);
        gbc.writeMem(0xc063, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd0ed);
        EXPECT(gbc.pc(), 0xc064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc063), 0x3f);
        // 3F 01CB
        gbc.setState(0xb84a, 0x35a0, 0x60d0, 0xf2f5, 0x1a80, 0x9cb, 0x0, 0x0);
        gbc.writeMem(0xb84a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x35a0);
        EXPECT(gbc.pc(), 0xb84b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb84a), 0x3f);
        // 3F 01CC
        gbc.setState(0x979, 0x6b93, 0xd580, 0x9f7c, 0x1352, 0xb045, 0x0, 0x1);
        gbc.writeMem(0x979, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6b93);
        EXPECT(gbc.pc(), 0x97a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01CD
        gbc.setState(0x4606, 0xe33b, 0x2870, 0x848e, 0x5ff, 0xa434, 0x1, 0x1);
        gbc.writeMem(0x4606, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe33b);
        EXPECT(gbc.pc(), 0x4607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01CE
        gbc.setState(0xd5c9, 0x8011, 0x55c0, 0x2b31, 0x5b53, 0xd9cf, 0x0, 0x1);
        gbc.writeMem(0xd5c9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8011);
        EXPECT(gbc.pc(), 0xd5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5c9), 0x3f);
        // 3F 01CF
        gbc.setState(0x61b9, 0x7ea0, 0x64b0, 0xfcb2, 0xace1, 0xa3d4, 0x1, 0x1);
        gbc.writeMem(0x61b9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7ea0);
        EXPECT(gbc.pc(), 0x61ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01D1
        gbc.setState(0xbb7b, 0x782f, 0x3300, 0x900f, 0x2444, 0x722b, 0x1, 0x1);
        gbc.writeMem(0xbb7b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x782f);
        EXPECT(gbc.pc(), 0xbb7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb7b), 0x3f);
        // 3F 01D2
        gbc.setState(0x64c7, 0xd22b, 0xf4e0, 0x129d, 0x1ce, 0x48c4, 0x1, 0x1);
        gbc.writeMem(0x64c7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd22b);
        EXPECT(gbc.pc(), 0x64c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01D3
        gbc.setState(0x1438, 0x719, 0x7a70, 0x9794, 0x499, 0x4c2b, 0x0, 0x0);
        gbc.writeMem(0x1438, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x719);
        EXPECT(gbc.pc(), 0x1439);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01D4
        gbc.setState(0x4921, 0x2e9d, 0x72a0, 0x24a6, 0xda81, 0x1e10, 0x0, 0x0);
        gbc.writeMem(0x4921, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2e9d);
        EXPECT(gbc.pc(), 0x4922);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01D5
        gbc.setState(0x2deb, 0x9758, 0x2930, 0x61fe, 0xc915, 0x6a4a, 0x0, 0x0);
        gbc.writeMem(0x2deb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x9758);
        EXPECT(gbc.pc(), 0x2dec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01D6
        gbc.setState(0x3d75, 0xe9dd, 0x61c0, 0x51fa, 0x95af, 0x3e86, 0x0, 0x0);
        gbc.writeMem(0x3d75, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe9dd);
        EXPECT(gbc.pc(), 0x3d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01D7
        gbc.setState(0x8b22, 0x91df, 0x1810, 0x7dcd, 0xafb3, 0x410e, 0x0, 0x1);
        gbc.writeMem(0x8b22, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x91df);
        EXPECT(gbc.pc(), 0x8b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b22), 0x3f);
        // 3F 01D8
        gbc.setState(0x6400, 0xc949, 0xe310, 0xcb62, 0x4743, 0x2e9d, 0x0, 0x0);
        gbc.writeMem(0x6400, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc949);
        EXPECT(gbc.pc(), 0x6401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01D9
        gbc.setState(0x268b, 0x417a, 0x9d10, 0xd822, 0x2a9d, 0x8143, 0x0, 0x1);
        gbc.writeMem(0x268b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x417a);
        EXPECT(gbc.pc(), 0x268c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01DA
        gbc.setState(0x9862, 0x2500, 0x8670, 0x5e2e, 0x1814, 0x830f, 0x1, 0x1);
        gbc.writeMem(0x9862, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2500);
        EXPECT(gbc.pc(), 0x9863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9862), 0x3f);
        // 3F 01DB
        gbc.setState(0xe1be, 0x30ae, 0x42b0, 0x70f, 0x4c1d, 0x9701, 0x1, 0x0);
        gbc.writeMem(0xe1be, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x30ae);
        EXPECT(gbc.pc(), 0xe1bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1be), 0x3f);
        // 3F 01DC
        gbc.setState(0xebf1, 0xf456, 0x8100, 0xacb4, 0x370d, 0x1d0c, 0x0, 0x1);
        gbc.writeMem(0xebf1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf456);
        EXPECT(gbc.pc(), 0xebf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebf1), 0x3f);
        // 3F 01DD
        gbc.setState(0x7645, 0x9e70, 0x4660, 0xb4e6, 0x7e52, 0x46ea, 0x1, 0x1);
        gbc.writeMem(0x7645, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9e70);
        EXPECT(gbc.pc(), 0x7646);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01DE
        gbc.setState(0xa0e3, 0x259c, 0x4ae0, 0x4734, 0x740d, 0x7f46, 0x0, 0x1);
        gbc.writeMem(0xa0e3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x259c);
        EXPECT(gbc.pc(), 0xa0e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e3), 0x3f);
        // 3F 01E0
        gbc.setState(0x168f, 0x4d6d, 0xe1b0, 0x24e3, 0xf7ec, 0xbb68, 0x0, 0x1);
        gbc.writeMem(0x168f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4d6d);
        EXPECT(gbc.pc(), 0x1690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01E1
        gbc.setState(0xc2d9, 0x8597, 0x9c80, 0x3692, 0xdae8, 0x195f, 0x1, 0x1);
        gbc.writeMem(0xc2d9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8597);
        EXPECT(gbc.pc(), 0xc2da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2d9), 0x3f);
        // 3F 01E2
        gbc.setState(0x4a00, 0x431b, 0x7160, 0x1372, 0xd36b, 0xf8ea, 0x1, 0x0);
        gbc.writeMem(0x4a00, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x431b);
        EXPECT(gbc.pc(), 0x4a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01E3
        gbc.setState(0xd899, 0x8d8a, 0x1e50, 0x2ac6, 0xe8fa, 0x8cf3, 0x0, 0x0);
        gbc.writeMem(0xd899, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8d8a);
        EXPECT(gbc.pc(), 0xd89a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd899), 0x3f);
        // 3F 01E4
        gbc.setState(0x8a5d, 0x5155, 0xb9f0, 0xddeb, 0xf6f4, 0x59ba, 0x1, 0x1);
        gbc.writeMem(0x8a5d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5155);
        EXPECT(gbc.pc(), 0x8a5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a5d), 0x3f);
        // 3F 01E5
        gbc.setState(0xed9b, 0x6c06, 0x5360, 0x1eb, 0xd92a, 0x5d8, 0x1, 0x0);
        gbc.writeMem(0xed9b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6c06);
        EXPECT(gbc.pc(), 0xed9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed9b), 0x3f);
        // 3F 01E6
        gbc.setState(0x5fa5, 0x557b, 0x9ad0, 0xd4bd, 0x508c, 0x6046, 0x0, 0x1);
        gbc.writeMem(0x5fa5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x557b);
        EXPECT(gbc.pc(), 0x5fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01E7
        gbc.setState(0x952, 0x7d25, 0xef30, 0x495b, 0xa937, 0xc2c1, 0x0, 0x0);
        gbc.writeMem(0x952, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7d25);
        EXPECT(gbc.pc(), 0x953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01E8
        gbc.setState(0x260e, 0x277c, 0x3cf0, 0x6852, 0xf3d9, 0x844e, 0x1, 0x0);
        gbc.writeMem(0x260e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x277c);
        EXPECT(gbc.pc(), 0x260f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01E9
        gbc.setState(0x7d82, 0x949, 0x7530, 0x3b2, 0x5ece, 0xda81, 0x0, 0x0);
        gbc.writeMem(0x7d82, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x949);
        EXPECT(gbc.pc(), 0x7d83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01EA
        gbc.setState(0x1a41, 0x30, 0xf660, 0xa255, 0x397b, 0x3946, 0x1, 0x0);
        gbc.writeMem(0x1a41, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x30);
        EXPECT(gbc.pc(), 0x1a42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01EB
        gbc.setState(0x644d, 0xd4c7, 0x90a0, 0xe35d, 0x63ad, 0xb27c, 0x0, 0x1);
        gbc.writeMem(0x644d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd4c7);
        EXPECT(gbc.pc(), 0x644e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01EC
        gbc.setState(0x8a35, 0x36c5, 0x7320, 0x97af, 0xc518, 0xacff, 0x1, 0x0);
        gbc.writeMem(0x8a35, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x36c5);
        EXPECT(gbc.pc(), 0x8a36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a35), 0x3f);
        // 3F 01ED
        gbc.setState(0xe47, 0xa830, 0x97c0, 0x2090, 0x458b, 0xca3d, 0x1, 0x1);
        gbc.writeMem(0xe47, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa830);
        EXPECT(gbc.pc(), 0xe48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01EE
        gbc.setState(0x264, 0xeaaf, 0x8c70, 0xa2c5, 0x91bc, 0x935d, 0x0, 0x1);
        gbc.writeMem(0x264, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xeaaf);
        EXPECT(gbc.pc(), 0x265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01EF
        gbc.setState(0xc926, 0x6eff, 0x760, 0x241c, 0x6267, 0x4b55, 0x0, 0x1);
        gbc.writeMem(0xc926, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6eff);
        EXPECT(gbc.pc(), 0xc927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc926), 0x3f);
        // 3F 01F0
        gbc.setState(0x97f6, 0x65fd, 0x3870, 0x1b1, 0x9310, 0x7926, 0x1, 0x1);
        gbc.writeMem(0x97f6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x65fd);
        EXPECT(gbc.pc(), 0x97f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f6), 0x3f);
        // 3F 01F1
        gbc.setState(0x403, 0xa249, 0x91a0, 0x389a, 0x615e, 0x4188, 0x0, 0x0);
        gbc.writeMem(0x403, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa249);
        EXPECT(gbc.pc(), 0x404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01F2
        gbc.setState(0x467d, 0x827d, 0xbca0, 0x3ba2, 0x2da6, 0x25e1, 0x0, 0x1);
        gbc.writeMem(0x467d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x827d);
        EXPECT(gbc.pc(), 0x467e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01F3
        gbc.setState(0x1e6a, 0xeb06, 0xb780, 0x9bf, 0x94ac, 0xdc0e, 0x1, 0x1);
        gbc.writeMem(0x1e6a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xeb06);
        EXPECT(gbc.pc(), 0x1e6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01F4
        gbc.setState(0x152a, 0x8728, 0xb910, 0xf003, 0x5d62, 0x16bb, 0x0, 0x0);
        gbc.writeMem(0x152a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8728);
        EXPECT(gbc.pc(), 0x152b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01F5
        gbc.setState(0xc34f, 0x8a13, 0x7200, 0xec22, 0x8a03, 0x9137, 0x1, 0x1);
        gbc.writeMem(0xc34f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8a13);
        EXPECT(gbc.pc(), 0xc350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34f), 0x3f);
        // 3F 01F6
        gbc.setState(0x23b9, 0xbbed, 0x9120, 0x66df, 0xc63c, 0x47a1, 0x1, 0x1);
        gbc.writeMem(0x23b9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xbbed);
        EXPECT(gbc.pc(), 0x23ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01F7
        gbc.setState(0xef47, 0x460f, 0x16c0, 0xf968, 0x12a7, 0xc847, 0x0, 0x1);
        gbc.writeMem(0xef47, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x460f);
        EXPECT(gbc.pc(), 0xef48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef47), 0x3f);
        // 3F 01F8
        gbc.setState(0x6694, 0x3b34, 0xcf70, 0x15fb, 0x7b95, 0x9bcd, 0x0, 0x0);
        gbc.writeMem(0x6694, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3b34);
        EXPECT(gbc.pc(), 0x6695);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01F9
        gbc.setState(0xc10, 0xafe0, 0x9e60, 0x3f20, 0x4732, 0x6f9a, 0x0, 0x0);
        gbc.writeMem(0xc10, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xafe0);
        EXPECT(gbc.pc(), 0xc11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01FA
        gbc.setState(0x76fa, 0xc0d3, 0x2a20, 0xcf91, 0x3271, 0xe4fd, 0x0, 0x0);
        gbc.writeMem(0x76fa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc0d3);
        EXPECT(gbc.pc(), 0x76fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 01FB
        gbc.setState(0x4f8e, 0x84e5, 0x7610, 0x5788, 0xfe51, 0xd4cf, 0x1, 0x1);
        gbc.writeMem(0x4f8e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x84e5);
        EXPECT(gbc.pc(), 0x4f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 01FC
        gbc.setState(0x8dbc, 0x782b, 0xe8e0, 0x39f7, 0x628d, 0x7cd4, 0x1, 0x1);
        gbc.writeMem(0x8dbc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x782b);
        EXPECT(gbc.pc(), 0x8dbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dbc), 0x3f);
        // 3F 01FD
        gbc.setState(0xc5c8, 0x4433, 0xda30, 0x98b7, 0xa68b, 0xf06, 0x0, 0x1);
        gbc.writeMem(0xc5c8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4433);
        EXPECT(gbc.pc(), 0xc5c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c8), 0x3f);
        // 3F 01FE
        gbc.setState(0x9a1b, 0x2264, 0x6090, 0x42e8, 0x84f, 0xd058, 0x0, 0x1);
        gbc.writeMem(0x9a1b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2264);
        EXPECT(gbc.pc(), 0x9a1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a1b), 0x3f);
        // 3F 01FF
        gbc.setState(0x2f47, 0x4cda, 0xefe0, 0xb69c, 0xe17b, 0xc59f, 0x1, 0x1);
        gbc.writeMem(0x2f47, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4cda);
        EXPECT(gbc.pc(), 0x2f48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0200
        gbc.setState(0x2450, 0x6d91, 0x1640, 0x6e5b, 0x9723, 0x4e3f, 0x0, 0x1);
        gbc.writeMem(0x2450, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6d91);
        EXPECT(gbc.pc(), 0x2451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0201
        gbc.setState(0xac00, 0x3aca, 0x50, 0xb79c, 0xae21, 0x3aee, 0x1, 0x1);
        gbc.writeMem(0xac00, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3aca);
        EXPECT(gbc.pc(), 0xac01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac00), 0x3f);
        // 3F 0202
        gbc.setState(0x32e4, 0x7299, 0xd030, 0x1988, 0x19ab, 0x38c9, 0x1, 0x0);
        gbc.writeMem(0x32e4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7299);
        EXPECT(gbc.pc(), 0x32e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0203
        gbc.setState(0x8a45, 0x3032, 0xce30, 0xfa60, 0xf9b1, 0xb2e7, 0x0, 0x0);
        gbc.writeMem(0x8a45, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3032);
        EXPECT(gbc.pc(), 0x8a46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a45), 0x3f);
        // 3F 0204
        gbc.setState(0x9171, 0xa2bc, 0x2030, 0xec13, 0x394d, 0x7f95, 0x1, 0x1);
        gbc.writeMem(0x9171, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa2bc);
        EXPECT(gbc.pc(), 0x9172);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9171), 0x3f);
        // 3F 0205
        gbc.setState(0x8d2f, 0xe14c, 0x2740, 0xbc6, 0x417b, 0x2880, 0x0, 0x0);
        gbc.writeMem(0x8d2f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe14c);
        EXPECT(gbc.pc(), 0x8d30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d2f), 0x3f);
        // 3F 0206
        gbc.setState(0x5f2, 0xaa5e, 0xc9d0, 0x7551, 0x6a95, 0x6026, 0x1, 0x0);
        gbc.writeMem(0x5f2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xaa5e);
        EXPECT(gbc.pc(), 0x5f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0207
        gbc.setState(0x598e, 0xc596, 0x66f0, 0xb8d7, 0x813c, 0x629, 0x1, 0x0);
        gbc.writeMem(0x598e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc596);
        EXPECT(gbc.pc(), 0x598f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0208
        gbc.setState(0xe899, 0x9dd2, 0x600, 0x2fb7, 0x64f7, 0x3d7f, 0x1, 0x0);
        gbc.writeMem(0xe899, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9dd2);
        EXPECT(gbc.pc(), 0xe89a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe899), 0x3f);
        // 3F 0209
        gbc.setState(0xa30, 0x7727, 0x19d0, 0x8357, 0xab65, 0x9b86, 0x1, 0x1);
        gbc.writeMem(0xa30, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7727);
        EXPECT(gbc.pc(), 0xa31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 020A
        gbc.setState(0xdae, 0x7ddf, 0x3170, 0x7c21, 0xaeed, 0x54c5, 0x0, 0x0);
        gbc.writeMem(0xdae, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7ddf);
        EXPECT(gbc.pc(), 0xdaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 020B
        gbc.setState(0x90a5, 0x8ba8, 0xdd90, 0xdf78, 0x3a83, 0x5497, 0x1, 0x0);
        gbc.writeMem(0x90a5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x8ba8);
        EXPECT(gbc.pc(), 0x90a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90a5), 0x3f);
        // 3F 020C
        gbc.setState(0xaf70, 0xed3b, 0x1910, 0x7059, 0xe835, 0x297e, 0x1, 0x0);
        gbc.writeMem(0xaf70, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xed3b);
        EXPECT(gbc.pc(), 0xaf71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf70), 0x3f);
        // 3F 020D
        gbc.setState(0x4080, 0x1a83, 0x7ac0, 0x78f4, 0xbafa, 0x2aae, 0x1, 0x0);
        gbc.writeMem(0x4080, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1a83);
        EXPECT(gbc.pc(), 0x4081);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 020E
        gbc.setState(0x1896, 0x6494, 0x30a0, 0x62f6, 0x9845, 0x9118, 0x1, 0x1);
        gbc.writeMem(0x1896, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6494);
        EXPECT(gbc.pc(), 0x1897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 020F
        gbc.setState(0x5798, 0xf8c8, 0xcb30, 0xfa4c, 0xa11f, 0x94b5, 0x1, 0x1);
        gbc.writeMem(0x5798, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf8c8);
        EXPECT(gbc.pc(), 0x5799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0210
        gbc.setState(0x9987, 0xd571, 0xdf00, 0x9068, 0xb4ff, 0xa965, 0x1, 0x1);
        gbc.writeMem(0x9987, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd571);
        EXPECT(gbc.pc(), 0x9988);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9987), 0x3f);
        // 3F 0211
        gbc.setState(0xeb77, 0x3401, 0xa3b0, 0x4c3b, 0xb6d, 0x4276, 0x0, 0x0);
        gbc.writeMem(0xeb77, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3401);
        EXPECT(gbc.pc(), 0xeb78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb77), 0x3f);
        // 3F 0212
        gbc.setState(0x5240, 0x7245, 0xefc0, 0x2b95, 0x3705, 0x2cd8, 0x0, 0x0);
        gbc.writeMem(0x5240, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7245);
        EXPECT(gbc.pc(), 0x5241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0213
        gbc.setState(0x1403, 0x5537, 0xf0f0, 0xbd37, 0xa842, 0x2359, 0x1, 0x1);
        gbc.writeMem(0x1403, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5537);
        EXPECT(gbc.pc(), 0x1404);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0214
        gbc.setState(0xed92, 0x4303, 0x95d0, 0x334e, 0x56c9, 0x1dbe, 0x1, 0x0);
        gbc.writeMem(0xed92, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4303);
        EXPECT(gbc.pc(), 0xed93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed92), 0x3f);
        // 3F 0215
        gbc.setState(0x66c, 0xfe1f, 0x1f80, 0xf821, 0x190d, 0xdc3d, 0x0, 0x0);
        gbc.writeMem(0x66c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfe1f);
        EXPECT(gbc.pc(), 0x66d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0216
        gbc.setState(0x9187, 0x737, 0x54d0, 0xe7a8, 0xb4b8, 0x22cd, 0x1, 0x0);
        gbc.writeMem(0x9187, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x737);
        EXPECT(gbc.pc(), 0x9188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9187), 0x3f);
        // 3F 0217
        gbc.setState(0x2559, 0x6cf9, 0x7220, 0xbacf, 0x67e3, 0x7941, 0x1, 0x1);
        gbc.writeMem(0x2559, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6cf9);
        EXPECT(gbc.pc(), 0x255a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0218
        gbc.setState(0xc3ca, 0x287e, 0xa6f0, 0xfe65, 0xcc78, 0x1e84, 0x1, 0x0);
        gbc.writeMem(0xc3ca, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x287e);
        EXPECT(gbc.pc(), 0xc3cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ca), 0x3f);
        // 3F 0219
        gbc.setState(0x9bf0, 0x5650, 0xa490, 0x47ca, 0x2219, 0xc36f, 0x1, 0x1);
        gbc.writeMem(0x9bf0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5650);
        EXPECT(gbc.pc(), 0x9bf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf0), 0x3f);
        // 3F 021A
        gbc.setState(0xaf7b, 0x5b73, 0x12e0, 0x7a3c, 0xc8b, 0x8134, 0x1, 0x1);
        gbc.writeMem(0xaf7b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5b73);
        EXPECT(gbc.pc(), 0xaf7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf7b), 0x3f);
        // 3F 021B
        gbc.setState(0x44c3, 0x307c, 0xbf70, 0xfd04, 0xb346, 0x51ee, 0x0, 0x0);
        gbc.writeMem(0x44c3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x307c);
        EXPECT(gbc.pc(), 0x44c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 021C
        gbc.setState(0x3ba5, 0x9fa7, 0xb330, 0xff7d, 0x5cb9, 0x2b1, 0x1, 0x0);
        gbc.writeMem(0x3ba5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9fa7);
        EXPECT(gbc.pc(), 0x3ba6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 021D
        gbc.setState(0x944f, 0x8671, 0x9b80, 0x276f, 0xfac3, 0x6f87, 0x1, 0x1);
        gbc.writeMem(0x944f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8671);
        EXPECT(gbc.pc(), 0x9450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x944f), 0x3f);
        // 3F 021E
        gbc.setState(0x8526, 0x7b9d, 0x2ce0, 0xbd96, 0x2886, 0x68f2, 0x1, 0x1);
        gbc.writeMem(0x8526, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7b9d);
        EXPECT(gbc.pc(), 0x8527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8526), 0x3f);
        // 3F 021F
        gbc.setState(0xa0c5, 0x2a0d, 0xfb0, 0xcf80, 0x1773, 0xb2a8, 0x0, 0x0);
        gbc.writeMem(0xa0c5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2a0d);
        EXPECT(gbc.pc(), 0xa0c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c5), 0x3f);
        // 3F 0220
        gbc.setState(0x992f, 0x6d99, 0xf300, 0xa79e, 0x1660, 0x6cf2, 0x0, 0x0);
        gbc.writeMem(0x992f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6d99);
        EXPECT(gbc.pc(), 0x9930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x992f), 0x3f);
        // 3F 0221
        gbc.setState(0xc726, 0x94fd, 0xfd50, 0xaecb, 0xb093, 0x3806, 0x0, 0x1);
        gbc.writeMem(0xc726, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x94fd);
        EXPECT(gbc.pc(), 0xc727);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc726), 0x3f);
        // 3F 0222
        gbc.setState(0x10b2, 0xfa80, 0x5700, 0x84b1, 0xe794, 0xa1af, 0x0, 0x1);
        gbc.writeMem(0x10b2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xfa80);
        EXPECT(gbc.pc(), 0x10b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0224
        gbc.setState(0xdd1b, 0x466c, 0x34c0, 0x74d7, 0x466d, 0xd51a, 0x1, 0x1);
        gbc.writeMem(0xdd1b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x466c);
        EXPECT(gbc.pc(), 0xdd1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd1b), 0x3f);
        // 3F 0225
        gbc.setState(0x4b0e, 0xa26, 0xdbf0, 0xb7bd, 0xe9e9, 0x6033, 0x1, 0x0);
        gbc.writeMem(0x4b0e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa26);
        EXPECT(gbc.pc(), 0x4b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0226
        gbc.setState(0x81c0, 0xfd74, 0xf370, 0x7c79, 0xd41a, 0x55d5, 0x0, 0x0);
        gbc.writeMem(0x81c0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xfd74);
        EXPECT(gbc.pc(), 0x81c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c0), 0x3f);
        // 3F 0227
        gbc.setState(0x1ce2, 0x9de3, 0xd8b0, 0x7c0a, 0xc2e8, 0x542a, 0x0, 0x1);
        gbc.writeMem(0x1ce2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9de3);
        EXPECT(gbc.pc(), 0x1ce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0228
        gbc.setState(0x62cf, 0x4450, 0x4f40, 0x1b58, 0xabfe, 0xe24b, 0x0, 0x1);
        gbc.writeMem(0x62cf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4450);
        EXPECT(gbc.pc(), 0x62d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0229
        gbc.setState(0x60dd, 0xd065, 0x5ae0, 0x4bba, 0xc0c, 0x5e73, 0x1, 0x1);
        gbc.writeMem(0x60dd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd065);
        EXPECT(gbc.pc(), 0x60de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 022A
        gbc.setState(0xd04e, 0xe44, 0x2f00, 0xb5, 0x844f, 0xc437, 0x1, 0x1);
        gbc.writeMem(0xd04e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xe44);
        EXPECT(gbc.pc(), 0xd04f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd04e), 0x3f);
        // 3F 022B
        gbc.setState(0xc300, 0x4f98, 0x1b30, 0x8acc, 0x13ac, 0x8ada, 0x1, 0x0);
        gbc.writeMem(0xc300, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4f98);
        EXPECT(gbc.pc(), 0xc301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc300), 0x3f);
        // 3F 022C
        gbc.setState(0x2a6f, 0x8b7d, 0xe660, 0xc12d, 0x51ed, 0x50f2, 0x0, 0x0);
        gbc.writeMem(0x2a6f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x8b7d);
        EXPECT(gbc.pc(), 0x2a70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 022D
        gbc.setState(0xc639, 0x260, 0x3250, 0xa891, 0x4443, 0x3d9, 0x1, 0x0);
        gbc.writeMem(0xc639, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x260);
        EXPECT(gbc.pc(), 0xc63a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc639), 0x3f);
        // 3F 022E
        gbc.setState(0x143c, 0xb9fe, 0x6140, 0x102, 0x6156, 0x13cb, 0x0, 0x0);
        gbc.writeMem(0x143c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb9fe);
        EXPECT(gbc.pc(), 0x143d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0230
        gbc.setState(0xca53, 0x1c6d, 0x4500, 0x2e79, 0xd643, 0x383b, 0x1, 0x0);
        gbc.writeMem(0xca53, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1c6d);
        EXPECT(gbc.pc(), 0xca54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca53), 0x3f);
        // 3F 0231
        gbc.setState(0x637c, 0x7adb, 0x4730, 0x45f3, 0x873c, 0x39f0, 0x1, 0x0);
        gbc.writeMem(0x637c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7adb);
        EXPECT(gbc.pc(), 0x637d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0232
        gbc.setState(0x9378, 0x6c8d, 0x5990, 0xec31, 0xb452, 0xf803, 0x0, 0x1);
        gbc.writeMem(0x9378, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6c8d);
        EXPECT(gbc.pc(), 0x9379);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9378), 0x3f);
        // 3F 0233
        gbc.setState(0xefcb, 0xa90a, 0x57c0, 0x5b79, 0xdfde, 0xb9ef, 0x1, 0x1);
        gbc.writeMem(0xefcb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xa90a);
        EXPECT(gbc.pc(), 0xefcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefcb), 0x3f);
        // 3F 0234
        gbc.setState(0x640e, 0xfddc, 0x4410, 0xb71d, 0x20f2, 0x21a8, 0x1, 0x0);
        gbc.writeMem(0x640e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xfddc);
        EXPECT(gbc.pc(), 0x640f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0235
        gbc.setState(0x6efd, 0x441b, 0xb450, 0xf6e9, 0x582d, 0xb591, 0x0, 0x0);
        gbc.writeMem(0x6efd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x441b);
        EXPECT(gbc.pc(), 0x6efe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0236
        gbc.setState(0xaecf, 0xb35c, 0xc090, 0x4132, 0x1f80, 0xf6a, 0x1, 0x1);
        gbc.writeMem(0xaecf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb35c);
        EXPECT(gbc.pc(), 0xaed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaecf), 0x3f);
        // 3F 0237
        gbc.setState(0x3f6a, 0x57ba, 0xee90, 0x1f6a, 0x8ca5, 0x2d18, 0x0, 0x0);
        gbc.writeMem(0x3f6a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x57ba);
        EXPECT(gbc.pc(), 0x3f6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0238
        gbc.setState(0x77b9, 0x2ba8, 0x2dc0, 0xc9, 0x79c, 0x2f73, 0x1, 0x1);
        gbc.writeMem(0x77b9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2ba8);
        EXPECT(gbc.pc(), 0x77ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0239
        gbc.setState(0xacda, 0xa485, 0xf720, 0xa809, 0xc1ca, 0x82e5, 0x1, 0x1);
        gbc.writeMem(0xacda, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa485);
        EXPECT(gbc.pc(), 0xacdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacda), 0x3f);
        // 3F 023A
        gbc.setState(0x5afb, 0x95ae, 0x88d0, 0x45da, 0xe422, 0x54d6, 0x1, 0x1);
        gbc.writeMem(0x5afb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x95ae);
        EXPECT(gbc.pc(), 0x5afc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 023B
        gbc.setState(0x4927, 0x7273, 0xb390, 0xa2e, 0xdeb6, 0xd7f3, 0x1, 0x0);
        gbc.writeMem(0x4927, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7273);
        EXPECT(gbc.pc(), 0x4928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 023C
        gbc.setState(0xd916, 0x2a3e, 0xebe0, 0x8916, 0xbb5d, 0x10a3, 0x0, 0x0);
        gbc.writeMem(0xd916, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2a3e);
        EXPECT(gbc.pc(), 0xd917);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd916), 0x3f);
        // 3F 023D
        gbc.setState(0x3aaa, 0x190e, 0x58e0, 0xdd62, 0x4615, 0x183c, 0x1, 0x0);
        gbc.writeMem(0x3aaa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x190e);
        EXPECT(gbc.pc(), 0x3aab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 023F
        gbc.setState(0x3acc, 0xa896, 0xbbe0, 0x90b, 0x207a, 0x216e, 0x1, 0x0);
        gbc.writeMem(0x3acc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa896);
        EXPECT(gbc.pc(), 0x3acd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0240
        gbc.setState(0x4850, 0xc4da, 0x8820, 0x6fa5, 0x4d0f, 0x8530, 0x0, 0x0);
        gbc.writeMem(0x4850, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc4da);
        EXPECT(gbc.pc(), 0x4851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0241
        gbc.setState(0x8e2b, 0x24db, 0x7a40, 0x466d, 0xb6db, 0x1e70, 0x1, 0x0);
        gbc.writeMem(0x8e2b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x24db);
        EXPECT(gbc.pc(), 0x8e2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e2b), 0x3f);
        // 3F 0242
        gbc.setState(0xc68a, 0x2f74, 0x55d0, 0xf480, 0x80ec, 0x43d9, 0x1, 0x0);
        gbc.writeMem(0xc68a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2f74);
        EXPECT(gbc.pc(), 0xc68b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc68a), 0x3f);
        // 3F 0243
        gbc.setState(0x1756, 0x8843, 0x26f0, 0x6154, 0xfe07, 0x4c68, 0x0, 0x0);
        gbc.writeMem(0x1756, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8843);
        EXPECT(gbc.pc(), 0x1757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0244
        gbc.setState(0xcba5, 0x5664, 0xd980, 0x26ab, 0x203b, 0x21a5, 0x0, 0x0);
        gbc.writeMem(0xcba5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5664);
        EXPECT(gbc.pc(), 0xcba6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba5), 0x3f);
        // 3F 0245
        gbc.setState(0x4243, 0xaada, 0xfa0, 0x2e77, 0x40c4, 0x83d3, 0x0, 0x0);
        gbc.writeMem(0x4243, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xaada);
        EXPECT(gbc.pc(), 0x4244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0246
        gbc.setState(0xdb2, 0xfd5, 0x5100, 0x64ea, 0xf1b2, 0xd7ab, 0x1, 0x0);
        gbc.writeMem(0xdb2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xfd5);
        EXPECT(gbc.pc(), 0xdb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0247
        gbc.setState(0x94e0, 0xea26, 0x5a40, 0x27c4, 0x6efb, 0x2806, 0x0, 0x1);
        gbc.writeMem(0x94e0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xea26);
        EXPECT(gbc.pc(), 0x94e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94e0), 0x3f);
        // 3F 0248
        gbc.setState(0x7c9d, 0x8522, 0xe210, 0x4ddd, 0x341d, 0x63aa, 0x1, 0x1);
        gbc.writeMem(0x7c9d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8522);
        EXPECT(gbc.pc(), 0x7c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0249
        gbc.setState(0x77ac, 0x68eb, 0x1980, 0xcc45, 0x49e4, 0x539a, 0x1, 0x1);
        gbc.writeMem(0x77ac, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x68eb);
        EXPECT(gbc.pc(), 0x77ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 024A
        gbc.setState(0xbbd0, 0x6345, 0x190, 0xa655, 0xb3ce, 0x30af, 0x1, 0x1);
        gbc.writeMem(0xbbd0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6345);
        EXPECT(gbc.pc(), 0xbbd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbd0), 0x3f);
        // 3F 024B
        gbc.setState(0xb52a, 0x9dac, 0x1320, 0x5a6e, 0x9363, 0xd0f2, 0x1, 0x1);
        gbc.writeMem(0xb52a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9dac);
        EXPECT(gbc.pc(), 0xb52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb52a), 0x3f);
        // 3F 024C
        gbc.setState(0x80c5, 0xbf68, 0xf160, 0x2fce, 0x23b5, 0xbf92, 0x0, 0x0);
        gbc.writeMem(0x80c5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xbf68);
        EXPECT(gbc.pc(), 0x80c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c5), 0x3f);
        // 3F 024D
        gbc.setState(0x4ebd, 0xc1d4, 0x2ee0, 0xd709, 0x176b, 0x69af, 0x1, 0x1);
        gbc.writeMem(0x4ebd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xc1d4);
        EXPECT(gbc.pc(), 0x4ebe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 024E
        gbc.setState(0x4ae2, 0xf5a5, 0xae80, 0x9549, 0xf4d1, 0xb061, 0x1, 0x1);
        gbc.writeMem(0x4ae2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf5a5);
        EXPECT(gbc.pc(), 0x4ae3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 024F
        gbc.setState(0x5fbf, 0x86db, 0x4650, 0x4bcc, 0x4789, 0xf3e4, 0x0, 0x1);
        gbc.writeMem(0x5fbf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x86db);
        EXPECT(gbc.pc(), 0x5fc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0251
        gbc.setState(0xb190, 0x8c2e, 0xc200, 0xec91, 0x99e6, 0xe40, 0x1, 0x1);
        gbc.writeMem(0xb190, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8c2e);
        EXPECT(gbc.pc(), 0xb191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb190), 0x3f);
        // 3F 0252
        gbc.setState(0xcfaf, 0x8571, 0x3e00, 0x214d, 0xff8, 0xd13e, 0x1, 0x0);
        gbc.writeMem(0xcfaf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8571);
        EXPECT(gbc.pc(), 0xcfb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfaf), 0x3f);
        // 3F 0253
        gbc.setState(0x2e18, 0x1de6, 0xccb0, 0xa001, 0xa023, 0x4e66, 0x1, 0x0);
        gbc.writeMem(0x2e18, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1de6);
        EXPECT(gbc.pc(), 0x2e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0254
        gbc.setState(0x1b27, 0xf94, 0x5770, 0xe55, 0xd209, 0x4bcb, 0x0, 0x0);
        gbc.writeMem(0x1b27, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf94);
        EXPECT(gbc.pc(), 0x1b28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0255
        gbc.setState(0xcb95, 0xff7c, 0x11b0, 0x1500, 0x60b2, 0x8288, 0x1, 0x1);
        gbc.writeMem(0xcb95, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xff7c);
        EXPECT(gbc.pc(), 0xcb96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb95), 0x3f);
        // 3F 0256
        gbc.setState(0xe06, 0x8803, 0xe320, 0x6150, 0x5e1e, 0x9345, 0x1, 0x1);
        gbc.writeMem(0xe06, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8803);
        EXPECT(gbc.pc(), 0xe07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0257
        gbc.setState(0x31af, 0x32d4, 0xd00, 0xeecf, 0xb2a8, 0x7abf, 0x0, 0x0);
        gbc.writeMem(0x31af, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x32d4);
        EXPECT(gbc.pc(), 0x31b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0258
        gbc.setState(0x1160, 0xf417, 0x2ce0, 0x2bc2, 0x8240, 0xb4b2, 0x0, 0x1);
        gbc.writeMem(0x1160, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf417);
        EXPECT(gbc.pc(), 0x1161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0259
        gbc.setState(0x838d, 0x5c14, 0x9740, 0x88c3, 0xe5a1, 0x61f6, 0x1, 0x1);
        gbc.writeMem(0x838d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5c14);
        EXPECT(gbc.pc(), 0x838e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x838d), 0x3f);
        // 3F 025A
        gbc.setState(0x8403, 0x8af6, 0x5890, 0x4e6d, 0xa3ca, 0xeea7, 0x0, 0x0);
        gbc.writeMem(0x8403, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8af6);
        EXPECT(gbc.pc(), 0x8404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8403), 0x3f);
        // 3F 025B
        gbc.setState(0x2d40, 0x9f53, 0xb2c0, 0xa614, 0xcee5, 0x8686, 0x1, 0x1);
        gbc.writeMem(0x2d40, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9f53);
        EXPECT(gbc.pc(), 0x2d41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 025C
        gbc.setState(0x89c7, 0x55db, 0x3300, 0x6376, 0x2d59, 0xc13f, 0x0, 0x0);
        gbc.writeMem(0x89c7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x55db);
        EXPECT(gbc.pc(), 0x89c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c7), 0x3f);
        // 3F 025D
        gbc.setState(0x6c50, 0x8566, 0xa270, 0xe76, 0x698b, 0x219b, 0x1, 0x0);
        gbc.writeMem(0x6c50, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8566);
        EXPECT(gbc.pc(), 0x6c51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 025E
        gbc.setState(0x56ff, 0x1ed2, 0xfba0, 0x4358, 0x2494, 0x2296, 0x0, 0x0);
        gbc.writeMem(0x56ff, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1ed2);
        EXPECT(gbc.pc(), 0x5700);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0260
        gbc.setState(0x8785, 0xc834, 0x25f0, 0x1c77, 0x8774, 0xd717, 0x1, 0x1);
        gbc.writeMem(0x8785, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc834);
        EXPECT(gbc.pc(), 0x8786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8785), 0x3f);
        // 3F 0261
        gbc.setState(0x852c, 0x658d, 0x48a0, 0x3905, 0x8d09, 0x349f, 0x1, 0x1);
        gbc.writeMem(0x852c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x658d);
        EXPECT(gbc.pc(), 0x852d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852c), 0x3f);
        // 3F 0262
        gbc.setState(0x8bf, 0x8e36, 0x9b20, 0xf44a, 0x6471, 0x6e84, 0x1, 0x0);
        gbc.writeMem(0x8bf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8e36);
        EXPECT(gbc.pc(), 0x8c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0263
        gbc.setState(0xcb3e, 0x59f, 0x2af0, 0x4734, 0x8d25, 0x42ed, 0x1, 0x1);
        gbc.writeMem(0xcb3e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x59f);
        EXPECT(gbc.pc(), 0xcb3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb3e), 0x3f);
        // 3F 0264
        gbc.setState(0x3c0a, 0xb787, 0x8bb0, 0x7f16, 0x9cdd, 0x9e9b, 0x1, 0x0);
        gbc.writeMem(0x3c0a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb787);
        EXPECT(gbc.pc(), 0x3c0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0265
        gbc.setState(0x48e4, 0xddbd, 0xc760, 0xe373, 0x58fe, 0x9126, 0x0, 0x0);
        gbc.writeMem(0x48e4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xddbd);
        EXPECT(gbc.pc(), 0x48e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0266
        gbc.setState(0xc57b, 0x43de, 0xc810, 0x496a, 0x2e17, 0x7f29, 0x1, 0x0);
        gbc.writeMem(0xc57b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x43de);
        EXPECT(gbc.pc(), 0xc57c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc57b), 0x3f);
        // 3F 0267
        gbc.setState(0x9ebf, 0x6021, 0x5800, 0xcbdc, 0x3998, 0xeeeb, 0x0, 0x0);
        gbc.writeMem(0x9ebf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6021);
        EXPECT(gbc.pc(), 0x9ec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ebf), 0x3f);
        // 3F 0268
        gbc.setState(0xbd70, 0x5029, 0x49f0, 0x20fa, 0x7fa2, 0x42e1, 0x1, 0x0);
        gbc.writeMem(0xbd70, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5029);
        EXPECT(gbc.pc(), 0xbd71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd70), 0x3f);
        // 3F 0269
        gbc.setState(0x821f, 0x80c1, 0xb590, 0x8f48, 0xc262, 0x5e47, 0x1, 0x0);
        gbc.writeMem(0x821f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x80c1);
        EXPECT(gbc.pc(), 0x8220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821f), 0x3f);
        // 3F 026A
        gbc.setState(0x3e4e, 0x26a9, 0xc350, 0x70b4, 0x4eef, 0xa14, 0x0, 0x1);
        gbc.writeMem(0x3e4e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x26a9);
        EXPECT(gbc.pc(), 0x3e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 026B
        gbc.setState(0x96f6, 0xbcef, 0xdfc0, 0xe478, 0xcfb4, 0x8a02, 0x0, 0x1);
        gbc.writeMem(0x96f6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xbcef);
        EXPECT(gbc.pc(), 0x96f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96f6), 0x3f);
        // 3F 026C
        gbc.setState(0xdb61, 0xf5d8, 0x91a0, 0xe090, 0x872f, 0x8cdb, 0x1, 0x0);
        gbc.writeMem(0xdb61, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf5d8);
        EXPECT(gbc.pc(), 0xdb62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb61), 0x3f);
        // 3F 026D
        gbc.setState(0x91ea, 0xc6ac, 0xa720, 0xdee8, 0x8da7, 0xbfc4, 0x1, 0x0);
        gbc.writeMem(0x91ea, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc6ac);
        EXPECT(gbc.pc(), 0x91eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ea), 0x3f);
        // 3F 026E
        gbc.setState(0xe619, 0xf7a2, 0x14c0, 0x79e1, 0xf54, 0x3f65, 0x0, 0x1);
        gbc.writeMem(0xe619, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf7a2);
        EXPECT(gbc.pc(), 0xe61a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe619), 0x3f);
        // 3F 026F
        gbc.setState(0x63bd, 0xba74, 0x2190, 0x258, 0x6bdd, 0xafce, 0x0, 0x0);
        gbc.writeMem(0x63bd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xba74);
        EXPECT(gbc.pc(), 0x63be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0271
        gbc.setState(0x5949, 0x13b6, 0x1e00, 0x7f0e, 0x7e7d, 0x4cf0, 0x0, 0x0);
        gbc.writeMem(0x5949, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x13b6);
        EXPECT(gbc.pc(), 0x594a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0272
        gbc.setState(0xbc4a, 0x2a95, 0xa9e0, 0x2f5e, 0xba09, 0xaa2, 0x0, 0x0);
        gbc.writeMem(0xbc4a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2a95);
        EXPECT(gbc.pc(), 0xbc4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc4a), 0x3f);
        // 3F 0274
        gbc.setState(0x2bfc, 0xb5fa, 0x75f0, 0x740f, 0x250a, 0x65e4, 0x1, 0x1);
        gbc.writeMem(0x2bfc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb5fa);
        EXPECT(gbc.pc(), 0x2bfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0275
        gbc.setState(0x999c, 0x5755, 0xf30, 0xf9b8, 0x13b5, 0x1d30, 0x0, 0x0);
        gbc.writeMem(0x999c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5755);
        EXPECT(gbc.pc(), 0x999d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x999c), 0x3f);
        // 3F 0276
        gbc.setState(0xef69, 0xbfd0, 0xcc90, 0x64fa, 0x9638, 0x9afb, 0x1, 0x0);
        gbc.writeMem(0xef69, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xbfd0);
        EXPECT(gbc.pc(), 0xef6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef69), 0x3f);
        // 3F 0277
        gbc.setState(0xcb4a, 0xd126, 0x75b0, 0xfd4b, 0xca20, 0x11c5, 0x1, 0x1);
        gbc.writeMem(0xcb4a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd126);
        EXPECT(gbc.pc(), 0xcb4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb4a), 0x3f);
        // 3F 0278
        gbc.setState(0x717d, 0x86c4, 0xecd0, 0xaeb6, 0xf3a0, 0xa3aa, 0x0, 0x0);
        gbc.writeMem(0x717d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x86c4);
        EXPECT(gbc.pc(), 0x717e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 027A
        gbc.setState(0xd23a, 0xa046, 0x63c0, 0x1f39, 0x10e5, 0xd6c6, 0x1, 0x0);
        gbc.writeMem(0xd23a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa046);
        EXPECT(gbc.pc(), 0xd23b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd23a), 0x3f);
        // 3F 027B
        gbc.setState(0x6ee3, 0xcb78, 0xfc10, 0x205c, 0x9692, 0x2afa, 0x1, 0x1);
        gbc.writeMem(0x6ee3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xcb78);
        EXPECT(gbc.pc(), 0x6ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 027C
        gbc.setState(0x9890, 0x3b58, 0xe0b0, 0xda7c, 0xea23, 0x9a9c, 0x1, 0x0);
        gbc.writeMem(0x9890, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3b58);
        EXPECT(gbc.pc(), 0x9891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9890), 0x3f);
        // 3F 027D
        gbc.setState(0x9969, 0x32a7, 0xe340, 0x435, 0x3252, 0x75ef, 0x1, 0x1);
        gbc.writeMem(0x9969, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x32a7);
        EXPECT(gbc.pc(), 0x996a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9969), 0x3f);
        // 3F 027F
        gbc.setState(0xb11e, 0x6cc0, 0x2c30, 0xafd0, 0x9e41, 0x4618, 0x0, 0x1);
        gbc.writeMem(0xb11e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6cc0);
        EXPECT(gbc.pc(), 0xb11f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11e), 0x3f);
        // 3F 0280
        gbc.setState(0xafdd, 0xa769, 0x3720, 0x267f, 0x44ee, 0xc98b, 0x1, 0x0);
        gbc.writeMem(0xafdd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa769);
        EXPECT(gbc.pc(), 0xafde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafdd), 0x3f);
        // 3F 0281
        gbc.setState(0x46db, 0x270b, 0x48e0, 0x65ad, 0x11fe, 0x638f, 0x0, 0x0);
        gbc.writeMem(0x46db, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x270b);
        EXPECT(gbc.pc(), 0x46dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0283
        gbc.setState(0xd778, 0x7cd9, 0xae10, 0x3018, 0xdb6e, 0x34fb, 0x1, 0x0);
        gbc.writeMem(0xd778, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7cd9);
        EXPECT(gbc.pc(), 0xd779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd778), 0x3f);
        // 3F 0284
        gbc.setState(0xc95b, 0xab3d, 0xfe0, 0xa750, 0xdf0b, 0x6522, 0x0, 0x1);
        gbc.writeMem(0xc95b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xab3d);
        EXPECT(gbc.pc(), 0xc95c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc95b), 0x3f);
        // 3F 0285
        gbc.setState(0x9aa, 0x9fbe, 0x2be0, 0x1887, 0x7984, 0xc943, 0x0, 0x0);
        gbc.writeMem(0x9aa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9fbe);
        EXPECT(gbc.pc(), 0x9ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0286
        gbc.setState(0x9e71, 0x964b, 0x7ae0, 0x1273, 0x8b3d, 0x24c1, 0x1, 0x0);
        gbc.writeMem(0x9e71, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x964b);
        EXPECT(gbc.pc(), 0x9e72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e71), 0x3f);
        // 3F 0287
        gbc.setState(0xbee8, 0x6e85, 0x5530, 0xf74b, 0x6107, 0xd16b, 0x1, 0x1);
        gbc.writeMem(0xbee8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6e85);
        EXPECT(gbc.pc(), 0xbee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee8), 0x3f);
        // 3F 0288
        gbc.setState(0x5b35, 0xbf49, 0xeee0, 0xbbf9, 0xcb4d, 0xb789, 0x1, 0x1);
        gbc.writeMem(0x5b35, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbf49);
        EXPECT(gbc.pc(), 0x5b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0289
        gbc.setState(0x6d35, 0xc207, 0xa3c0, 0xe2f3, 0xdd68, 0xb0d0, 0x1, 0x0);
        gbc.writeMem(0x6d35, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc207);
        EXPECT(gbc.pc(), 0x6d36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 028A
        gbc.setState(0x39a6, 0xe3da, 0x4ee0, 0x8833, 0x5eec, 0x61dc, 0x0, 0x0);
        gbc.writeMem(0x39a6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe3da);
        EXPECT(gbc.pc(), 0x39a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 028B
        gbc.setState(0xd798, 0xc42c, 0xc900, 0xe2e4, 0xb08f, 0x43b8, 0x0, 0x0);
        gbc.writeMem(0xd798, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc42c);
        EXPECT(gbc.pc(), 0xd799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd798), 0x3f);
        // 3F 028C
        gbc.setState(0xdb0b, 0x8120, 0xa060, 0x30d5, 0x4f3, 0x3f1, 0x0, 0x1);
        gbc.writeMem(0xdb0b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8120);
        EXPECT(gbc.pc(), 0xdb0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb0b), 0x3f);
        // 3F 028D
        gbc.setState(0xc95d, 0x2c99, 0x8c30, 0x445e, 0xc7e9, 0x8f52, 0x1, 0x1);
        gbc.writeMem(0xc95d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2c99);
        EXPECT(gbc.pc(), 0xc95e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc95d), 0x3f);
        // 3F 028E
        gbc.setState(0x2d4b, 0x773a, 0xfc00, 0x175d, 0x8ab9, 0x837e, 0x1, 0x1);
        gbc.writeMem(0x2d4b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x773a);
        EXPECT(gbc.pc(), 0x2d4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 028F
        gbc.setState(0x8d04, 0xfc46, 0xae70, 0x3920, 0x9955, 0x3211, 0x0, 0x0);
        gbc.writeMem(0x8d04, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xfc46);
        EXPECT(gbc.pc(), 0x8d05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d04), 0x3f);
        // 3F 0290
        gbc.setState(0xa804, 0xd59b, 0xada0, 0xba04, 0x4a00, 0x829d, 0x1, 0x0);
        gbc.writeMem(0xa804, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd59b);
        EXPECT(gbc.pc(), 0xa805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa804), 0x3f);
        // 3F 0292
        gbc.setState(0x8ede, 0x307f, 0xf8a0, 0x7a9a, 0x15d5, 0xf53a, 0x1, 0x0);
        gbc.writeMem(0x8ede, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x307f);
        EXPECT(gbc.pc(), 0x8edf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ede), 0x3f);
        // 3F 0294
        gbc.setState(0x5632, 0x5502, 0x7aa0, 0x459f, 0xa149, 0x3251, 0x0, 0x1);
        gbc.writeMem(0x5632, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5502);
        EXPECT(gbc.pc(), 0x5633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0295
        gbc.setState(0xcb86, 0xc3ee, 0x9460, 0xbadc, 0x76a5, 0x7658, 0x1, 0x1);
        gbc.writeMem(0xcb86, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc3ee);
        EXPECT(gbc.pc(), 0xcb87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb86), 0x3f);
        // 3F 0296
        gbc.setState(0xee90, 0xf550, 0x2fa0, 0x5f04, 0x2867, 0x790c, 0x0, 0x1);
        gbc.writeMem(0xee90, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf550);
        EXPECT(gbc.pc(), 0xee91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee90), 0x3f);
        // 3F 0297
        gbc.setState(0x479b, 0x8ab4, 0x6e70, 0x4ea4, 0x22ab, 0x7919, 0x0, 0x0);
        gbc.writeMem(0x479b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8ab4);
        EXPECT(gbc.pc(), 0x479c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0298
        gbc.setState(0x8c37, 0x9d82, 0x66e0, 0xc793, 0x8c7f, 0x1b54, 0x0, 0x1);
        gbc.writeMem(0x8c37, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9d82);
        EXPECT(gbc.pc(), 0x8c38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c37), 0x3f);
        // 3F 0299
        gbc.setState(0x5794, 0xf7e1, 0x9100, 0xd5df, 0x31d9, 0xc7f4, 0x0, 0x1);
        gbc.writeMem(0x5794, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf7e1);
        EXPECT(gbc.pc(), 0x5795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 029A
        gbc.setState(0xc6a3, 0xd42e, 0x8cb0, 0x9d18, 0x15ab, 0xa8c3, 0x1, 0x0);
        gbc.writeMem(0xc6a3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd42e);
        EXPECT(gbc.pc(), 0xc6a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a3), 0x3f);
        // 3F 029B
        gbc.setState(0x8d1e, 0x67d7, 0x8890, 0x3e59, 0xe69e, 0x47c7, 0x0, 0x1);
        gbc.writeMem(0x8d1e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x67d7);
        EXPECT(gbc.pc(), 0x8d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d1e), 0x3f);
        // 3F 029C
        gbc.setState(0x6102, 0x4444, 0xc4c0, 0x7f26, 0x174e, 0x9386, 0x0, 0x0);
        gbc.writeMem(0x6102, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4444);
        EXPECT(gbc.pc(), 0x6103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 029D
        gbc.setState(0xba7d, 0x8905, 0x9970, 0x72da, 0x8ee9, 0x41b3, 0x0, 0x1);
        gbc.writeMem(0xba7d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8905);
        EXPECT(gbc.pc(), 0xba7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba7d), 0x3f);
        // 3F 029E
        gbc.setState(0x700b, 0xe0c8, 0x5520, 0xb8ff, 0x8db, 0x1152, 0x1, 0x1);
        gbc.writeMem(0x700b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe0c8);
        EXPECT(gbc.pc(), 0x700c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 029F
        gbc.setState(0x17bc, 0xce8a, 0xeec0, 0xef10, 0x9481, 0xaf30, 0x0, 0x0);
        gbc.writeMem(0x17bc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xce8a);
        EXPECT(gbc.pc(), 0x17bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02A0
        gbc.setState(0x6847, 0x18cd, 0x7b20, 0xa97a, 0xa6f7, 0xfc, 0x0, 0x0);
        gbc.writeMem(0x6847, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x18cd);
        EXPECT(gbc.pc(), 0x6848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02A1
        gbc.setState(0xce31, 0x2e26, 0x5a90, 0xbd8e, 0x7012, 0x60f5, 0x1, 0x0);
        gbc.writeMem(0xce31, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2e26);
        EXPECT(gbc.pc(), 0xce32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce31), 0x3f);
        // 3F 02A2
        gbc.setState(0x8b4c, 0x6525, 0xd240, 0x8bf9, 0x52ef, 0xd8f4, 0x0, 0x0);
        gbc.writeMem(0x8b4c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6525);
        EXPECT(gbc.pc(), 0x8b4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b4c), 0x3f);
        // 3F 02A4
        gbc.setState(0xd7a0, 0x83c, 0x1f50, 0x3a41, 0x529f, 0x50ef, 0x0, 0x1);
        gbc.writeMem(0xd7a0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x83c);
        EXPECT(gbc.pc(), 0xd7a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a0), 0x3f);
        // 3F 02A5
        gbc.setState(0x56b5, 0x4ed9, 0x31d0, 0x6d46, 0x8e76, 0x2dba, 0x0, 0x0);
        gbc.writeMem(0x56b5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4ed9);
        EXPECT(gbc.pc(), 0x56b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02A6
        gbc.setState(0xcd07, 0xfa3e, 0x2c30, 0x140d, 0xab8d, 0x7adb, 0x1, 0x1);
        gbc.writeMem(0xcd07, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xfa3e);
        EXPECT(gbc.pc(), 0xcd08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd07), 0x3f);
        // 3F 02A7
        gbc.setState(0xad08, 0x5dc, 0x9580, 0xde35, 0x1a73, 0xf66e, 0x1, 0x0);
        gbc.writeMem(0xad08, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5dc);
        EXPECT(gbc.pc(), 0xad09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad08), 0x3f);
        // 3F 02A8
        gbc.setState(0x1459, 0xcb59, 0xda00, 0x84f8, 0x4180, 0x281e, 0x0, 0x0);
        gbc.writeMem(0x1459, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xcb59);
        EXPECT(gbc.pc(), 0x145a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02A9
        gbc.setState(0x9d9e, 0xfff, 0x7a0, 0xbaa7, 0xd75e, 0xbdbe, 0x1, 0x1);
        gbc.writeMem(0x9d9e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfff);
        EXPECT(gbc.pc(), 0x9d9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d9e), 0x3f);
        // 3F 02AA
        gbc.setState(0xcbbe, 0x511, 0xb570, 0xbf1a, 0x166e, 0xf105, 0x1, 0x0);
        gbc.writeMem(0xcbbe, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x511);
        EXPECT(gbc.pc(), 0xcbbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbbe), 0x3f);
        // 3F 02AB
        gbc.setState(0x1f95, 0x2115, 0x81e0, 0x5f18, 0x31c9, 0xe4df, 0x1, 0x1);
        gbc.writeMem(0x1f95, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2115);
        EXPECT(gbc.pc(), 0x1f96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02AC
        gbc.setState(0xcc5, 0x6158, 0xd630, 0x924b, 0x9917, 0x33a2, 0x0, 0x1);
        gbc.writeMem(0xcc5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6158);
        EXPECT(gbc.pc(), 0xcc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02AD
        gbc.setState(0x91eb, 0x74dd, 0x3040, 0x15b7, 0xab1d, 0x4d0, 0x1, 0x0);
        gbc.writeMem(0x91eb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x74dd);
        EXPECT(gbc.pc(), 0x91ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91eb), 0x3f);
        // 3F 02AE
        gbc.setState(0x5ab1, 0x627e, 0x5250, 0xa0c6, 0xb28c, 0x26db, 0x0, 0x1);
        gbc.writeMem(0x5ab1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x627e);
        EXPECT(gbc.pc(), 0x5ab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02B0
        gbc.setState(0xdcb6, 0x75a7, 0x1e90, 0x2537, 0x4a1a, 0x3dbe, 0x0, 0x1);
        gbc.writeMem(0xdcb6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x75a7);
        EXPECT(gbc.pc(), 0xdcb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb6), 0x3f);
        // 3F 02B1
        gbc.setState(0x5bcf, 0x7d13, 0x3050, 0x2ce5, 0x234, 0x62bf, 0x0, 0x0);
        gbc.writeMem(0x5bcf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7d13);
        EXPECT(gbc.pc(), 0x5bd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02B2
        gbc.setState(0x6d4f, 0x1d7, 0xef20, 0xeee4, 0x804e, 0x72fb, 0x0, 0x0);
        gbc.writeMem(0x6d4f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1d7);
        EXPECT(gbc.pc(), 0x6d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02B3
        gbc.setState(0x3c0c, 0xddd6, 0x4f90, 0x38a0, 0xb83a, 0xc932, 0x0, 0x1);
        gbc.writeMem(0x3c0c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xddd6);
        EXPECT(gbc.pc(), 0x3c0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02B4
        gbc.setState(0xb806, 0x6d56, 0xd0, 0xb11, 0x85dd, 0x88b6, 0x0, 0x1);
        gbc.writeMem(0xb806, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6d56);
        EXPECT(gbc.pc(), 0xb807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb806), 0x3f);
        // 3F 02B5
        gbc.setState(0x42c6, 0x77c8, 0x2f10, 0x2595, 0x3e80, 0x9b77, 0x0, 0x0);
        gbc.writeMem(0x42c6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x77c8);
        EXPECT(gbc.pc(), 0x42c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02B6
        gbc.setState(0xac2f, 0xd940, 0xedd0, 0xaa16, 0x454f, 0x2d00, 0x1, 0x0);
        gbc.writeMem(0xac2f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd940);
        EXPECT(gbc.pc(), 0xac30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac2f), 0x3f);
        // 3F 02B7
        gbc.setState(0xb44b, 0xe33f, 0x8490, 0xbd25, 0xbfdf, 0xf29a, 0x1, 0x1);
        gbc.writeMem(0xb44b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe33f);
        EXPECT(gbc.pc(), 0xb44c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb44b), 0x3f);
        // 3F 02B8
        gbc.setState(0x84c4, 0xd9a0, 0xbab0, 0xe96d, 0x84b4, 0xd6cb, 0x1, 0x0);
        gbc.writeMem(0x84c4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd9a0);
        EXPECT(gbc.pc(), 0x84c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c4), 0x3f);
        // 3F 02B9
        gbc.setState(0xdca3, 0x72d8, 0x4190, 0xe480, 0xcd2, 0xd561, 0x0, 0x0);
        gbc.writeMem(0xdca3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x72d8);
        EXPECT(gbc.pc(), 0xdca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdca3), 0x3f);
        // 3F 02BA
        gbc.setState(0x8a6b, 0x9d1d, 0x40b0, 0x7597, 0xa0a6, 0xcf4e, 0x1, 0x0);
        gbc.writeMem(0x8a6b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9d1d);
        EXPECT(gbc.pc(), 0x8a6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a6b), 0x3f);
        // 3F 02BC
        gbc.setState(0xd9fb, 0xfa32, 0xb8d0, 0xc570, 0xd97a, 0x17a7, 0x1, 0x0);
        gbc.writeMem(0xd9fb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfa32);
        EXPECT(gbc.pc(), 0xd9fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fb), 0x3f);
        // 3F 02BD
        gbc.setState(0x95b5, 0x73e4, 0xb390, 0x1cd9, 0xbecf, 0x599c, 0x1, 0x0);
        gbc.writeMem(0x95b5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x73e4);
        EXPECT(gbc.pc(), 0x95b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b5), 0x3f);
        // 3F 02BE
        gbc.setState(0x4bbc, 0xc5b8, 0x5d90, 0xa0c0, 0xd2a2, 0x492, 0x1, 0x0);
        gbc.writeMem(0x4bbc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc5b8);
        EXPECT(gbc.pc(), 0x4bbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02BF
        gbc.setState(0x86b0, 0x64b0, 0x4490, 0xf812, 0x7177, 0x4c5c, 0x0, 0x1);
        gbc.writeMem(0x86b0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x64b0);
        EXPECT(gbc.pc(), 0x86b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b0), 0x3f);
        // 3F 02C1
        gbc.setState(0x647c, 0xef5b, 0x9370, 0x3c05, 0xacea, 0x650f, 0x1, 0x0);
        gbc.writeMem(0x647c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xef5b);
        EXPECT(gbc.pc(), 0x647d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02C2
        gbc.setState(0x7748, 0x6b16, 0x1b00, 0xf30f, 0xc746, 0xc860, 0x1, 0x0);
        gbc.writeMem(0x7748, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6b16);
        EXPECT(gbc.pc(), 0x7749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02C3
        gbc.setState(0x9ce, 0x6784, 0x11b0, 0x2487, 0xff8a, 0x6377, 0x1, 0x0);
        gbc.writeMem(0x9ce, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6784);
        EXPECT(gbc.pc(), 0x9cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02C4
        gbc.setState(0x1489, 0xc472, 0x74f0, 0xabf6, 0x7916, 0x66e9, 0x1, 0x0);
        gbc.writeMem(0x1489, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc472);
        EXPECT(gbc.pc(), 0x148a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02C5
        gbc.setState(0xdce, 0x9b83, 0xb9b0, 0xd1f2, 0x1c05, 0x911b, 0x1, 0x0);
        gbc.writeMem(0xdce, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9b83);
        EXPECT(gbc.pc(), 0xdcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02C6
        gbc.setState(0xab3e, 0xf79, 0xafb0, 0xda37, 0x45a, 0xd293, 0x0, 0x0);
        gbc.writeMem(0xab3e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf79);
        EXPECT(gbc.pc(), 0xab3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab3e), 0x3f);
        // 3F 02C7
        gbc.setState(0x2e47, 0xe825, 0x5880, 0x8c01, 0xabb4, 0xdf3, 0x0, 0x1);
        gbc.writeMem(0x2e47, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe825);
        EXPECT(gbc.pc(), 0x2e48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02C8
        gbc.setState(0xbbf2, 0x4830, 0xf4f0, 0xbeb1, 0xbda9, 0x15c2, 0x1, 0x1);
        gbc.writeMem(0xbbf2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4830);
        EXPECT(gbc.pc(), 0xbbf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbf2), 0x3f);
        // 3F 02C9
        gbc.setState(0xbabc, 0xd75b, 0x4180, 0x6386, 0xd526, 0xa508, 0x1, 0x0);
        gbc.writeMem(0xbabc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xd75b);
        EXPECT(gbc.pc(), 0xbabd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbabc), 0x3f);
        // 3F 02CA
        gbc.setState(0x69ee, 0xc8b9, 0xc6f0, 0xca5b, 0xfce3, 0x3571, 0x1, 0x0);
        gbc.writeMem(0x69ee, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc8b9);
        EXPECT(gbc.pc(), 0x69ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02CB
        gbc.setState(0x8192, 0x3ae1, 0x96e0, 0xce8, 0xd17c, 0xe9b8, 0x1, 0x1);
        gbc.writeMem(0x8192, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3ae1);
        EXPECT(gbc.pc(), 0x8193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8192), 0x3f);
        // 3F 02CC
        gbc.setState(0x8311, 0xcefd, 0x6f40, 0xc003, 0x871f, 0xf6cc, 0x1, 0x1);
        gbc.writeMem(0x8311, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xcefd);
        EXPECT(gbc.pc(), 0x8312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8311), 0x3f);
        // 3F 02CD
        gbc.setState(0x17e9, 0x177e, 0x5ad0, 0x3058, 0xc9c5, 0x9463, 0x1, 0x1);
        gbc.writeMem(0x17e9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x177e);
        EXPECT(gbc.pc(), 0x17ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02CE
        gbc.setState(0x16f1, 0x6508, 0x6f40, 0x7b90, 0x29b3, 0xe274, 0x1, 0x0);
        gbc.writeMem(0x16f1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6508);
        EXPECT(gbc.pc(), 0x16f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02CF
        gbc.setState(0x735e, 0x94e3, 0x3760, 0xd184, 0xb707, 0x61d5, 0x0, 0x1);
        gbc.writeMem(0x735e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x94e3);
        EXPECT(gbc.pc(), 0x735f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02D0
        gbc.setState(0xcdcd, 0xa284, 0xd610, 0xf684, 0x4c43, 0xadf4, 0x0, 0x1);
        gbc.writeMem(0xcdcd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa284);
        EXPECT(gbc.pc(), 0xcdce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdcd), 0x3f);
        // 3F 02D1
        gbc.setState(0xb2cc, 0x1484, 0x7190, 0x66d, 0x3737, 0xa37b, 0x0, 0x0);
        gbc.writeMem(0xb2cc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1484);
        EXPECT(gbc.pc(), 0xb2cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2cc), 0x3f);
        // 3F 02D2
        gbc.setState(0x305f, 0xe8cf, 0x7460, 0x5922, 0x8ca0, 0x50e1, 0x0, 0x0);
        gbc.writeMem(0x305f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe8cf);
        EXPECT(gbc.pc(), 0x3060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02D3
        gbc.setState(0x8e59, 0xff2d, 0xe2e0, 0x7fbb, 0x9d55, 0xaf52, 0x0, 0x1);
        gbc.writeMem(0x8e59, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xff2d);
        EXPECT(gbc.pc(), 0x8e5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e59), 0x3f);
        // 3F 02D4
        gbc.setState(0x56aa, 0xf07a, 0xeaf0, 0x19e3, 0x9996, 0x84c0, 0x0, 0x1);
        gbc.writeMem(0x56aa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf07a);
        EXPECT(gbc.pc(), 0x56ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02D5
        gbc.setState(0x62bd, 0x6928, 0x3c20, 0x8e55, 0xbc6b, 0x4cc, 0x0, 0x0);
        gbc.writeMem(0x62bd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x6928);
        EXPECT(gbc.pc(), 0x62be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02D6
        gbc.setState(0x873c, 0xee87, 0x6480, 0x85ba, 0xbf5b, 0x967e, 0x1, 0x0);
        gbc.writeMem(0x873c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xee87);
        EXPECT(gbc.pc(), 0x873d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x873c), 0x3f);
        // 3F 02D7
        gbc.setState(0x434a, 0x20c8, 0xd010, 0x137a, 0x7c98, 0xdb05, 0x1, 0x1);
        gbc.writeMem(0x434a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x20c8);
        EXPECT(gbc.pc(), 0x434b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02D8
        gbc.setState(0xa5, 0x428, 0x5450, 0x6397, 0x376a, 0xaa57, 0x0, 0x0);
        gbc.writeMem(0xa5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x428);
        EXPECT(gbc.pc(), 0xa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02D9
        gbc.setState(0x8888, 0x63fd, 0xd980, 0xa2e5, 0xb75f, 0x97db, 0x1, 0x0);
        gbc.writeMem(0x8888, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x63fd);
        EXPECT(gbc.pc(), 0x8889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8888), 0x3f);
        // 3F 02DA
        gbc.setState(0xc930, 0x1605, 0x3d30, 0x21b6, 0x97f2, 0xa6ae, 0x0, 0x0);
        gbc.writeMem(0xc930, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1605);
        EXPECT(gbc.pc(), 0xc931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc930), 0x3f);
        // 3F 02DB
        gbc.setState(0x58f2, 0x6468, 0x9200, 0x3246, 0x6163, 0xb60, 0x1, 0x0);
        gbc.writeMem(0x58f2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6468);
        EXPECT(gbc.pc(), 0x58f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02DC
        gbc.setState(0x762c, 0x6acb, 0xc4a0, 0x1fc, 0xe328, 0x8ea9, 0x0, 0x1);
        gbc.writeMem(0x762c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6acb);
        EXPECT(gbc.pc(), 0x762d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02DD
        gbc.setState(0xdee1, 0x2aa7, 0xbee0, 0xf649, 0xfa0a, 0x5a1, 0x1, 0x0);
        gbc.writeMem(0xdee1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x2aa7);
        EXPECT(gbc.pc(), 0xdee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdee1), 0x3f);
        // 3F 02DE
        gbc.setState(0xcedf, 0x30cd, 0xb7e0, 0x286d, 0x4ef4, 0xdd0e, 0x1, 0x0);
        gbc.writeMem(0xcedf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x30cd);
        EXPECT(gbc.pc(), 0xcee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcedf), 0x3f);
        // 3F 02DF
        gbc.setState(0x42ba, 0x36ef, 0x8e30, 0x5442, 0x6a0b, 0x8dd3, 0x0, 0x0);
        gbc.writeMem(0x42ba, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x36ef);
        EXPECT(gbc.pc(), 0x42bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02E0
        gbc.setState(0xcbb2, 0xf209, 0x8750, 0x5261, 0xa99f, 0xdf05, 0x1, 0x0);
        gbc.writeMem(0xcbb2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf209);
        EXPECT(gbc.pc(), 0xcbb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb2), 0x3f);
        // 3F 02E1
        gbc.setState(0x9f2b, 0x2908, 0x2270, 0x8bcc, 0xa071, 0x2aee, 0x0, 0x0);
        gbc.writeMem(0x9f2b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2908);
        EXPECT(gbc.pc(), 0x9f2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f2b), 0x3f);
        // 3F 02E2
        gbc.setState(0xc41d, 0xb08, 0x4e30, 0x66da, 0x4a1f, 0xed0e, 0x0, 0x1);
        gbc.writeMem(0xc41d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb08);
        EXPECT(gbc.pc(), 0xc41e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc41d), 0x3f);
        // 3F 02E3
        gbc.setState(0x927f, 0x3598, 0x4c30, 0xa254, 0xb563, 0xa5e0, 0x1, 0x1);
        gbc.writeMem(0x927f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3598);
        EXPECT(gbc.pc(), 0x9280);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x927f), 0x3f);
        // 3F 02E5
        gbc.setState(0xb54f, 0x9cb0, 0x7390, 0xe890, 0x3281, 0xaa36, 0x0, 0x1);
        gbc.writeMem(0xb54f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9cb0);
        EXPECT(gbc.pc(), 0xb550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb54f), 0x3f);
        // 3F 02E6
        gbc.setState(0xe7f4, 0xffaa, 0x8dc0, 0xee24, 0x2de5, 0x4193, 0x0, 0x0);
        gbc.writeMem(0xe7f4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xffaa);
        EXPECT(gbc.pc(), 0xe7f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f4), 0x3f);
        // 3F 02E7
        gbc.setState(0x6acd, 0xf5df, 0x2f00, 0x499b, 0x6677, 0xe62f, 0x1, 0x1);
        gbc.writeMem(0x6acd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf5df);
        EXPECT(gbc.pc(), 0x6ace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02E8
        gbc.setState(0x51bc, 0x928f, 0xd640, 0x773e, 0x91c5, 0xa27f, 0x0, 0x0);
        gbc.writeMem(0x51bc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x928f);
        EXPECT(gbc.pc(), 0x51bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02E9
        gbc.setState(0xfd2, 0x2ce5, 0xea30, 0x9ed1, 0x7a33, 0xa768, 0x0, 0x1);
        gbc.writeMem(0xfd2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2ce5);
        EXPECT(gbc.pc(), 0xfd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02EA
        gbc.setState(0xcdd3, 0xc35b, 0x8c0, 0xe6fe, 0x211e, 0x276b, 0x1, 0x1);
        gbc.writeMem(0xcdd3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xc35b);
        EXPECT(gbc.pc(), 0xcdd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdd3), 0x3f);
        // 3F 02EB
        gbc.setState(0xc845, 0xe8b9, 0x29b0, 0x539f, 0x821d, 0x5678, 0x1, 0x1);
        gbc.writeMem(0xc845, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe8b9);
        EXPECT(gbc.pc(), 0xc846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc845), 0x3f);
        // 3F 02EC
        gbc.setState(0x97b0, 0x9652, 0x8590, 0xb789, 0x6441, 0x2e09, 0x0, 0x1);
        gbc.writeMem(0x97b0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9652);
        EXPECT(gbc.pc(), 0x97b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97b0), 0x3f);
        // 3F 02ED
        gbc.setState(0xaae1, 0x95dd, 0x57d0, 0x707c, 0xcb4c, 0x175f, 0x0, 0x1);
        gbc.writeMem(0xaae1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x95dd);
        EXPECT(gbc.pc(), 0xaae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaae1), 0x3f);
        // 3F 02EF
        gbc.setState(0xafac, 0x3316, 0xf80, 0xeecb, 0x3c5c, 0xdb0e, 0x0, 0x1);
        gbc.writeMem(0xafac, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3316);
        EXPECT(gbc.pc(), 0xafad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafac), 0x3f);
        // 3F 02F0
        gbc.setState(0x2d35, 0x8d4f, 0xbc80, 0x348c, 0xb9a, 0x7ed7, 0x1, 0x1);
        gbc.writeMem(0x2d35, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8d4f);
        EXPECT(gbc.pc(), 0x2d36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02F2
        gbc.setState(0x5d87, 0x547d, 0x8890, 0x2fd8, 0xa617, 0xf7c3, 0x1, 0x1);
        gbc.writeMem(0x5d87, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x547d);
        EXPECT(gbc.pc(), 0x5d88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02F3
        gbc.setState(0x17cd, 0x5bf2, 0x3890, 0x9611, 0xe3a8, 0x9774, 0x1, 0x1);
        gbc.writeMem(0x17cd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5bf2);
        EXPECT(gbc.pc(), 0x17ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02F4
        gbc.setState(0x2a5e, 0x7c24, 0x9650, 0x8c4, 0xd69a, 0x3575, 0x1, 0x0);
        gbc.writeMem(0x2a5e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7c24);
        EXPECT(gbc.pc(), 0x2a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02F5
        gbc.setState(0x63b5, 0xfeda, 0xe550, 0x3d6a, 0x2730, 0x9d2d, 0x0, 0x0);
        gbc.writeMem(0x63b5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfeda);
        EXPECT(gbc.pc(), 0x63b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02F6
        gbc.setState(0x58b9, 0x4c95, 0xc910, 0x2cb6, 0x42e2, 0x9205, 0x0, 0x1);
        gbc.writeMem(0x58b9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4c95);
        EXPECT(gbc.pc(), 0x58ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02F7
        gbc.setState(0x2bc7, 0xb1b4, 0x7910, 0xb18, 0xf0ba, 0x32d3, 0x1, 0x0);
        gbc.writeMem(0x2bc7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb1b4);
        EXPECT(gbc.pc(), 0x2bc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 02F8
        gbc.setState(0x45b7, 0x482e, 0xf440, 0x6b5, 0x23af, 0x5f08, 0x1, 0x1);
        gbc.writeMem(0x45b7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x482e);
        EXPECT(gbc.pc(), 0x45b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 02F9
        gbc.setState(0xec4a, 0x1269, 0x1070, 0x263e, 0xaf62, 0xa989, 0x1, 0x0);
        gbc.writeMem(0xec4a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1269);
        EXPECT(gbc.pc(), 0xec4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec4a), 0x3f);
        // 3F 02FA
        gbc.setState(0xa9bf, 0x22e0, 0x64f0, 0xc100, 0x758, 0x6e49, 0x0, 0x1);
        gbc.writeMem(0xa9bf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x22e0);
        EXPECT(gbc.pc(), 0xa9c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9bf), 0x3f);
        // 3F 02FD
        gbc.setState(0xbce7, 0xb276, 0x37a0, 0x31ca, 0xe021, 0xbef0, 0x0, 0x1);
        gbc.writeMem(0xbce7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb276);
        EXPECT(gbc.pc(), 0xbce8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbce7), 0x3f);
        // 3F 02FE
        gbc.setState(0x845e, 0xbb47, 0xc20, 0xa00c, 0x57c1, 0x63bc, 0x1, 0x0);
        gbc.writeMem(0x845e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xbb47);
        EXPECT(gbc.pc(), 0x845f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x845e), 0x3f);
        // 3F 02FF
        gbc.setState(0xeace, 0x7414, 0x8650, 0xe590, 0x2452, 0xfd3, 0x1, 0x1);
        gbc.writeMem(0xeace, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7414);
        EXPECT(gbc.pc(), 0xeacf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeace), 0x3f);
        // 3F 0301
        gbc.setState(0x2a89, 0x84ea, 0xff0, 0x453d, 0xd0dc, 0xa810, 0x1, 0x1);
        gbc.writeMem(0x2a89, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x84ea);
        EXPECT(gbc.pc(), 0x2a8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0302
        gbc.setState(0x4766, 0xbde9, 0x6080, 0xef3c, 0x8dce, 0x914e, 0x0, 0x0);
        gbc.writeMem(0x4766, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbde9);
        EXPECT(gbc.pc(), 0x4767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0303
        gbc.setState(0xc3a1, 0x6b5c, 0xa650, 0xdc13, 0x37dc, 0xfc2f, 0x0, 0x1);
        gbc.writeMem(0xc3a1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6b5c);
        EXPECT(gbc.pc(), 0xc3a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a1), 0x3f);
        // 3F 0304
        gbc.setState(0x2ce8, 0x6822, 0x4b80, 0x2bf4, 0x8487, 0x1fa4, 0x1, 0x0);
        gbc.writeMem(0x2ce8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6822);
        EXPECT(gbc.pc(), 0x2ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0305
        gbc.setState(0x3920, 0xbda7, 0x3660, 0xd0a8, 0xbca7, 0x211d, 0x1, 0x0);
        gbc.writeMem(0x3920, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xbda7);
        EXPECT(gbc.pc(), 0x3921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0306
        gbc.setState(0x364e, 0x356d, 0x2420, 0xd38a, 0x142c, 0xb62f, 0x1, 0x0);
        gbc.writeMem(0x364e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x356d);
        EXPECT(gbc.pc(), 0x364f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0307
        gbc.setState(0x56e9, 0x5693, 0xd950, 0xd8a8, 0xb8f7, 0x4a06, 0x0, 0x1);
        gbc.writeMem(0x56e9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5693);
        EXPECT(gbc.pc(), 0x56ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0308
        gbc.setState(0x33e5, 0xde13, 0x2300, 0xf69, 0x233d, 0xe8fe, 0x1, 0x1);
        gbc.writeMem(0x33e5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xde13);
        EXPECT(gbc.pc(), 0x33e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 030A
        gbc.setState(0xb63d, 0x5a7e, 0xdc60, 0xb3bd, 0xb6ed, 0x450d, 0x1, 0x1);
        gbc.writeMem(0xb63d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5a7e);
        EXPECT(gbc.pc(), 0xb63e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb63d), 0x3f);
        // 3F 030B
        gbc.setState(0x4c90, 0xf687, 0xeb0, 0x5d22, 0x2e12, 0xd7ec, 0x1, 0x0);
        gbc.writeMem(0x4c90, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf687);
        EXPECT(gbc.pc(), 0x4c91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 030D
        gbc.setState(0x5288, 0x13eb, 0x8f40, 0xb16b, 0x14e9, 0x50f6, 0x0, 0x1);
        gbc.writeMem(0x5288, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x13eb);
        EXPECT(gbc.pc(), 0x5289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 030E
        gbc.setState(0xc187, 0xe852, 0x7740, 0xddc9, 0xf571, 0x9ce1, 0x0, 0x1);
        gbc.writeMem(0xc187, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe852);
        EXPECT(gbc.pc(), 0xc188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc187), 0x3f);
        // 3F 030F
        gbc.setState(0xd52, 0x31d1, 0x2090, 0xf46a, 0xaaff, 0x4167, 0x1, 0x0);
        gbc.writeMem(0xd52, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x31d1);
        EXPECT(gbc.pc(), 0xd53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0310
        gbc.setState(0xe215, 0x12f6, 0xb580, 0xb9a9, 0x5930, 0xe980, 0x1, 0x1);
        gbc.writeMem(0xe215, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x12f6);
        EXPECT(gbc.pc(), 0xe216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe215), 0x3f);
        // 3F 0311
        gbc.setState(0xe4cd, 0x4e72, 0x2c70, 0xd27d, 0xfbfa, 0x2c45, 0x0, 0x0);
        gbc.writeMem(0xe4cd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4e72);
        EXPECT(gbc.pc(), 0xe4ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4cd), 0x3f);
        // 3F 0312
        gbc.setState(0xb733, 0x9be9, 0xd400, 0x4f4c, 0xbfd7, 0x23c2, 0x0, 0x1);
        gbc.writeMem(0xb733, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9be9);
        EXPECT(gbc.pc(), 0xb734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb733), 0x3f);
        // 3F 0313
        gbc.setState(0x35ef, 0xa321, 0xd050, 0x12d2, 0x5ca3, 0x8acd, 0x0, 0x0);
        gbc.writeMem(0x35ef, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa321);
        EXPECT(gbc.pc(), 0x35f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0314
        gbc.setState(0x3416, 0x8af0, 0x8500, 0x711d, 0x38af, 0x76b9, 0x0, 0x0);
        gbc.writeMem(0x3416, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8af0);
        EXPECT(gbc.pc(), 0x3417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0315
        gbc.setState(0x4a9d, 0xfb1b, 0xffd0, 0xfee0, 0x658e, 0x4330, 0x0, 0x1);
        gbc.writeMem(0x4a9d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xfb1b);
        EXPECT(gbc.pc(), 0x4a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0316
        gbc.setState(0x14a0, 0x8bfb, 0x1000, 0x91f1, 0x1f8f, 0xad2f, 0x0, 0x1);
        gbc.writeMem(0x14a0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8bfb);
        EXPECT(gbc.pc(), 0x14a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0317
        gbc.setState(0x4a7e, 0x8c9d, 0x34c0, 0x8cd1, 0xd777, 0xb364, 0x0, 0x0);
        gbc.writeMem(0x4a7e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8c9d);
        EXPECT(gbc.pc(), 0x4a7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0318
        gbc.setState(0x29c8, 0xe643, 0xc2f0, 0x450e, 0x4e15, 0x7e6f, 0x1, 0x0);
        gbc.writeMem(0x29c8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe643);
        EXPECT(gbc.pc(), 0x29c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0319
        gbc.setState(0xc0e7, 0x9c0a, 0x5d40, 0x5c36, 0x6874, 0xe530, 0x0, 0x0);
        gbc.writeMem(0xc0e7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x9c0a);
        EXPECT(gbc.pc(), 0xc0e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0e7), 0x3f);
        // 3F 031A
        gbc.setState(0xcb91, 0x1ce5, 0x8100, 0x5808, 0xd388, 0xac7e, 0x0, 0x1);
        gbc.writeMem(0xcb91, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1ce5);
        EXPECT(gbc.pc(), 0xcb92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb91), 0x3f);
        // 3F 031B
        gbc.setState(0x58d1, 0xe16, 0xf950, 0x4ffc, 0xb0d0, 0x6ba4, 0x1, 0x1);
        gbc.writeMem(0x58d1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe16);
        EXPECT(gbc.pc(), 0x58d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 031D
        gbc.setState(0xca75, 0x3633, 0xead0, 0x617c, 0x8ec9, 0xff51, 0x0, 0x1);
        gbc.writeMem(0xca75, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3633);
        EXPECT(gbc.pc(), 0xca76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca75), 0x3f);
        // 3F 031E
        gbc.setState(0xe991, 0x28bb, 0xfdc0, 0xe2e7, 0x4565, 0x1024, 0x1, 0x0);
        gbc.writeMem(0xe991, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x28bb);
        EXPECT(gbc.pc(), 0xe992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe991), 0x3f);
        // 3F 031F
        gbc.setState(0xb60a, 0xc3d8, 0x4d40, 0xa5b5, 0x7097, 0xfb38, 0x1, 0x0);
        gbc.writeMem(0xb60a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xc3d8);
        EXPECT(gbc.pc(), 0xb60b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb60a), 0x3f);
        // 3F 0320
        gbc.setState(0x3db7, 0xd962, 0x1aa0, 0xfdad, 0x9d01, 0x4ebd, 0x1, 0x1);
        gbc.writeMem(0x3db7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd962);
        EXPECT(gbc.pc(), 0x3db8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0321
        gbc.setState(0xd93, 0x108d, 0x2820, 0x1573, 0x9fd9, 0x347, 0x1, 0x1);
        gbc.writeMem(0xd93, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x108d);
        EXPECT(gbc.pc(), 0xd94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0322
        gbc.setState(0xeab5, 0x17f7, 0x8110, 0x3ca8, 0xcd11, 0xb713, 0x1, 0x0);
        gbc.writeMem(0xeab5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x17f7);
        EXPECT(gbc.pc(), 0xeab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab5), 0x3f);
        // 3F 0323
        gbc.setState(0x8672, 0x7dd, 0xe970, 0xd0ad, 0x8b15, 0xa928, 0x1, 0x1);
        gbc.writeMem(0x8672, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x7dd);
        EXPECT(gbc.pc(), 0x8673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8672), 0x3f);
        // 3F 0324
        gbc.setState(0xdc53, 0x1816, 0xce60, 0xffd4, 0xf2b2, 0x49b1, 0x1, 0x1);
        gbc.writeMem(0xdc53, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1816);
        EXPECT(gbc.pc(), 0xdc54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc53), 0x3f);
        // 3F 0325
        gbc.setState(0x2674, 0xd3b6, 0xf410, 0x9154, 0x889f, 0x1578, 0x1, 0x1);
        gbc.writeMem(0x2674, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd3b6);
        EXPECT(gbc.pc(), 0x2675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0326
        gbc.setState(0xda7d, 0xcc3a, 0x2a90, 0x37f4, 0x97b, 0x32dd, 0x0, 0x1);
        gbc.writeMem(0xda7d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xcc3a);
        EXPECT(gbc.pc(), 0xda7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda7d), 0x3f);
        // 3F 0327
        gbc.setState(0x3aed, 0x9c83, 0xdc10, 0x577d, 0x1ada, 0x3d10, 0x0, 0x0);
        gbc.writeMem(0x3aed, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9c83);
        EXPECT(gbc.pc(), 0x3aee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0328
        gbc.setState(0x3187, 0x9347, 0x77b0, 0xd7c3, 0xfd00, 0xc0a6, 0x1, 0x1);
        gbc.writeMem(0x3187, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9347);
        EXPECT(gbc.pc(), 0x3188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0329
        gbc.setState(0xb2b0, 0x9ef7, 0xcb90, 0x7c5c, 0x6cad, 0xa09e, 0x0, 0x0);
        gbc.writeMem(0xb2b0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9ef7);
        EXPECT(gbc.pc(), 0xb2b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2b0), 0x3f);
        // 3F 032A
        gbc.setState(0xe59f, 0x129, 0x6a20, 0x77db, 0x8ee8, 0xab64, 0x0, 0x0);
        gbc.writeMem(0xe59f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x129);
        EXPECT(gbc.pc(), 0xe5a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe59f), 0x3f);
        // 3F 032B
        gbc.setState(0xdeae, 0x15dd, 0x6d50, 0x5e82, 0x6494, 0xcb6f, 0x0, 0x1);
        gbc.writeMem(0xdeae, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x15dd);
        EXPECT(gbc.pc(), 0xdeaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeae), 0x3f);
        // 3F 032C
        gbc.setState(0x2921, 0x520d, 0xd530, 0xb35e, 0x95da, 0x6ce, 0x1, 0x1);
        gbc.writeMem(0x2921, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x520d);
        EXPECT(gbc.pc(), 0x2922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 032D
        gbc.setState(0x7fd6, 0xbee2, 0x5680, 0x57b5, 0xf640, 0x7532, 0x1, 0x1);
        gbc.writeMem(0x7fd6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xbee2);
        EXPECT(gbc.pc(), 0x7fd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 032E
        gbc.setState(0x7d5c, 0x24d0, 0xd530, 0x8ed6, 0x6465, 0x92d5, 0x0, 0x0);
        gbc.writeMem(0x7d5c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x24d0);
        EXPECT(gbc.pc(), 0x7d5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 032F
        gbc.setState(0x970e, 0x280b, 0xcc30, 0x12b3, 0xa62f, 0x8b03, 0x1, 0x0);
        gbc.writeMem(0x970e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x280b);
        EXPECT(gbc.pc(), 0x970f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970e), 0x3f);
        // 3F 0330
        gbc.setState(0x25e2, 0xeec3, 0x89e0, 0x537d, 0xf96c, 0x3836, 0x1, 0x0);
        gbc.writeMem(0x25e2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xeec3);
        EXPECT(gbc.pc(), 0x25e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0331
        gbc.setState(0xc776, 0x6397, 0xea50, 0xe919, 0x680a, 0xcabd, 0x0, 0x0);
        gbc.writeMem(0xc776, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6397);
        EXPECT(gbc.pc(), 0xc777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc776), 0x3f);
        // 3F 0332
        gbc.setState(0x2680, 0x5915, 0xd860, 0xe4c1, 0x50e3, 0xef84, 0x0, 0x1);
        gbc.writeMem(0x2680, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5915);
        EXPECT(gbc.pc(), 0x2681);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0333
        gbc.setState(0x6027, 0x55e9, 0xce0, 0xeb21, 0xe7e8, 0xb41e, 0x1, 0x0);
        gbc.writeMem(0x6027, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x55e9);
        EXPECT(gbc.pc(), 0x6028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0334
        gbc.setState(0x2e99, 0xc847, 0xa3b0, 0x6a56, 0xd8e1, 0xd55a, 0x0, 0x1);
        gbc.writeMem(0x2e99, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc847);
        EXPECT(gbc.pc(), 0x2e9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0335
        gbc.setState(0xcc05, 0xffdc, 0x93d0, 0xf110, 0xa102, 0xfc21, 0x1, 0x0);
        gbc.writeMem(0xcc05, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xffdc);
        EXPECT(gbc.pc(), 0xcc06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc05), 0x3f);
        // 3F 0336
        gbc.setState(0x7da6, 0xfe9b, 0xb7a0, 0x36b4, 0xbb51, 0x3c51, 0x0, 0x1);
        gbc.writeMem(0x7da6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfe9b);
        EXPECT(gbc.pc(), 0x7da7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0337
        gbc.setState(0x564e, 0x22bb, 0x4860, 0x4a14, 0x81d4, 0xb580, 0x0, 0x1);
        gbc.writeMem(0x564e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x22bb);
        EXPECT(gbc.pc(), 0x564f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0339
        gbc.setState(0x96fa, 0x5222, 0x3960, 0x18e1, 0xaa18, 0x424e, 0x0, 0x1);
        gbc.writeMem(0x96fa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5222);
        EXPECT(gbc.pc(), 0x96fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96fa), 0x3f);
        // 3F 033A
        gbc.setState(0x2cae, 0x90f, 0x39f0, 0x47ca, 0x86ee, 0xc069, 0x0, 0x1);
        gbc.writeMem(0x2cae, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x90f);
        EXPECT(gbc.pc(), 0x2caf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 033B
        gbc.setState(0x31f4, 0x3f0d, 0x9b50, 0x62bb, 0x2512, 0x4c53, 0x1, 0x1);
        gbc.writeMem(0x31f4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3f0d);
        EXPECT(gbc.pc(), 0x31f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 033C
        gbc.setState(0x68ac, 0xa289, 0xd230, 0x38fa, 0x857b, 0x6188, 0x0, 0x0);
        gbc.writeMem(0x68ac, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa289);
        EXPECT(gbc.pc(), 0x68ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 033D
        gbc.setState(0x3d53, 0x36f8, 0x1780, 0x23b2, 0x8b48, 0x939, 0x0, 0x0);
        gbc.writeMem(0x3d53, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x36f8);
        EXPECT(gbc.pc(), 0x3d54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 033E
        gbc.setState(0x198b, 0x81df, 0xa9d0, 0xd141, 0x4a00, 0x4f26, 0x1, 0x1);
        gbc.writeMem(0x198b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x81df);
        EXPECT(gbc.pc(), 0x198c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 033F
        gbc.setState(0x2613, 0xd0cd, 0xdf40, 0xfe6, 0x3e7a, 0xcfa9, 0x0, 0x1);
        gbc.writeMem(0x2613, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd0cd);
        EXPECT(gbc.pc(), 0x2614);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0340
        gbc.setState(0xe66b, 0x4155, 0x9fc0, 0x46ff, 0x1c5a, 0x525f, 0x0, 0x1);
        gbc.writeMem(0xe66b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4155);
        EXPECT(gbc.pc(), 0xe66c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe66b), 0x3f);
        // 3F 0341
        gbc.setState(0x1867, 0x4352, 0x2840, 0xe2ff, 0xdaf9, 0x8c20, 0x0, 0x1);
        gbc.writeMem(0x1867, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4352);
        EXPECT(gbc.pc(), 0x1868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0342
        gbc.setState(0x5f13, 0xa91c, 0x3ae0, 0xe0ee, 0xfdb5, 0x3f2, 0x0, 0x1);
        gbc.writeMem(0x5f13, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xa91c);
        EXPECT(gbc.pc(), 0x5f14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0343
        gbc.setState(0x5eed, 0xbda5, 0xab80, 0x6504, 0xc8b1, 0x8dde, 0x1, 0x0);
        gbc.writeMem(0x5eed, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xbda5);
        EXPECT(gbc.pc(), 0x5eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0344
        gbc.setState(0x1ebb, 0x32b7, 0xf380, 0x3918, 0x9c82, 0xd84a, 0x1, 0x0);
        gbc.writeMem(0x1ebb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x32b7);
        EXPECT(gbc.pc(), 0x1ebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0345
        gbc.setState(0xd147, 0x8e02, 0x28f0, 0xaee2, 0xb989, 0xa64c, 0x0, 0x1);
        gbc.writeMem(0xd147, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8e02);
        EXPECT(gbc.pc(), 0xd148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd147), 0x3f);
        // 3F 0346
        gbc.setState(0xec41, 0xba83, 0xacd0, 0xa02d, 0xca0, 0xdac6, 0x0, 0x0);
        gbc.writeMem(0xec41, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xba83);
        EXPECT(gbc.pc(), 0xec42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec41), 0x3f);
        // 3F 0347
        gbc.setState(0xdf20, 0x95aa, 0xc890, 0x5706, 0x1a50, 0x6a5f, 0x1, 0x0);
        gbc.writeMem(0xdf20, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x95aa);
        EXPECT(gbc.pc(), 0xdf21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf20), 0x3f);
        // 3F 0348
        gbc.setState(0xbd98, 0x2647, 0x87f0, 0x7a5b, 0xa1d9, 0x4875, 0x0, 0x1);
        gbc.writeMem(0xbd98, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2647);
        EXPECT(gbc.pc(), 0xbd99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd98), 0x3f);
        // 3F 0349
        gbc.setState(0xbaf8, 0x8b8c, 0xd750, 0xc6c2, 0xff9d, 0xc000, 0x1, 0x0);
        gbc.writeMem(0xbaf8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8b8c);
        EXPECT(gbc.pc(), 0xbaf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaf8), 0x3f);
        // 3F 034A
        gbc.setState(0x28f4, 0x3f17, 0xf390, 0xb206, 0x2bca, 0xc181, 0x0, 0x1);
        gbc.writeMem(0x28f4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3f17);
        EXPECT(gbc.pc(), 0x28f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 034B
        gbc.setState(0x7c23, 0x13b5, 0x4b20, 0x7193, 0x2282, 0x6609, 0x1, 0x1);
        gbc.writeMem(0x7c23, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x13b5);
        EXPECT(gbc.pc(), 0x7c24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 034C
        gbc.setState(0x3be0, 0x474e, 0xe2b0, 0xde29, 0x9d69, 0xfbb, 0x0, 0x0);
        gbc.writeMem(0x3be0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x474e);
        EXPECT(gbc.pc(), 0x3be1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 034D
        gbc.setState(0xcbc2, 0x875c, 0xdee0, 0x9900, 0x1e08, 0x282e, 0x1, 0x0);
        gbc.writeMem(0xcbc2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x875c);
        EXPECT(gbc.pc(), 0xcbc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc2), 0x3f);
        // 3F 034E
        gbc.setState(0x9c9e, 0x3200, 0x8040, 0xb6b, 0xf589, 0xd2fd, 0x1, 0x1);
        gbc.writeMem(0x9c9e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3200);
        EXPECT(gbc.pc(), 0x9c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c9e), 0x3f);
        // 3F 034F
        gbc.setState(0x9102, 0x596, 0xc180, 0xb43a, 0x2000, 0x14f4, 0x0, 0x1);
        gbc.writeMem(0x9102, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x596);
        EXPECT(gbc.pc(), 0x9103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9102), 0x3f);
        // 3F 0350
        gbc.setState(0x7369, 0x5d3, 0x3bb0, 0x228f, 0xf00, 0x846, 0x0, 0x1);
        gbc.writeMem(0x7369, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5d3);
        EXPECT(gbc.pc(), 0x736a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0351
        gbc.setState(0xd6fe, 0xf226, 0x60b0, 0xec30, 0xed89, 0x9c43, 0x1, 0x1);
        gbc.writeMem(0xd6fe, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf226);
        EXPECT(gbc.pc(), 0xd6ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6fe), 0x3f);
        // 3F 0352
        gbc.setState(0x9f67, 0x5eb6, 0x5060, 0x929f, 0x930d, 0xa8a0, 0x1, 0x1);
        gbc.writeMem(0x9f67, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5eb6);
        EXPECT(gbc.pc(), 0x9f68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f67), 0x3f);
        // 3F 0354
        gbc.setState(0x2fb3, 0xc9e1, 0x43a0, 0x28a2, 0xc37d, 0xfbde, 0x1, 0x1);
        gbc.writeMem(0x2fb3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc9e1);
        EXPECT(gbc.pc(), 0x2fb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0355
        gbc.setState(0xbb24, 0x19e9, 0x29d0, 0x11fc, 0x1014, 0xb0f7, 0x1, 0x0);
        gbc.writeMem(0xbb24, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x19e9);
        EXPECT(gbc.pc(), 0xbb25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb24), 0x3f);
        // 3F 0356
        gbc.setState(0x53d, 0x55f3, 0x9ac0, 0x4e12, 0x63c7, 0xeece, 0x0, 0x0);
        gbc.writeMem(0x53d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x55f3);
        EXPECT(gbc.pc(), 0x53e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0357
        gbc.setState(0x63d6, 0x65db, 0x8f10, 0xe321, 0x4b4b, 0xac2d, 0x1, 0x1);
        gbc.writeMem(0x63d6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x65db);
        EXPECT(gbc.pc(), 0x63d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0358
        gbc.setState(0xb86, 0x8f1d, 0xe6c0, 0x2569, 0x5fde, 0xc552, 0x1, 0x1);
        gbc.writeMem(0xb86, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8f1d);
        EXPECT(gbc.pc(), 0xb87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 035A
        gbc.setState(0xc351, 0x1909, 0xec30, 0x1414, 0x9667, 0x6693, 0x1, 0x1);
        gbc.writeMem(0xc351, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1909);
        EXPECT(gbc.pc(), 0xc352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc351), 0x3f);
        // 3F 035B
        gbc.setState(0x98a5, 0x566d, 0xc800, 0x3382, 0x6e87, 0x1f9c, 0x0, 0x1);
        gbc.writeMem(0x98a5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x566d);
        EXPECT(gbc.pc(), 0x98a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98a5), 0x3f);
        // 3F 035C
        gbc.setState(0x9796, 0xb8a0, 0xb730, 0x1691, 0x4c28, 0x79a5, 0x1, 0x1);
        gbc.writeMem(0x9796, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb8a0);
        EXPECT(gbc.pc(), 0x9797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9796), 0x3f);
        // 3F 035D
        gbc.setState(0x85f9, 0xb3ec, 0x8b50, 0x6fc1, 0xe714, 0x5dfd, 0x0, 0x0);
        gbc.writeMem(0x85f9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb3ec);
        EXPECT(gbc.pc(), 0x85fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f9), 0x3f);
        // 3F 035E
        gbc.setState(0x4203, 0x9de4, 0xd5c0, 0x65d1, 0x3263, 0x7891, 0x0, 0x0);
        gbc.writeMem(0x4203, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9de4);
        EXPECT(gbc.pc(), 0x4204);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0360
        gbc.setState(0xd3be, 0xa98f, 0x6dd0, 0x7dd5, 0xecab, 0x4cb, 0x1, 0x0);
        gbc.writeMem(0xd3be, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa98f);
        EXPECT(gbc.pc(), 0xd3bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3be), 0x3f);
        // 3F 0361
        gbc.setState(0xc76, 0x8a18, 0xf260, 0xa8d6, 0xfcc1, 0x5c13, 0x0, 0x1);
        gbc.writeMem(0xc76, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8a18);
        EXPECT(gbc.pc(), 0xc77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0363
        gbc.setState(0x26d7, 0x221b, 0x3200, 0x3bdd, 0xbf2f, 0x6d5b, 0x1, 0x0);
        gbc.writeMem(0x26d7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x221b);
        EXPECT(gbc.pc(), 0x26d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0364
        gbc.setState(0x6924, 0x1567, 0xeb60, 0x6cd1, 0x971b, 0xa009, 0x1, 0x1);
        gbc.writeMem(0x6924, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1567);
        EXPECT(gbc.pc(), 0x6925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0365
        gbc.setState(0xd250, 0xa6ba, 0x48b0, 0x3821, 0x280b, 0x6e42, 0x0, 0x1);
        gbc.writeMem(0xd250, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa6ba);
        EXPECT(gbc.pc(), 0xd251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd250), 0x3f);
        // 3F 0367
        gbc.setState(0xd4fa, 0x5fd1, 0xa0f0, 0x43c5, 0xe9c4, 0x7f8c, 0x1, 0x1);
        gbc.writeMem(0xd4fa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5fd1);
        EXPECT(gbc.pc(), 0xd4fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4fa), 0x3f);
        // 3F 0368
        gbc.setState(0x9e6c, 0x587, 0xfe00, 0x622f, 0x8ec6, 0xfaf3, 0x1, 0x0);
        gbc.writeMem(0x9e6c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x587);
        EXPECT(gbc.pc(), 0x9e6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e6c), 0x3f);
        // 3F 0369
        gbc.setState(0xfbf, 0x11f6, 0xba90, 0x317c, 0xc6e4, 0x95b6, 0x0, 0x0);
        gbc.writeMem(0xfbf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x11f6);
        EXPECT(gbc.pc(), 0xfc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 036A
        gbc.setState(0xb8e8, 0xf958, 0xa1f0, 0xde6c, 0x8c29, 0x1c37, 0x1, 0x0);
        gbc.writeMem(0xb8e8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xf958);
        EXPECT(gbc.pc(), 0xb8e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8e8), 0x3f);
        // 3F 036B
        gbc.setState(0xd84b, 0xd987, 0x31c0, 0xb783, 0xb677, 0x890a, 0x0, 0x1);
        gbc.writeMem(0xd84b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd987);
        EXPECT(gbc.pc(), 0xd84c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd84b), 0x3f);
        // 3F 036C
        gbc.setState(0x36fd, 0xefa6, 0xbdf0, 0x1fdf, 0xe66d, 0x85fd, 0x1, 0x1);
        gbc.writeMem(0x36fd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xefa6);
        EXPECT(gbc.pc(), 0x36fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 036D
        gbc.setState(0xc3dd, 0xbd95, 0xadb0, 0x36c3, 0xec80, 0x756d, 0x1, 0x0);
        gbc.writeMem(0xc3dd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xbd95);
        EXPECT(gbc.pc(), 0xc3de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3dd), 0x3f);
        // 3F 036E
        gbc.setState(0x1053, 0x3553, 0xa410, 0xdaff, 0xa7ba, 0x6cd8, 0x0, 0x1);
        gbc.writeMem(0x1053, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3553);
        EXPECT(gbc.pc(), 0x1054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 036F
        gbc.setState(0x42d2, 0xd373, 0x94f0, 0x800a, 0xc364, 0xa295, 0x1, 0x0);
        gbc.writeMem(0x42d2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd373);
        EXPECT(gbc.pc(), 0x42d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0370
        gbc.setState(0xb101, 0x3fe7, 0x16e0, 0x6b7, 0x8d2, 0xd5f6, 0x0, 0x1);
        gbc.writeMem(0xb101, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3fe7);
        EXPECT(gbc.pc(), 0xb102);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb101), 0x3f);
        // 3F 0372
        gbc.setState(0x5fd, 0x4d56, 0x6870, 0xbddf, 0xbabf, 0x159c, 0x1, 0x1);
        gbc.writeMem(0x5fd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4d56);
        EXPECT(gbc.pc(), 0x5fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0373
        gbc.setState(0x6fe8, 0xb24a, 0xbc10, 0x6678, 0x8bd4, 0x91ea, 0x0, 0x0);
        gbc.writeMem(0x6fe8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb24a);
        EXPECT(gbc.pc(), 0x6fe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0374
        gbc.setState(0x8735, 0x4314, 0xaa40, 0x5873, 0x206f, 0x86d2, 0x1, 0x1);
        gbc.writeMem(0x8735, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4314);
        EXPECT(gbc.pc(), 0x8736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8735), 0x3f);
        // 3F 0375
        gbc.setState(0x7b57, 0xac6b, 0x3600, 0xf29d, 0x29d7, 0x790b, 0x1, 0x1);
        gbc.writeMem(0x7b57, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xac6b);
        EXPECT(gbc.pc(), 0x7b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0376
        gbc.setState(0x19c9, 0xc582, 0xaee0, 0xf9f4, 0x909, 0x52bc, 0x0, 0x0);
        gbc.writeMem(0x19c9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc582);
        EXPECT(gbc.pc(), 0x19ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0377
        gbc.setState(0x59b4, 0x730, 0xb330, 0x4ec9, 0xead5, 0x3937, 0x1, 0x0);
        gbc.writeMem(0x59b4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x730);
        EXPECT(gbc.pc(), 0x59b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0378
        gbc.setState(0x17cb, 0x572e, 0xf890, 0x2108, 0x963d, 0x54b6, 0x0, 0x0);
        gbc.writeMem(0x17cb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x572e);
        EXPECT(gbc.pc(), 0x17cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0379
        gbc.setState(0xda02, 0xf2c8, 0xfe80, 0x59e2, 0x6402, 0x9aa7, 0x1, 0x1);
        gbc.writeMem(0xda02, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf2c8);
        EXPECT(gbc.pc(), 0xda03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda02), 0x3f);
        // 3F 037A
        gbc.setState(0x27c, 0xc5b, 0x1860, 0x7bc6, 0xa0a6, 0x8223, 0x1, 0x0);
        gbc.writeMem(0x27c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc5b);
        EXPECT(gbc.pc(), 0x27d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 037B
        gbc.setState(0x572, 0xbcf, 0x9e00, 0x63d8, 0x95, 0x1ecc, 0x1, 0x1);
        gbc.writeMem(0x572, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbcf);
        EXPECT(gbc.pc(), 0x573);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 037C
        gbc.setState(0xb280, 0x4ea9, 0x36c0, 0xb2a2, 0xa376, 0xbd88, 0x1, 0x0);
        gbc.writeMem(0xb280, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4ea9);
        EXPECT(gbc.pc(), 0xb281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb280), 0x3f);
        // 3F 037E
        gbc.setState(0x3278, 0xc19f, 0xa0b0, 0xa976, 0x8a28, 0x10e, 0x0, 0x1);
        gbc.writeMem(0x3278, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc19f);
        EXPECT(gbc.pc(), 0x3279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 037F
        gbc.setState(0x2bdf, 0x1df2, 0xed70, 0x4732, 0xf690, 0xc177, 0x1, 0x0);
        gbc.writeMem(0x2bdf, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1df2);
        EXPECT(gbc.pc(), 0x2be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0380
        gbc.setState(0xd234, 0x56d6, 0xd20, 0x7040, 0xe867, 0x5abc, 0x1, 0x1);
        gbc.writeMem(0xd234, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x56d6);
        EXPECT(gbc.pc(), 0xd235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd234), 0x3f);
        // 3F 0382
        gbc.setState(0x83fe, 0xef96, 0xc150, 0x196a, 0x538c, 0xba9f, 0x0, 0x0);
        gbc.writeMem(0x83fe, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xef96);
        EXPECT(gbc.pc(), 0x83ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83fe), 0x3f);
        // 3F 0383
        gbc.setState(0x7613, 0xa474, 0x6ae0, 0xce17, 0xbc4b, 0x8399, 0x1, 0x0);
        gbc.writeMem(0x7613, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa474);
        EXPECT(gbc.pc(), 0x7614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0384
        gbc.setState(0xac6b, 0x576f, 0x9650, 0x19cc, 0xc375, 0x753c, 0x0, 0x1);
        gbc.writeMem(0xac6b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x576f);
        EXPECT(gbc.pc(), 0xac6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac6b), 0x3f);
        // 3F 0385
        gbc.setState(0xcd29, 0x2891, 0x5cd0, 0x93f3, 0x7cc, 0xa4ba, 0x0, 0x0);
        gbc.writeMem(0xcd29, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2891);
        EXPECT(gbc.pc(), 0xcd2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd29), 0x3f);
        // 3F 0386
        gbc.setState(0x6ff4, 0xcc5d, 0xc8d0, 0x7756, 0xd32a, 0x7ec6, 0x1, 0x1);
        gbc.writeMem(0x6ff4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xcc5d);
        EXPECT(gbc.pc(), 0x6ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0387
        gbc.setState(0x1ad3, 0xe22f, 0xd6f0, 0x2e84, 0xb285, 0x2ff4, 0x0, 0x1);
        gbc.writeMem(0x1ad3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe22f);
        EXPECT(gbc.pc(), 0x1ad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0388
        gbc.setState(0x86f4, 0xf907, 0x8e0, 0x52ce, 0x8552, 0x1160, 0x0, 0x1);
        gbc.writeMem(0x86f4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf907);
        EXPECT(gbc.pc(), 0x86f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86f4), 0x3f);
        // 3F 0389
        gbc.setState(0x6c76, 0x4a23, 0x2f00, 0x6007, 0x8fb2, 0x8fe5, 0x0, 0x1);
        gbc.writeMem(0x6c76, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x4a23);
        EXPECT(gbc.pc(), 0x6c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 038A
        gbc.setState(0x4d7a, 0x5a65, 0xd230, 0x2716, 0x1a09, 0x2630, 0x1, 0x1);
        gbc.writeMem(0x4d7a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5a65);
        EXPECT(gbc.pc(), 0x4d7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 038B
        gbc.setState(0x43d1, 0xf364, 0xde90, 0xf461, 0x6797, 0x7511, 0x1, 0x0);
        gbc.writeMem(0x43d1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf364);
        EXPECT(gbc.pc(), 0x43d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 038C
        gbc.setState(0xd0ee, 0xd7d0, 0x4720, 0xda3f, 0x13ff, 0x563c, 0x0, 0x1);
        gbc.writeMem(0xd0ee, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd7d0);
        EXPECT(gbc.pc(), 0xd0ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0ee), 0x3f);
        // 3F 038D
        gbc.setState(0x264c, 0x3694, 0x4b80, 0x884b, 0x7174, 0x248b, 0x0, 0x1);
        gbc.writeMem(0x264c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3694);
        EXPECT(gbc.pc(), 0x264d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 038E
        gbc.setState(0x20f1, 0x7179, 0x8f00, 0x1237, 0x999b, 0x2730, 0x1, 0x0);
        gbc.writeMem(0x20f1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7179);
        EXPECT(gbc.pc(), 0x20f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 038F
        gbc.setState(0xac2e, 0xcaa5, 0x68f0, 0xbdff, 0xfbc, 0x53e1, 0x0, 0x1);
        gbc.writeMem(0xac2e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xcaa5);
        EXPECT(gbc.pc(), 0xac2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac2e), 0x3f);
        // 3F 0390
        gbc.setState(0x8df5, 0x9f48, 0xd670, 0x808b, 0x5ec9, 0x53b6, 0x0, 0x0);
        gbc.writeMem(0x8df5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9f48);
        EXPECT(gbc.pc(), 0x8df6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8df5), 0x3f);
        // 3F 0391
        gbc.setState(0x9412, 0xcebd, 0xd650, 0x2717, 0x1ffc, 0xf348, 0x1, 0x0);
        gbc.writeMem(0x9412, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xcebd);
        EXPECT(gbc.pc(), 0x9413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9412), 0x3f);
        // 3F 0392
        gbc.setState(0xeb9e, 0x685d, 0xa1b0, 0xdd95, 0xfccd, 0x4f7d, 0x0, 0x0);
        gbc.writeMem(0xeb9e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x685d);
        EXPECT(gbc.pc(), 0xeb9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb9e), 0x3f);
        // 3F 0393
        gbc.setState(0x6d9a, 0x1a8d, 0xe200, 0xf7f1, 0x45f9, 0x19d1, 0x0, 0x1);
        gbc.writeMem(0x6d9a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1a8d);
        EXPECT(gbc.pc(), 0x6d9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0394
        gbc.setState(0xc27a, 0x106b, 0x6eb0, 0x2f84, 0xdfaf, 0x9783, 0x0, 0x0);
        gbc.writeMem(0xc27a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x106b);
        EXPECT(gbc.pc(), 0xc27b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc27a), 0x3f);
        // 3F 0395
        gbc.setState(0xdaa, 0x9741, 0x3070, 0x8cd3, 0xaf71, 0x3be2, 0x0, 0x1);
        gbc.writeMem(0xdaa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9741);
        EXPECT(gbc.pc(), 0xdab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0396
        gbc.setState(0x7526, 0xf2fa, 0x4700, 0x8e60, 0x525f, 0xde9a, 0x0, 0x0);
        gbc.writeMem(0x7526, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf2fa);
        EXPECT(gbc.pc(), 0x7527);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0397
        gbc.setState(0x58e5, 0x1a8c, 0x5980, 0x4139, 0xd18a, 0xca07, 0x1, 0x0);
        gbc.writeMem(0x58e5, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1a8c);
        EXPECT(gbc.pc(), 0x58e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 0398
        gbc.setState(0x56d1, 0x794a, 0x4990, 0xe38d, 0xc512, 0xd6da, 0x1, 0x1);
        gbc.writeMem(0x56d1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x794a);
        EXPECT(gbc.pc(), 0x56d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 0399
        gbc.setState(0x563b, 0x7c91, 0x48f0, 0xcac7, 0x2159, 0x5d9f, 0x0, 0x1);
        gbc.writeMem(0x563b, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7c91);
        EXPECT(gbc.pc(), 0x563c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 039A
        gbc.setState(0xb824, 0x2a5, 0x78b0, 0x3bf6, 0x5b1b, 0xd1c9, 0x1, 0x0);
        gbc.writeMem(0xb824, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2a5);
        EXPECT(gbc.pc(), 0xb825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb824), 0x3f);
        // 3F 039B
        gbc.setState(0xae99, 0x774e, 0x92f0, 0x6fd2, 0xa35, 0x8e27, 0x1, 0x1);
        gbc.writeMem(0xae99, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x774e);
        EXPECT(gbc.pc(), 0xae9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae99), 0x3f);
        // 3F 039C
        gbc.setState(0x9832, 0xf70c, 0xbf50, 0x139, 0xcb51, 0xb798, 0x1, 0x1);
        gbc.writeMem(0x9832, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf70c);
        EXPECT(gbc.pc(), 0x9833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9832), 0x3f);
        // 3F 039D
        gbc.setState(0xe9b6, 0x50c5, 0x2500, 0x3b67, 0x52da, 0xca97, 0x1, 0x0);
        gbc.writeMem(0xe9b6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x50c5);
        EXPECT(gbc.pc(), 0xe9b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b6), 0x3f);
        // 3F 039E
        gbc.setState(0x1ab9, 0x7ab, 0xef0, 0xbc9d, 0x8e7a, 0x22ae, 0x0, 0x1);
        gbc.writeMem(0x1ab9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7ab);
        EXPECT(gbc.pc(), 0x1aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 039F
        gbc.setState(0x49a0, 0x9b86, 0x8100, 0xd80e, 0x9ae1, 0xc4e2, 0x1, 0x0);
        gbc.writeMem(0x49a0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9b86);
        EXPECT(gbc.pc(), 0x49a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03A0
        gbc.setState(0x62cd, 0xde1a, 0x7870, 0x18c, 0xa7ae, 0x98e6, 0x1, 0x1);
        gbc.writeMem(0x62cd, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xde1a);
        EXPECT(gbc.pc(), 0x62ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03A1
        gbc.setState(0x7b7f, 0x688c, 0xc080, 0x2483, 0x1c6d, 0x5ca3, 0x1, 0x1);
        gbc.writeMem(0x7b7f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x688c);
        EXPECT(gbc.pc(), 0x7b80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03A2
        gbc.setState(0xee87, 0x580b, 0x6e70, 0x9fe2, 0xc631, 0x5d29, 0x0, 0x1);
        gbc.writeMem(0xee87, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x580b);
        EXPECT(gbc.pc(), 0xee88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee87), 0x3f);
        // 3F 03A3
        gbc.setState(0xc041, 0x41d8, 0xd150, 0xafe8, 0x4e1d, 0xa66d, 0x0, 0x0);
        gbc.writeMem(0xc041, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x41d8);
        EXPECT(gbc.pc(), 0xc042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc041), 0x3f);
        // 3F 03A4
        gbc.setState(0x47ad, 0x445c, 0xf5a0, 0x99a9, 0x75c9, 0x7883, 0x0, 0x1);
        gbc.writeMem(0x47ad, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x445c);
        EXPECT(gbc.pc(), 0x47ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03A5
        gbc.setState(0x7aa0, 0xa045, 0x1850, 0x8eab, 0xc070, 0xba34, 0x1, 0x0);
        gbc.writeMem(0x7aa0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa045);
        EXPECT(gbc.pc(), 0x7aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03A6
        gbc.setState(0xbd6d, 0x22d6, 0x8e60, 0xc135, 0x17ec, 0x8a18, 0x0, 0x1);
        gbc.writeMem(0xbd6d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x22d6);
        EXPECT(gbc.pc(), 0xbd6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd6d), 0x3f);
        // 3F 03A7
        gbc.setState(0xecb4, 0x8a1b, 0x3190, 0x8300, 0x619d, 0x677c, 0x1, 0x0);
        gbc.writeMem(0xecb4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x8a1b);
        EXPECT(gbc.pc(), 0xecb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb4), 0x3f);
        // 3F 03A8
        gbc.setState(0x3f6f, 0xfc9f, 0x6f70, 0xa4e9, 0xb742, 0xc00, 0x1, 0x0);
        gbc.writeMem(0x3f6f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfc9f);
        EXPECT(gbc.pc(), 0x3f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03A9
        gbc.setState(0xb288, 0x66a7, 0x9510, 0x8b3f, 0x458, 0x5b5, 0x1, 0x1);
        gbc.writeMem(0xb288, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x66a7);
        EXPECT(gbc.pc(), 0xb289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb288), 0x3f);
        // 3F 03AA
        gbc.setState(0x2cb3, 0xcdbe, 0x64d0, 0x8113, 0xed3a, 0x2bec, 0x0, 0x0);
        gbc.writeMem(0x2cb3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xcdbe);
        EXPECT(gbc.pc(), 0x2cb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03AB
        gbc.setState(0x9c8, 0x38c1, 0xdd00, 0x515, 0x712e, 0x82e6, 0x0, 0x1);
        gbc.writeMem(0x9c8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x38c1);
        EXPECT(gbc.pc(), 0x9c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03AC
        gbc.setState(0xee07, 0x503a, 0x9320, 0x30a, 0xcf2d, 0x4ced, 0x1, 0x0);
        gbc.writeMem(0xee07, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x503a);
        EXPECT(gbc.pc(), 0xee08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee07), 0x3f);
        // 3F 03AD
        gbc.setState(0xa6f3, 0x11f2, 0x6120, 0x7105, 0x33a, 0x80be, 0x0, 0x1);
        gbc.writeMem(0xa6f3, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x11f2);
        EXPECT(gbc.pc(), 0xa6f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6f3), 0x3f);
        // 3F 03AE
        gbc.setState(0x1e84, 0x4bb, 0x1e60, 0x9b3b, 0x4f61, 0xffa9, 0x1, 0x1);
        gbc.writeMem(0x1e84, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4bb);
        EXPECT(gbc.pc(), 0x1e85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03AF
        gbc.setState(0xe75e, 0x907b, 0x5b60, 0x2acc, 0xe97, 0x3850, 0x1, 0x0);
        gbc.writeMem(0xe75e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x907b);
        EXPECT(gbc.pc(), 0xe75f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe75e), 0x3f);
        // 3F 03B0
        gbc.setState(0x5263, 0x27f6, 0x1440, 0xf0fd, 0x5fe7, 0xfc60, 0x0, 0x0);
        gbc.writeMem(0x5263, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x27f6);
        EXPECT(gbc.pc(), 0x5264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03B2
        gbc.setState(0xeff7, 0x66ad, 0x1300, 0xcb14, 0x3675, 0x3862, 0x0, 0x0);
        gbc.writeMem(0xeff7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x66ad);
        EXPECT(gbc.pc(), 0xeff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeff7), 0x3f);
        // 3F 03B3
        gbc.setState(0x8db8, 0x67d1, 0xe500, 0x2087, 0x3b24, 0xc797, 0x1, 0x1);
        gbc.writeMem(0x8db8, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x67d1);
        EXPECT(gbc.pc(), 0x8db9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db8), 0x3f);
        // 3F 03B4
        gbc.setState(0x42, 0x9dd4, 0xa70, 0x1156, 0x42eb, 0x45b, 0x0, 0x0);
        gbc.writeMem(0x42, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9dd4);
        EXPECT(gbc.pc(), 0x43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03B5
        gbc.setState(0x5ac0, 0x2e2d, 0xbe30, 0x23e1, 0x88bf, 0x38c4, 0x1, 0x1);
        gbc.writeMem(0x5ac0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2e2d);
        EXPECT(gbc.pc(), 0x5ac1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03B6
        gbc.setState(0xc5db, 0x63c4, 0x81b0, 0x10a4, 0x4242, 0x1800, 0x1, 0x1);
        gbc.writeMem(0xc5db, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x63c4);
        EXPECT(gbc.pc(), 0xc5dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5db), 0x3f);
        // 3F 03B7
        gbc.setState(0x7f47, 0xc761, 0xcbc0, 0xc101, 0x824b, 0x69f2, 0x1, 0x1);
        gbc.writeMem(0x7f47, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc761);
        EXPECT(gbc.pc(), 0x7f48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03B8
        gbc.setState(0x915c, 0xf431, 0xa150, 0x87ac, 0xc33a, 0x8459, 0x0, 0x0);
        gbc.writeMem(0x915c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf431);
        EXPECT(gbc.pc(), 0x915d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x915c), 0x3f);
        // 3F 03B9
        gbc.setState(0x7c9a, 0x297d, 0x7b00, 0x946f, 0x9012, 0x9da6, 0x0, 0x1);
        gbc.writeMem(0x7c9a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x297d);
        EXPECT(gbc.pc(), 0x7c9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03BB
        gbc.setState(0xcc88, 0x693c, 0xc7e0, 0xe0b7, 0x9ca6, 0xdf2f, 0x0, 0x0);
        gbc.writeMem(0xcc88, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x693c);
        EXPECT(gbc.pc(), 0xcc89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc88), 0x3f);
        // 3F 03BC
        gbc.setState(0xeb08, 0x10, 0xbde0, 0xb8bc, 0xdcca, 0xbce9, 0x0, 0x0);
        gbc.writeMem(0xeb08, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x10);
        EXPECT(gbc.pc(), 0xeb09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb08), 0x3f);
        // 3F 03BD
        gbc.setState(0x83e0, 0x6944, 0x650, 0x809d, 0x1772, 0xa5e4, 0x0, 0x1);
        gbc.writeMem(0x83e0, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6944);
        EXPECT(gbc.pc(), 0x83e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83e0), 0x3f);
        // 3F 03BE
        gbc.setState(0x6021, 0xc34c, 0x2ab0, 0x59db, 0x58f8, 0xed7d, 0x1, 0x0);
        gbc.writeMem(0x6021, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc34c);
        EXPECT(gbc.pc(), 0x6022);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03BF
        gbc.setState(0x8dc, 0xab4d, 0xd7a0, 0xe6d1, 0xbd50, 0x27c3, 0x1, 0x1);
        gbc.writeMem(0x8dc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xab4d);
        EXPECT(gbc.pc(), 0x8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03C0
        gbc.setState(0x1cac, 0x679e, 0x3e70, 0xb3be, 0x8222, 0xd020, 0x0, 0x0);
        gbc.writeMem(0x1cac, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x679e);
        EXPECT(gbc.pc(), 0x1cad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03C1
        gbc.setState(0xa8d1, 0x5d60, 0x37e0, 0xd766, 0x49a1, 0x5164, 0x0, 0x0);
        gbc.writeMem(0xa8d1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5d60);
        EXPECT(gbc.pc(), 0xa8d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d1), 0x3f);
        // 3F 03C2
        gbc.setState(0x8915, 0x9cdc, 0x5be0, 0x61b4, 0x6e1c, 0xf8f9, 0x0, 0x1);
        gbc.writeMem(0x8915, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9cdc);
        EXPECT(gbc.pc(), 0x8916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8915), 0x3f);
        // 3F 03C3
        gbc.setState(0x38ad, 0x9ae2, 0x5180, 0xa4f7, 0x4d39, 0x6f84, 0x1, 0x0);
        gbc.writeMem(0x38ad, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9ae2);
        EXPECT(gbc.pc(), 0x38ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03C4
        gbc.setState(0x159c, 0x6995, 0x3400, 0xa224, 0xf4ab, 0x4929, 0x0, 0x0);
        gbc.writeMem(0x159c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6995);
        EXPECT(gbc.pc(), 0x159d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03C6
        gbc.setState(0xf20, 0xb350, 0x7b0, 0xe754, 0x652d, 0xb9e4, 0x0, 0x0);
        gbc.writeMem(0xf20, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb350);
        EXPECT(gbc.pc(), 0xf21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03C7
        gbc.setState(0xad5d, 0x8448, 0xe930, 0x9ebb, 0xb221, 0xf356, 0x0, 0x1);
        gbc.writeMem(0xad5d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8448);
        EXPECT(gbc.pc(), 0xad5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad5d), 0x3f);
        // 3F 03C8
        gbc.setState(0x2e18, 0x5ecc, 0x6000, 0xd48b, 0xaf57, 0xd497, 0x0, 0x1);
        gbc.writeMem(0x2e18, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5ecc);
        EXPECT(gbc.pc(), 0x2e19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03C9
        gbc.setState(0xb751, 0x41ce, 0x80e0, 0x8344, 0x20f7, 0x544d, 0x0, 0x0);
        gbc.writeMem(0xb751, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x41ce);
        EXPECT(gbc.pc(), 0xb752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb751), 0x3f);
        // 3F 03CA
        gbc.setState(0x3eb1, 0xe6e8, 0xc920, 0xe018, 0xbce2, 0x4fb3, 0x1, 0x1);
        gbc.writeMem(0x3eb1, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe6e8);
        EXPECT(gbc.pc(), 0x3eb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03CB
        gbc.setState(0xd23, 0x19be, 0xbf50, 0x4405, 0xbd59, 0x4554, 0x0, 0x0);
        gbc.writeMem(0xd23, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x19be);
        EXPECT(gbc.pc(), 0xd24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03CC
        gbc.setState(0x7770, 0x1a0, 0x8400, 0x4319, 0x3a7f, 0x3d40, 0x0, 0x0);
        gbc.writeMem(0x7770, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1a0);
        EXPECT(gbc.pc(), 0x7771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03CD
        gbc.setState(0x3256, 0x7758, 0x7810, 0x5c76, 0x97ab, 0xa1ad, 0x1, 0x1);
        gbc.writeMem(0x3256, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7758);
        EXPECT(gbc.pc(), 0x3257);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03CE
        gbc.setState(0xe7de, 0x4a2c, 0xc9a0, 0x6e1c, 0xfb56, 0x6c70, 0x0, 0x0);
        gbc.writeMem(0xe7de, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4a2c);
        EXPECT(gbc.pc(), 0xe7df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7de), 0x3f);
        // 3F 03CF
        gbc.setState(0xb37d, 0xee44, 0xa070, 0x1e1e, 0xb25b, 0xcc66, 0x1, 0x1);
        gbc.writeMem(0xb37d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xee44);
        EXPECT(gbc.pc(), 0xb37e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb37d), 0x3f);
        // 3F 03D0
        gbc.setState(0x9a82, 0xdd46, 0x1d60, 0x7259, 0xd05, 0x4023, 0x0, 0x1);
        gbc.writeMem(0x9a82, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xdd46);
        EXPECT(gbc.pc(), 0x9a83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a82), 0x3f);
        // 3F 03D1
        gbc.setState(0x7321, 0x3c0f, 0xec90, 0x960b, 0x6305, 0x708f, 0x1, 0x0);
        gbc.writeMem(0x7321, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3c0f);
        EXPECT(gbc.pc(), 0x7322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03D2
        gbc.setState(0xd13c, 0xd89c, 0xcac0, 0x3221, 0xee63, 0xb1bf, 0x1, 0x0);
        gbc.writeMem(0xd13c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd89c);
        EXPECT(gbc.pc(), 0xd13d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd13c), 0x3f);
        // 3F 03D3
        gbc.setState(0xc96f, 0x17b7, 0xc990, 0x74d5, 0xa900, 0x4918, 0x1, 0x1);
        gbc.writeMem(0xc96f, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x17b7);
        EXPECT(gbc.pc(), 0xc970);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc96f), 0x3f);
        // 3F 03D4
        gbc.setState(0xcd31, 0x38b7, 0x5d10, 0x9242, 0x400b, 0x196f, 0x1, 0x0);
        gbc.writeMem(0xcd31, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x38b7);
        EXPECT(gbc.pc(), 0xcd32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd31), 0x3f);
        // 3F 03D5
        gbc.setState(0x3b7c, 0x53b7, 0xf670, 0xd77c, 0x63cf, 0xaf99, 0x1, 0x0);
        gbc.writeMem(0x3b7c, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x53b7);
        EXPECT(gbc.pc(), 0x3b7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03D6
        gbc.setState(0x4034, 0x7a8c, 0xc950, 0xe869, 0xeab, 0x16d8, 0x1, 0x0);
        gbc.writeMem(0x4034, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7a8c);
        EXPECT(gbc.pc(), 0x4035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03D7
        gbc.setState(0x5b13, 0x847f, 0xc820, 0xf936, 0x69cc, 0x1290, 0x1, 0x0);
        gbc.writeMem(0x5b13, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x847f);
        EXPECT(gbc.pc(), 0x5b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03D8
        gbc.setState(0x6b9a, 0xf30e, 0x6ea0, 0x2519, 0x2113, 0xdeb3, 0x1, 0x0);
        gbc.writeMem(0x6b9a, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf30e);
        EXPECT(gbc.pc(), 0x6b9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03D9
        gbc.setState(0x4449, 0x8732, 0x1c10, 0xf0b2, 0x5e96, 0xea70, 0x1, 0x1);
        gbc.writeMem(0x4449, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8732);
        EXPECT(gbc.pc(), 0x444a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03DA
        gbc.setState(0x1ebc, 0xb683, 0xef70, 0x8d97, 0xa2a9, 0xfe0d, 0x0, 0x0);
        gbc.writeMem(0x1ebc, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb683);
        EXPECT(gbc.pc(), 0x1ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03DB
        gbc.setState(0x93eb, 0x5471, 0xab00, 0xfe5b, 0xdb3b, 0x851f, 0x0, 0x1);
        gbc.writeMem(0x93eb, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5471);
        EXPECT(gbc.pc(), 0x93ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93eb), 0x3f);
        // 3F 03DC
        gbc.setState(0x1c9e, 0x67b6, 0xdde0, 0xa598, 0xbf6a, 0xc845, 0x1, 0x0);
        gbc.writeMem(0x1c9e, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x67b6);
        EXPECT(gbc.pc(), 0x1c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03DD
        gbc.setState(0x5ae, 0xecc0, 0x2a50, 0x1dc9, 0xb159, 0x1329, 0x1, 0x1);
        gbc.writeMem(0x5ae, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xecc0);
        EXPECT(gbc.pc(), 0x5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03DE
        gbc.setState(0x3032, 0xa617, 0x15b0, 0x7d11, 0xb773, 0x188e, 0x1, 0x1);
        gbc.writeMem(0x3032, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa617);
        EXPECT(gbc.pc(), 0x3033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 3F 03DF
        gbc.setState(0x9d27, 0xae55, 0x69d0, 0xf78, 0xefa5, 0x8c3b, 0x1, 0x0);
        gbc.writeMem(0x9d27, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xae55);
        EXPECT(gbc.pc(), 0x9d28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d27), 0x3f);
        // 3F 03E0
        gbc.setState(0xed44, 0x270, 0x6ba0, 0xdd34, 0x796c, 0x47b3, 0x0, 0x0);
        gbc.writeMem(0xed44, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x270);
        EXPECT(gbc.pc(), 0xed45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed44), 0x3f);
        // 3F 03E1
        gbc.setState(0xb41d, 0xb300, 0x2bd0, 0xf4dd, 0xc441, 0x7a9f, 0x1, 0x1);
        gbc.writeMem(0xb41d, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xb300);
        EXPECT(gbc.pc(), 0xb41e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41d), 0x3f);
        // 3F 03E2
        gbc.setState(0xcdce, 0xcd5d, 0xf9e0, 0x87bf, 0x929f, 0x609c, 0x0, 0x1);
        gbc.writeMem(0xcdce, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xcd5d);
        EXPECT(gbc.pc(), 0xcdcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdce), 0x3f);
        // 3F 03E3
        gbc.setState(0x44b9, 0xb948, 0x8e00, 0x5bd8, 0xc3a7, 0x7df5, 0x0, 0x0);
        gbc.writeMem(0x44b9, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb948);
        EXPECT(gbc.pc(), 0x44ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03E4
        gbc.setState(0xa1fa, 0x9257, 0x9700, 0xc386, 0xb311, 0xb57d, 0x1, 0x0);
        gbc.writeMem(0xa1fa, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9257);
        EXPECT(gbc.pc(), 0xa1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1fa), 0x3f);
        // 3F 03E5
        gbc.setState(0x5ed6, 0xbf57, 0x8c60, 0x609c, 0x8770, 0x8d54, 0x1, 0x0);
        gbc.writeMem(0x5ed6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbf57);
        EXPECT(gbc.pc(), 0x5ed7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 3F 03E6
        gbc.setState(0x8ead, 0x24d6, 0x4090, 0x1e1d, 0x307b, 0x17ec, 0x1, 0x0);
        gbc.writeMem(0x8ead, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x24d6);
        EXPECT(gbc.pc(), 0x8eae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ead), 0x3f);
        // 3F 03E7
        gbc.setState(0x7802, 0x212a, 0x8ad0, 0xf76d, 0x4e11, 0x6fe5, 0x0, 0x1);
        gbc.writeMem(0x7802, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x212a);
        EXPECT(gbc.pc(), 0x7803);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
